{"version":3,"file":"ffp-generate.umd.js","sources":["../node_modules/lineclip/index.js","../node_modules/missing-math/dist/missing-math.m.js","../lib/symbols.js","../node_modules/json-stringify-safe/stringify.js","../node_modules/random-seed/index.js","../node_modules/tumult/lib/util/noise.js","../node_modules/tumult/lib/util/1d.js","../node_modules/tumult/lib/util/math.js","../node_modules/tumult/lib/simplex/simplex1.js","../node_modules/tumult/lib/util/2d.js","../node_modules/tumult/lib/simplex/simplex2.js","../node_modules/tumult/lib/perlin/perlin1.js","../node_modules/tumult/lib/util/3d.js","../node_modules/tumult/lib/util/4d.js","../node_modules/tumult/lib/util/nd.js","../lib/abstractions/Line.js","../lib/abstractions/Gradient.js","../node_modules/fast-random/index.js","../lib/utils/prng.js","../lib/utils/array-random.js","../lib/abstractions/Landscape.js","../lib/utils/array-chunk.js","../lib/utils/array-shuffle.js","../lib/colors.js","../node_modules/@internet/raf/lib/raf.js","../render/svg.js","example.js","../render/canvas.js","../post-processing/erode.js","../lib/utils/array-median.js"],"sourcesContent":["'use strict';\n\nmodule.exports = lineclip;\n\nlineclip.polyline = lineclip;\nlineclip.polygon = polygonclip;\n\n\n// Cohen-Sutherland line clippign algorithm, adapted to efficiently\n// handle polylines rather than just segments\n\nfunction lineclip(points, bbox, result) {\n\n    var len = points.length,\n        codeA = bitCode(points[0], bbox),\n        part = [],\n        i, a, b, codeB, lastCode;\n\n    if (!result) result = [];\n\n    for (i = 1; i < len; i++) {\n        a = points[i - 1];\n        b = points[i];\n        codeB = lastCode = bitCode(b, bbox);\n\n        while (true) {\n\n            if (!(codeA | codeB)) { // accept\n                part.push(a);\n\n                if (codeB !== lastCode) { // segment went outside\n                    part.push(b);\n\n                    if (i < len - 1) { // start a new line\n                        result.push(part);\n                        part = [];\n                    }\n                } else if (i === len - 1) {\n                    part.push(b);\n                }\n                break;\n\n            } else if (codeA & codeB) { // trivial reject\n                break;\n\n            } else if (codeA) { // a outside, intersect with clip edge\n                a = intersect(a, b, codeA, bbox);\n                codeA = bitCode(a, bbox);\n\n            } else { // b outside\n                b = intersect(a, b, codeB, bbox);\n                codeB = bitCode(b, bbox);\n            }\n        }\n\n        codeA = lastCode;\n    }\n\n    if (part.length) result.push(part);\n\n    return result;\n}\n\n// Sutherland-Hodgeman polygon clipping algorithm\n\nfunction polygonclip(points, bbox) {\n\n    var result, edge, prev, prevInside, i, p, inside;\n\n    // clip against each side of the clip rectangle\n    for (edge = 1; edge <= 8; edge *= 2) {\n        result = [];\n        prev = points[points.length - 1];\n        prevInside = !(bitCode(prev, bbox) & edge);\n\n        for (i = 0; i < points.length; i++) {\n            p = points[i];\n            inside = !(bitCode(p, bbox) & edge);\n\n            // if segment goes through the clip window, add an intersection\n            if (inside !== prevInside) result.push(intersect(prev, p, edge, bbox));\n\n            if (inside) result.push(p); // add a point if it's inside\n\n            prev = p;\n            prevInside = inside;\n        }\n\n        points = result;\n\n        if (!points.length) break;\n    }\n\n    return result;\n}\n\n// intersect a segment against one of the 4 lines that make up the bbox\n\nfunction intersect(a, b, edge, bbox) {\n    return edge & 8 ? [a[0] + (b[0] - a[0]) * (bbox[3] - a[1]) / (b[1] - a[1]), bbox[3]] : // top\n           edge & 4 ? [a[0] + (b[0] - a[0]) * (bbox[1] - a[1]) / (b[1] - a[1]), bbox[1]] : // bottom\n           edge & 2 ? [bbox[2], a[1] + (b[1] - a[1]) * (bbox[2] - a[0]) / (b[0] - a[0])] : // right\n           edge & 1 ? [bbox[0], a[1] + (b[1] - a[1]) * (bbox[0] - a[0]) / (b[0] - a[0])] : // left\n           null;\n}\n\n// bit code reflects the point position relative to the bbox:\n\n//         left  mid  right\n//    top  1001  1000  1010\n//    mid  0001  0000  0010\n// bottom  0101  0100  0110\n\nfunction bitCode(p, bbox) {\n    var code = 0;\n\n    if (p[0] < bbox[0]) code |= 1; // left\n    else if (p[0] > bbox[2]) code |= 2; // right\n\n    if (p[1] < bbox[1]) code |= 4; // bottom\n    else if (p[1] > bbox[3]) code |= 8; // top\n\n    return code;\n}\n","function n(n,t,r){return Math.max(t,Math.min(n,r))}function t(n,t,o,u){return void 0===u&&(u=!1),r(n,t,o,0,1,u)}function r(t,r,o,u,i,a){void 0===a&&(a=!1);var e=(t-r)*(i-u)/(o-r)+u;return a?n(e,u,i):e}function o(n,t,r){return n+r*(t-n)}function u(n,t,r){return void 0===r&&(r=Math.random),void 0!==t?o(n,t,r()):o(0,n,r())}function i(n,t,r){return void 0===r&&(r=Math.random),Math.floor(u(n,t,r))}function a(n){return 180*n/Math.PI}function e(n){return n*Math.PI/180}function f(n,t){return Math.ceil(n/t)*t}function c(n,t){return Math.floor(n/t)*t}function h(n,t){var r=n-Math.floor(n);return t?+r.toFixed(t):r}export{n as clamp,t as normalize,r as map,o as lerp,u as random,i as randomInt,a as degrees,e as radians,f as roundTo,c as floorTo,h as fract};\n//# sourceMappingURL=missing-math.m.js.map\n","import lineclip from 'lineclip'\nimport { radians } from 'missing-math'\n\nexport default {\n  empty: () => null,\n\n  square: cell => {\n    const thickness = cell.size * cell.value\n    if (thickness <= 0) return\n\n    const ht = thickness / 2\n    const hs = cell.size / 2\n\n    return [\n      [cell.x + hs - ht, cell.y + hs - ht],\n      [cell.x + hs - ht, cell.y + hs + ht],\n      [cell.x + hs + ht, cell.y + hs + ht],\n      [cell.x + hs + ht, cell.y + hs - ht]\n    ]\n  },\n\n  square_offset: cell => {\n    const thickness = cell.size * cell.value - 10\n    if (thickness <= 0) return\n\n    const ht = thickness / 2\n    const hs = cell.size / 2\n\n    return [\n      [cell.x + hs - ht, cell.y + hs - ht],\n      [cell.x + hs - ht, cell.y + hs + ht],\n      [cell.x + hs + ht, cell.y + hs + ht],\n      [cell.x + hs + ht, cell.y + hs - ht]\n    ]\n  },\n\n  vertical_line: cell => {\n    const thickness = cell.size * cell.value\n    if (thickness <= 0) return\n\n    const ht = thickness / 2\n    const hs = cell.size / 2\n\n    return [\n      [cell.x + hs - ht, cell.y],\n      [cell.x + hs - ht, cell.y + cell.size],\n      [cell.x + hs + ht, cell.y + cell.size],\n      [cell.x + hs + ht, cell.y]\n    ]\n  },\n\n  vertical_line_offset: cell => {\n    const thickness = cell.size * cell.value\n    if (thickness <= 0) return\n\n    const ht = thickness / 2\n    const hs = cell.size / 2\n\n    return [\n      [cell.x + hs - ht, cell.y],\n      [cell.x + hs - ht, cell.y + cell.size],\n      [cell.x + hs + ht, cell.y + cell.size],\n      [cell.x + hs + ht, cell.y]\n    ]\n  },\n\n  horizontal_line: cell => {\n    const thickness = cell.size * cell.value\n    if (thickness <= 0) return\n\n    const ht = thickness / 2\n    const hs = cell.size / 2\n\n    return [\n      [cell.x, cell.y + hs - ht],\n      [cell.x, cell.y + hs + ht],\n      [cell.x + cell.size, cell.y + hs + ht],\n      [cell.x + cell.size, cell.y + hs - ht]\n    ]\n  },\n\n  horizontal_line_offset: cell => {\n    const thickness = cell.size * cell.value - 10\n    if (thickness <= 0) return\n\n    const ht = thickness / 2\n    const hs = cell.size / 2\n\n    return [\n      [cell.x, cell.y + hs - ht],\n      [cell.x, cell.y + hs + ht],\n      [cell.x + cell.size, cell.y + hs + ht],\n      [cell.x + cell.size, cell.y + hs - ht]\n    ]\n  },\n\n  diagonal: cell => {\n    const thickness = cell.size * cell.value\n    if (thickness <= 0) return\n\n    return [\n      [cell.x + cell.size - thickness, cell.y],\n      [cell.x + cell.size, cell.y],\n      [cell.x + thickness, cell.y + cell.size],\n      [cell.x, cell.y + cell.size]\n    ]\n  },\n\n  diamond: cell => {\n    const thickness = cell.size * cell.value - 1\n    if (thickness <= 0) return\n\n    return lineclip.polygon([\n      [cell.x + cell.size / 2, cell.y + thickness],\n      [cell.x + cell.size - thickness, cell.y + cell.size / 2],\n      [cell.x + cell.size / 2, cell.y + cell.size - thickness],\n      [cell.x + thickness, cell.y + cell.size / 2]\n    ], [cell.x, cell.y, cell.x + cell.size, cell.y + cell.size])\n  },\n\n  circle: cell => {\n    const diameter = (cell.size - 1) * cell.value\n    if (diameter < 0) return\n\n    const path = []\n    for (let alpha = 0; alpha < 360; alpha += (360 / 36)) {\n      const theta = radians(alpha)\n      path.push([\n        (cell.x + cell.size / 2) + Math.sin(theta) * (diameter),\n        (cell.y + cell.size / 2) + Math.cos(theta) * (diameter)\n      ])\n    }\n\n    return lineclip.polygon(path, [cell.x, cell.y, cell.x + cell.size, cell.y + cell.size])\n  }\n}\n","exports = module.exports = stringify\nexports.getSerialize = serializer\n\nfunction stringify(obj, replacer, spaces, cycleReplacer) {\n  return JSON.stringify(obj, serializer(replacer, cycleReplacer), spaces)\n}\n\nfunction serializer(replacer, cycleReplacer) {\n  var stack = [], keys = []\n\n  if (cycleReplacer == null) cycleReplacer = function(key, value) {\n    if (stack[0] === value) return \"[Circular ~]\"\n    return \"[Circular ~.\" + keys.slice(0, stack.indexOf(value)).join(\".\") + \"]\"\n  }\n\n  return function(key, value) {\n    if (stack.length > 0) {\n      var thisPos = stack.indexOf(this)\n      ~thisPos ? stack.splice(thisPos + 1) : stack.push(this)\n      ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key)\n      if (~stack.indexOf(value)) value = cycleReplacer.call(this, key, value)\n    }\n    else stack.push(value)\n\n    return replacer == null ? value : replacer.call(this, key, value)\n  }\n}\n","/*\n * random-seed\n * https://github.com/skratchdot/random-seed\n *\n * This code was originally written by Steve Gibson and can be found here:\n *\n * https://www.grc.com/otg/uheprng.htm\n *\n * It was slightly modified for use in node, to pass jshint, and a few additional\n * helper functions were added.\n *\n * Copyright (c) 2013 skratchdot\n * Dual Licensed under the MIT license and the original GRC copyright/license\n * included below.\n */\n/*\t============================================================================\n\t\t\t\t\t\t\t\t\tGibson Research Corporation\n\t\t\t\tUHEPRNG - Ultra High Entropy Pseudo-Random Number Generator\n\t============================================================================\n\tLICENSE AND COPYRIGHT:  THIS CODE IS HEREBY RELEASED INTO THE PUBLIC DOMAIN\n\tGibson Research Corporation releases and disclaims ALL RIGHTS AND TITLE IN\n\tTHIS CODE OR ANY DERIVATIVES. Anyone may be freely use it for any purpose.\n\t============================================================================\n\tThis is GRC's cryptographically strong PRNG (pseudo-random number generator)\n\tfor JavaScript. It is driven by 1536 bits of entropy, stored in an array of\n\t48, 32-bit JavaScript variables.  Since many applications of this generator,\n\tincluding ours with the \"Off The Grid\" Latin Square generator, may require\n\tthe deteriministic re-generation of a sequence of PRNs, this PRNG's initial\n\tentropic state can be read and written as a static whole, and incrementally\n\tevolved by pouring new source entropy into the generator's internal state.\n\t----------------------------------------------------------------------------\n\tENDLESS THANKS are due Johannes Baagoe for his careful development of highly\n\trobust JavaScript implementations of JS PRNGs.  This work was based upon his\n\tJavaScript \"Alea\" PRNG which is based upon the extremely robust Multiply-\n\tWith-Carry (MWC) PRNG invented by George Marsaglia. MWC Algorithm References:\n\thttp://www.GRC.com/otg/Marsaglia_PRNGs.pdf\n\thttp://www.GRC.com/otg/Marsaglia_MWC_Generators.pdf\n\t----------------------------------------------------------------------------\n\tThe quality of this algorithm's pseudo-random numbers have been verified by\n\tmultiple independent researchers. It handily passes the fermilab.ch tests as\n\twell as the \"diehard\" and \"dieharder\" test suites.  For individuals wishing\n\tto further verify the quality of this algorithm's pseudo-random numbers, a\n\t256-megabyte file of this algorithm's output may be downloaded from GRC.com,\n\tand a Microsoft Windows scripting host (WSH) version of this algorithm may be\n\tdownloaded and run from the Windows command prompt to generate unique files\n\tof any size:\n\tThe Fermilab \"ENT\" tests: http://fourmilab.ch/random/\n\tThe 256-megabyte sample PRN file at GRC: https://www.GRC.com/otg/uheprng.bin\n\tThe Windows scripting host version: https://www.GRC.com/otg/wsh-uheprng.js\n\t----------------------------------------------------------------------------\n\tQualifying MWC multipliers are: 187884, 686118, 898134, 1104375, 1250205,\n\t1460910 and 1768863. (We use the largest one that's < 2^21)\n\t============================================================================ */\n'use strict';\nvar stringify = require('json-stringify-safe');\n\n/*\t============================================================================\nThis is based upon Johannes Baagoe's carefully designed and efficient hash\nfunction for use with JavaScript.  It has a proven \"avalanche\" effect such\nthat every bit of the input affects every bit of the output 50% of the time,\nwhich is good.\tSee: http://baagoe.com/en/RandomMusings/hash/avalanche.xhtml\n============================================================================\n*/\nvar Mash = function () {\n\tvar n = 0xefc8249d;\n\tvar mash = function (data) {\n\t\tif (data) {\n\t\t\tdata = data.toString();\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\tn += data.charCodeAt(i);\n\t\t\t\tvar h = 0.02519603282416938 * n;\n\t\t\t\tn = h >>> 0;\n\t\t\t\th -= n;\n\t\t\t\th *= n;\n\t\t\t\tn = h >>> 0;\n\t\t\t\th -= n;\n\t\t\t\tn += h * 0x100000000; // 2^32\n\t\t\t}\n\t\t\treturn (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n\t\t} else {\n\t\t\tn = 0xefc8249d;\n\t\t}\n\t};\n\treturn mash;\n};\n\nvar uheprng = function (seed) {\n\treturn (function () {\n\t\tvar o = 48; // set the 'order' number of ENTROPY-holding 32-bit values\n\t\tvar c = 1; // init the 'carry' used by the multiply-with-carry (MWC) algorithm\n\t\tvar p = o; // init the 'phase' (max-1) of the intermediate variable pointer\n\t\tvar s = new Array(o); // declare our intermediate variables array\n\t\tvar i; // general purpose local\n\t\tvar j; // general purpose local\n\t\tvar k = 0; // general purpose local\n\n\t\t// when our \"uheprng\" is initially invoked our PRNG state is initialized from the\n\t\t// browser's own local PRNG. This is okay since although its generator might not\n\t\t// be wonderful, it's useful for establishing large startup entropy for our usage.\n\t\tvar mash = new Mash(); // get a pointer to our high-performance \"Mash\" hash\n\n\t\t// fill the array with initial mash hash values\n\t\tfor (i = 0; i < o; i++) {\n\t\t\ts[i] = mash(Math.random());\n\t\t}\n\n\t\t// this PRIVATE (internal access only) function is the heart of the multiply-with-carry\n\t\t// (MWC) PRNG algorithm. When called it returns a pseudo-random number in the form of a\n\t\t// 32-bit JavaScript fraction (0.0 to <1.0) it is a PRIVATE function used by the default\n\t\t// [0-1] return function, and by the random 'string(n)' function which returns 'n'\n\t\t// characters from 33 to 126.\n\t\tvar rawprng = function () {\n\t\t\tif (++p >= o) {\n\t\t\t\tp = 0;\n\t\t\t}\n\t\t\tvar t = 1768863 * s[p] + c * 2.3283064365386963e-10; // 2^-32\n\t\t\treturn s[p] = t - (c = t | 0);\n\t\t};\n\n\t\t// this EXPORTED function is the default function returned by this library.\n\t\t// The values returned are integers in the range from 0 to range-1. We first\n\t\t// obtain two 32-bit fractions (from rawprng) to synthesize a single high\n\t\t// resolution 53-bit prng (0 to <1), then we multiply this by the caller's\n\t\t// \"range\" param and take the \"floor\" to return a equally probable integer.\n\t\tvar random = function (range) {\n\t\t\treturn Math.floor(range * (rawprng() + (rawprng() * 0x200000 | 0) * 1.1102230246251565e-16)); // 2^-53\n\t\t};\n\n\t\t// this EXPORTED function 'string(n)' returns a pseudo-random string of\n\t\t// 'n' printable characters ranging from chr(33) to chr(126) inclusive.\n\t\trandom.string = function (count) {\n\t\t\tvar i;\n\t\t\tvar s = '';\n\t\t\tfor (i = 0; i < count; i++) {\n\t\t\t\ts += String.fromCharCode(33 + random(94));\n\t\t\t}\n\t\t\treturn s;\n\t\t};\n\n\t\t// this PRIVATE \"hash\" function is used to evolve the generator's internal\n\t\t// entropy state. It is also called by the EXPORTED addEntropy() function\n\t\t// which is used to pour entropy into the PRNG.\n\t\tvar hash = function () {\n\t\t\tvar args = Array.prototype.slice.call(arguments);\n\t\t\tfor (i = 0; i < args.length; i++) {\n\t\t\t\tfor (j = 0; j < o; j++) {\n\t\t\t\t\ts[j] -= mash(args[i]);\n\t\t\t\t\tif (s[j] < 0) {\n\t\t\t\t\t\ts[j] += 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// this EXPORTED \"clean string\" function removes leading and trailing spaces and non-printing\n\t\t// control characters, including any embedded carriage-return (CR) and line-feed (LF) characters,\n\t\t// from any string it is handed. this is also used by the 'hashstring' function (below) to help\n\t\t// users always obtain the same EFFECTIVE uheprng seeding key.\n\t\trandom.cleanString = function (inStr) {\n\t\t\tinStr = inStr.replace(/(^\\s*)|(\\s*$)/gi, ''); // remove any/all leading spaces\n\t\t\tinStr = inStr.replace(/[\\x00-\\x1F]/gi, ''); // remove any/all control characters\n\t\t\tinStr = inStr.replace(/\\n /, '\\n'); // remove any/all trailing spaces\n\t\t\treturn inStr; // return the cleaned up result\n\t\t};\n\n\t\t// this EXPORTED \"hash string\" function hashes the provided character string after first removing\n\t\t// any leading or trailing spaces and ignoring any embedded carriage returns (CR) or Line Feeds (LF)\n\t\trandom.hashString = function (inStr) {\n\t\t\tinStr = random.cleanString(inStr);\n\t\t\tmash(inStr); // use the string to evolve the 'mash' state\n\t\t\tfor (i = 0; i < inStr.length; i++) { // scan through the characters in our string\n\t\t\t\tk = inStr.charCodeAt(i); // get the character code at the location\n\t\t\t\tfor (j = 0; j < o; j++) { //\t\"mash\" it into the UHEPRNG state\n\t\t\t\t\ts[j] -= mash(k);\n\t\t\t\t\tif (s[j] < 0) {\n\t\t\t\t\t\ts[j] += 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// this EXPORTED function allows you to seed the random generator.\n\t\trandom.seed = function (seed) {\n\t\t\tif (typeof seed === 'undefined' || seed === null) {\n\t\t\t\tseed = Math.random();\n\t\t\t}\n\t\t\tif (typeof seed !== 'string') {\n\t\t\t\tseed = stringify(seed, function (key, value) {\n\t\t\t\t\tif (typeof value === 'function') {\n\t\t\t\t\t\treturn (value).toString();\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t});\n\t\t\t}\n\t\t\trandom.initState();\n\t\t\trandom.hashString(seed);\n\t\t};\n\n\t\t// this handy exported function is used to add entropy to our uheprng at any time\n\t\trandom.addEntropy = function ( /* accept zero or more arguments */ ) {\n\t\t\tvar args = [];\n\t\t\tfor (i = 0; i < arguments.length; i++) {\n\t\t\t\targs.push(arguments[i]);\n\t\t\t}\n\t\t\thash((k++) + (new Date().getTime()) + args.join('') + Math.random());\n\t\t};\n\n\t\t// if we want to provide a deterministic startup context for our PRNG,\n\t\t// but without directly setting the internal state variables, this allows\n\t\t// us to initialize the mash hash and PRNG's internal state before providing\n\t\t// some hashing input\n\t\trandom.initState = function () {\n\t\t\tmash(); // pass a null arg to force mash hash to init\n\t\t\tfor (i = 0; i < o; i++) {\n\t\t\t\ts[i] = mash(' '); // fill the array with initial mash hash values\n\t\t\t}\n\t\t\tc = 1; // init our multiply-with-carry carry\n\t\t\tp = o; // init our phase\n\t\t};\n\n\t\t// we use this (optional) exported function to signal the JavaScript interpreter\n\t\t// that we're finished using the \"Mash\" hash function so that it can free up the\n\t\t// local \"instance variables\" is will have been maintaining.  It's not strictly\n\t\t// necessary, of course, but it's good JavaScript citizenship.\n\t\trandom.done = function () {\n\t\t\tmash = null;\n\t\t};\n\n\t\t// if we called \"uheprng\" with a seed value, then execute random.seed() before returning\n\t\tif (typeof seed !== 'undefined') {\n\t\t\trandom.seed(seed);\n\t\t}\n\n\t\t// Returns a random integer between 0 (inclusive) and range (exclusive)\n\t\trandom.range = function (range) {\n\t\t\treturn random(range);\n\t\t};\n\n\t\t// Returns a random float between 0 (inclusive) and 1 (exclusive)\n\t\trandom.random = function () {\n\t\t\treturn random(Number.MAX_VALUE - 1) / Number.MAX_VALUE;\n\t\t};\n\n\t\t// Returns a random float between min (inclusive) and max (exclusive)\n\t\trandom.floatBetween = function (min, max) {\n\t\t\treturn random.random() * (max - min) + min;\n\t\t};\n\n\t\t// Returns a random integer between min (inclusive) and max (inclusive)\n\t\trandom.intBetween = function (min, max) {\n\t\t\treturn Math.floor(random.random() * (max - min + 1)) + min;\n\t\t};\n\n\t\t// when our main outer \"uheprng\" function is called, after setting up our\n\t\t// initial variables and entropic state, we return an \"instance pointer\"\n\t\t// to the internal anonymous function which can then be used to access\n\t\t// the uheprng's various exported functions.  As with the \".done\" function\n\t\t// above, we should set the returned value to 'null' once we're finished\n\t\t// using any of these functions.\n\t\treturn random;\n\t}());\n};\n\n// Modification for use in node:\nuheprng.create = function (seed) {\n\treturn new uheprng(seed);\n};\nmodule.exports = uheprng;\n","'use strict'\n\nconst rand = require('random-seed')\n\nclass Noise {\n  constructor (s) {\n    this.p = new Uint8Array(512)\n    this.seed(s)\n  }\n\n  gen () {}\n\n  seed (s) {\n    const rng = rand.create(s || Math.random())\n\n    for (let i = 0; i < 256; i++) this.p[i] = i\n    for (let i = 0; i < 256; i++) {\n      const r = rng(256)\n      const temp = this.p[i]\n      this.p[i] = this.p[r]\n      this.p[r] = temp\n    }\n    for (let i = 0; i < 256; i++) this.p[i + 256] = this.p[i]\n  }\n\n  transform (fn) {\n    const transformedFn = (...dims) => fn.apply(this, dims)\n\n    return transformedFn.bind(this)\n  }\n\n  octavate (...args) {\n    const octaves = args[0]\n    const dims = args.slice(1)\n    let val = 0\n    let max = 0\n\n    for (let i = 0; i < octaves; i++) {\n      const w = 1 << i\n      val += this.gen.apply(this, dims.map(x => x * w)) / w\n    }\n\n    for (let i = 0; i < octaves; i++) {\n      max += 1 / (1 << i)\n    }\n\n    return val / max\n  }\n}\n\nmodule.exports = Noise\n","'use strict'\n\nclass Vec1 {\n  constructor (x) {\n    this.x = x\n  }\n\n  dot (x) {\n    return this.x * x\n  }\n}\n\nconst g1 = [ new Vec1(1), new Vec1(-1) ]\n\nfunction grad1 (p, x) {\n  return g1[p[x] % g1.length]\n}\n\nmodule.exports = {\n  grad1\n}\n","'use strict'\n\nfunction falloff (...args) {\n  const dims = args.slice(1)\n  const t = args[0] - dims.reduce((sum, val) => {\n    return sum + val * val\n  }, 0)\n\n  return t * t * t * t\n}\n\nfunction lerp (a, b, t) {\n  return a * (1 - t) + b * t\n}\nfunction fade (t) {\n  return t * t * t * (10 + t * (-15 + t * 6))\n}\nconst cut1 = falloff.bind(null, 1)\nconst cut = falloff.bind(null, 0.5)\n\nmodule.exports = {\n  lerp,\n  fade,\n  cut1,\n  cut\n}\n","'use strict'\n\nconst Noise = require('../util/noise')\nconst { grad1 } = require('../util/1d')\nconst { cut1 } = require('../util/math')\n\nclass Simplex1 extends Noise {\n  gen (x) {\n    const gx = Math.floor(x) % 256\n    const dx = x - gx\n\n    const n0 = cut1(dx) * grad1(this.p, gx).dot(dx)\n    const n1 = cut1(dx - 1) * grad1(this.p, gx + 1).dot(dx - 1)\n\n    return 0.5 * (n0 + n1)\n  }\n}\n\nmodule.exports = Simplex1\n","'use strict'\n\nclass Vec2 {\n  constructor (x, y) {\n    this.x = x\n    this.y = y\n  }\n\n  dot (x, y) {\n    return this.x * x + this.y * y\n  }\n}\n\nconst g2 = [\n  new Vec2(1, 0), new Vec2(1, 1), new Vec2(0, 1), new Vec2(-1, 1),\n  new Vec2(-1, 0), new Vec2(-1, -1), new Vec2(0, -1), new Vec2(1, -1)\n]\n\nfunction grad2 (p, x, y) {\n  const hash = p[x + p[y]] % g2.length\n  return g2[hash]\n}\nconst S2_TO_C = 0.5 * (Math.sqrt(3) - 1)\nconst C_TO_S2 = (3 - Math.sqrt(3)) / 6\n\nmodule.exports = {\n  grad2,\n  S2_TO_C,\n  C_TO_S2\n}\n","'use strict'\n\nconst Noise = require('../util/noise')\nconst { grad2, S2_TO_C, C_TO_S2 } = require('../util/2d')\nconst { cut } = require('../util/math')\n\nclass Simplex2 extends Noise {\n  gen (x, y) {\n    const skew = (x + y) * S2_TO_C\n    const i = Math.trunc(x + skew)\n    const j = Math.trunc(y + skew)\n\n    const unskew = (i + j) * C_TO_S2\n    const gx = i - unskew\n    const gy = j - unskew\n\n    const dx0 = x - gx\n    const dy0 = y - gy\n\n    const di = dx0 > dy0 ? 1 : 0\n    const dj = dx0 > dy0 ? 0 : 1\n\n    const dx1 = dx0 - di + C_TO_S2\n    const dy1 = dy0 - dj + C_TO_S2\n    const dx2 = dx0 - 1 + 2 * C_TO_S2\n    const dy2 = dy0 - 1 + 2 * C_TO_S2\n\n    const n0 = cut(dx0, dy0) * grad2(this.p, i, j).dot(dx0, dy0)\n    const n1 = cut(dx1, dy1) * grad2(this.p, i + di, j + dj).dot(dx1, dy1)\n    const n2 = cut(dx2, dy2) * grad2(this.p, i + 1, j + 1).dot(dx2, dy2)\n\n    return 70 * (n0 + n1 + n2)\n  }\n}\n\nmodule.exports = Simplex2\n","'use strict'\n\nconst Noise = require('../util/noise')\nconst { grad1 } = require('../util/1d')\nconst { lerp, fade } = require('../util/math')\n\nclass Perlin1 extends Noise {\n  gen (x) {\n    const gx = Math.floor(x) % 256\n    const dx = x - gx\n\n    const n0 = grad1(this.p, gx).dot(dx)\n    const n1 = grad1(this.p, gx + 1).dot(dx - 1)\n\n    return lerp(n0, n1, fade(dx))\n  }\n}\n\nmodule.exports = Perlin1\n","'use strict'\n\nclass Vec3 {\n  constructor (x, y, z) {\n    this.x = x\n    this.y = y\n    this.z = z\n  }\n\n  dot (x, y, z) {\n    return this.x * x + this.y * y + this.z * z\n  }\n}\n\nconst g3 = [\n  new Vec3(1, 1, 1), new Vec3(-1, 1, 1), new Vec3(1, -1, 1), new Vec3(-1, -1, 1),\n  new Vec3(1, 1, 0), new Vec3(-1, 1, 0), new Vec3(1, -1, 0), new Vec3(-1, -1, 0),\n  new Vec3(1, 1, -1), new Vec3(-1, 1, -1), new Vec3(1, -1, -1), new Vec3(-1, -1, -1)\n]\n\nfunction grad3 (p, x, y, z) {\n  const hash = p[x + p[y + p[z]]] % g3.length\n  return g3[hash]\n}\n\nmodule.exports = {\n  grad3\n}\n","'use strict'\n\nclass Vec4 {\n  constructor (x, y, z, t) {\n    this.x = x\n    this.y = y\n    this.z = z\n    this.t = t\n  }\n\n  dot (x, y, z, t) {\n    return this.x * x + this.y * y + this.z * z + this.t * t\n  }\n}\n\nconst g4 = [\n  new Vec4(0, 1, 1, 1), new Vec4(0, 1, 1, -1), new Vec4(0, 1, -1, 1), new Vec4(0, 1, -1, -1),\n  new Vec4(0, -1, 1, 1), new Vec4(0, -1, 1, -1), new Vec4(0, -1, -1, 1), new Vec4(0, -1, -1, -1),\n  new Vec4(1, 0, 1, 1), new Vec4(1, 0, 1, -1), new Vec4(1, 0, -1, 1), new Vec4(1, 0, -1, -1),\n  new Vec4(-1, 0, 1, 1), new Vec4(-1, 0, 1, -1), new Vec4(-1, 0, -1, 1), new Vec4(-1, 0, -1, -1),\n  new Vec4(1, 1, 0, 1), new Vec4(1, 1, 0, -1), new Vec4(1, -1, 0, 1), new Vec4(1, -1, 0, -1),\n  new Vec4(-1, 1, 0, 1), new Vec4(-1, 1, 0, -1), new Vec4(-1, -1, 0, 1), new Vec4(-1, -1, 0, -1),\n  new Vec4(1, 1, 1, 0), new Vec4(1, 1, -1, 0), new Vec4(1, -1, 1, 0), new Vec4(1, -1, -1, 0),\n  new Vec4(-1, 1, 1, 0), new Vec4(-1, 1, -1, 0), new Vec4(-1, -1, 1, 0), new Vec4(-1, -1, -1, 0)\n]\n\nfunction grad4 (p, x, y, z, t) {\n  const hash = p[x + p[y + p[z + p[t]]]] % g4.length\n  return g4[hash]\n}\n\nmodule.exports = {\n  grad4\n}\n","'use strict'\n\nconst { lerp, fade } = require('./math')\n\nfunction hashN (p, gs) {\n  if (gs.length === 1) return p[gs[0]]\n\n  return p[gs[0] + hashN(p, gs.slice(1))]\n}\n\nclass VecN {\n  constructor (R) {\n    this.R = R\n  }\n\n  dot (R) {\n    let val = 0\n\n    for (let i = 0; i < R.length; i++) {\n      val += this.R[i] * R[i]\n    }\n\n    return val\n  }\n}\n\nconst gN = []\nfunction generateGN (dim) {\n  for (let i = 0; i < dim * 2; i++) {\n    const vec = new Array(dim).fill(0)\n\n    vec[i % dim] = i / dim >= 1 ? 1 : -1\n    gN[i] = new VecN(vec)\n  }\n}\n\nfunction lerpN (ns, ds) {\n  if (ds.length === 1) return lerp(ns[0], ns[1], fade(ds[0]))\n\n  const ns1 = ns.slice(0, Math.floor(ns.length / 2))\n  const ns2 = ns.slice(Math.ceil(ns.length / 2))\n\n  return lerp(\n    lerpN(ns1, ds.slice(0, ds.length - 1)),\n    lerpN(ns2, ds.slice(0, ds.length - 1)),\n    fade(ds[ds.length - 1])\n  )\n}\nfunction getNs (p, dim, gs, ds) {\n  const ns = []\n\n  if (gN.length === 0) {\n    generateGN(dim)\n  }\n\n  for (let i = 0; i < (2 << (dim - 1)); i++) {\n    const gsPerm = gs.slice()\n    const dsPerm = ds.slice()\n    let temp = i\n\n    for (let j = 0; j < dim; j++) {\n      if (temp & 1) {\n        gsPerm[j] += 1\n        dsPerm[j] -= 1\n      }\n      temp = temp >> 1\n    }\n    ns[i] = gN[hashN(p, gsPerm) % gN.length].dot(dsPerm)\n  }\n\n  return ns\n}\n\nmodule.exports = {\n  lerpN,\n  getNs\n}\n","import tumult from 'tumult'\nimport { normalize } from 'missing-math'\n\nexport default class Line {\n  // IMPORTANT: equation() should return a normalized value\n  constructor (equation = x => 0.5) {\n    this._equation = equation\n    this.points = []\n  }\n\n  compute (x, { force = false } = {}) {\n    if (force || this.points[x] === undefined) {\n      this.points[x] = this._equation(x)\n    }\n\n    return this.points[x]\n  }\n\n  static perlin ({\n    seed = null,\n    octaves = 2,\n    lacunarity = 2,\n    gain = 0.5,\n    resolution = 32\n  } = {}) {\n    const noise = new tumult.Perlin1(seed).transform(function (v) {\n      return normalize(this.gen(v / resolution), -1, 1)\n    })\n\n    return x => {\n      let y = 0\n      let amplitude = 0.5\n      let frequency = 1.0\n\n      for (let i = 0; i < octaves; i++) {\n        y += amplitude * noise(frequency * x)\n        frequency *= lacunarity\n        amplitude *= gain\n      }\n\n      return Math.sin(y)\n    }\n  }\n\n  static simplex ({\n    seed = null,\n    octaves = 2\n  } = {}) {\n    const frequency = Math.pow(2, octaves)\n    return new tumult.Simplex1(seed).transform(function (v) {\n      return (Math.sin(1 / this.gen(v / frequency)) + 1) / 2\n    })\n  }\n}\n","import tumult from 'tumult'\nimport { normalize, radians, lerp } from 'missing-math'\n\nexport default class Gradient {\n  // IMPORTANT: f() should return a normalized value\n  constructor (f = (x, y, width, height) => 1) {\n    this.compute = f.bind(this)\n  }\n\n  static get methods () {\n    return Object.getOwnPropertyNames(Gradient)\n      .filter(prop => prop !== 'methods')\n      .filter(prop => typeof Gradient[prop] === 'function')\n  }\n\n  static normalize (x, y, width, height) {\n    return [\n      normalize(x, 0, width),\n      normalize(y, 0, height)\n    ]\n  }\n\n  static simplex ({\n    seed = null,\n    octaves = 2,\n    power = 1\n  } = {}) {\n    const frequency = Math.pow(2, octaves)\n    const simplex = new tumult.Simplex2(seed)\n    return new Gradient((x, y, width, height) => {\n      const [i, j] = Gradient.normalize(x, y, width, height)\n      return normalize(simplex.gen(i / frequency, j / frequency), -1, 1) ** power\n    })\n  }\n\n  static linear (alpha = 0) {\n    return new Gradient((x, y, width, height) => {\n      const [i, j] = Gradient.normalize(x, y, width, height)\n      const theta = radians(alpha)\n\n      const dirx = lerp(1 - i, i, (Math.sin(theta) + 1) / 2)\n      const diry = lerp(1 - j, j, (Math.cos(theta) + 1) / 2)\n      return ((dirx + diry) / 2)\n    })\n  }\n\n  static random (rng = Math.random) {\n    return new Gradient(rng)\n  }\n\n  static fix (value = 1) {\n    return new Gradient(() => value)\n  }\n}\n","function random(seed) {\n\tfunction _seed(s) {\n\t\tif ((seed = (s|0) % 2147483647) <= 0) {\n\t\t\tseed += 2147483646;\n\t\t}\n\t}\n\n\tfunction _nextInt() {\n\t\treturn seed = seed * 48271 % 2147483647;\n\t}\n\n\tfunction _nextFloat() {\n\t\treturn (_nextInt() - 1) / 2147483646;\n\t}\n\n\t_seed(seed);\n\n\treturn {\n\t\tseed: _seed,\n\t\tnextInt: _nextInt,\n\t\tnextFloat: _nextFloat\n\t};\n}\n\nmodule.exports = random;\n","import fastRandom from 'fast-random'\nimport arrayRandom from '../utils/array-random'\n\nlet seed = Date.now()\nlet randomizer = fastRandom(seed)\n\nexport default {\n  // NOTE: seed must be an integer\n  set seed (newSeed) {\n    seed = newSeed\n    randomizer = fastRandom(seed)\n  },\n\n  get seed () {\n    return seed\n  },\n\n  reset: () => {\n    randomizer = fastRandom(seed)\n  },\n\n  random: () => randomizer.nextFloat(),\n  randomOf: arr => arrayRandom(arr, randomizer.nextFloat),\n  randomFloat: (min, max) => randomizer.nextFloat() * (max - min) + min,\n  randomInt: (min, max) => Math.floor(randomizer.nextFloat() * (max - min) + min)\n}\n","export default (arr, rng = Math.random) => arr[Math.floor(rng() * arr.length)]\n","import SYMBOLS from '../symbols'\n\nimport Line from './Line'\nimport Gradient from './Gradient'\n\nimport prng from '../utils/prng'\nimport { roundTo } from 'missing-math'\n\nexport default class Landscape {\n  static from (props, { cells, lines, gradients } = {}) {\n    const instance = new Landscape(props, false)\n    instance.cells = cells\n    instance.lines = lines\n    instance.gradients = gradients\n    return instance\n  }\n\n  constructor (props, generate = true) {\n    this.props = Object.assign({\n      sizes: [8, 16],\n      width: 240,\n      height: 240,\n\n      gradientResolution: 12,\n      groundsLength: 10,\n      percentOfStraightLines: 0.125,\n      percentOfGradients: 0.5,\n      percentOfSimplexGradients: 0.1,\n\n      colors: ['rgb(0, 0, 0)'],\n      background: 'transparent',\n      symbols: [\n        'square',\n        'square_offset',\n        'vertical_line',\n        'vertical_line_offset',\n        'horizontal_line',\n        'horizontal_line_offset',\n        'diagonal',\n        'diamond',\n        'circle'\n      ],\n\n      random: prng.random\n    }, props)\n\n    if (generate) {\n      const { cells, lines, gradients } = this.generate()\n      this.cells = cells\n      this.lines = lines\n      this.gradients = gradients\n    }\n  }\n\n  get width () { return this.props.width }\n  get height () { return this.props.height }\n\n  // This is the actual procgen part of this project\n  generate () {\n    const {\n      sizes,\n      gradientResolution,\n      groundsLength,\n      percentOfStraightLines,\n      percentOfGradients,\n      percentOfSimplexGradients,\n      colors,\n      symbols,\n      random\n    } = this.props\n\n    const cells = []\n    const lines = []\n    const gradients = []\n\n    for (let index = 0; index < groundsLength; index++) {\n      const rnd = random() * 100\n      const size = prng.randomOf(sizes)\n      const color = prng.randomOf(colors)\n      const symbol = prng.randomOf(symbols)\n\n      const gradient = rnd > percentOfGradients * 100\n        ? Gradient.fix(random())\n        : rnd < percentOfSimplexGradients * 100\n          ? Gradient.simplex({ seed: rnd })\n          : Gradient.linear(rnd)\n\n      const offy = this.height * (1 - (index / (groundsLength)))\n      const line = new Line(x => {\n        if (rnd < percentOfStraightLines * 100) {\n          return offy / this.height\n        } else {\n          const n = Line.perlin({\n            seed: rnd,\n            octaves: 3,\n            resolution: 64,\n            lacunarity: 2,\n            gain: 0.5\n          })(x / (2 + (rnd / 100) * 3))\n          return (offy / this.height) / 2 + n\n        }\n      })\n\n      // Create cells\n      for (let i = 0; i < this.width / size; i++) {\n        const jstart = Math.floor((line.compute(i) * this.height) / size)\n        for (let j = jstart; j < this.height / size; j++) {\n          const x = i * size\n          const y = j * size\n\n          // Skip cell creation: intersecting with a previously created cell\n          const busy = cells.find(cell => (\n            cell.x < x + size &&\n            cell.x + cell.size > x &&\n            cell.y < y + size &&\n            cell.y + cell.size > y\n          ))\n          if (busy) continue\n\n          const value = roundTo(gradient.compute(x, y, this.width, this.height), 1 / gradientResolution)\n          cells.push({ x, y, size, value, symbol, color, ground: index })\n        }\n      }\n\n      lines.push(line)\n      gradients.push(gradient)\n    }\n\n    return { cells, lines, gradients }\n  }\n\n  // This function allows custom renderer implementation\n  // SEE render.js for <svg> and <canvas> implementation of this method\n  render (callback) {\n    for (const cell of this.cells) {\n      // Skip invisible cells\n      if (cell.color === this.props.background) continue\n\n      const path = SYMBOLS[cell.symbol](cell)\n      if (path) callback(cell, path)\n    }\n  }\n}\n","export default (arr, size) => Array.from({ length: Math.ceil(arr.length / size) }, (v, i) => arr.slice(i * size, i * size + size))\n","export default (a, prng = Math.random) => {\n  var j, x, i\n  for (i = a.length - 1; i > 0; i--) {\n    j = Math.floor(prng() * (i + 1))\n    x = a[i]\n    a[i] = a[j]\n    a[j] = x\n  }\n  return a\n}\n","import { clamp } from 'missing-math'\n\nimport chunk from './utils/array-chunk'\nimport shuffle from './utils/array-shuffle'\nimport prng from './utils/prng'\n\n/* eslint-disable comma-spacing, indent */\n\n// SEE graphic guidelines\nconst COLORS = [\n  { rgb: [120, 0, 100], cmyk: [50, 100, 20, 20] },\n  { rgb: [160, 15, 150], cmyk: [40, 80, 0, 0] },\n  { rgb: [200, 30, 200], cmyk: [35, 80, 0, 0] },\n  { rgb: [250, 50, 255], cmyk: [20, 70, 0, 0] },\n  { rgb: [255, 90, 190], cmyk: [0, 70, 0, 0] },\n  { rgb: [255, 120, 140], cmyk: [0, 68, 24, 0] },\n  { rgb: [255, 165, 165], cmyk: [0, 50, 23, 0] },\n  { rgb: [255, 215, 235], cmyk: [0, 25, 0, 0] },\n  { rgb: [80, 20, 100], cmyk: [80, 100, 25, 20] },\n  { rgb: [110, 30, 130], cmyk: [65, 100, 0, 0] },\n  { rgb: [140, 35, 160], cmyk: [50, 90, 0, 0] },\n  { rgb: [170, 40, 190], cmyk: [45, 80, 0, 0] },\n  { rgb: [180, 60, 255], cmyk: [55, 75, 0, 0] },\n  { rgb: [190, 100, 255], cmyk: [45, 60, 0, 0] },\n  { rgb: [200, 150, 255], cmyk: [30, 45, 0, 0] },\n  { rgb: [210, 200, 255], cmyk: [20, 25, 0, 0] },\n  { rgb: [45, 0, 150], cmyk: [100, 100, 0, 0] },\n  { rgb: [85, 20, 200], cmyk: [85, 85, 0, 0] },\n  { rgb: [110, 40, 255], cmyk: [80, 75, 0, 0] },\n  { rgb: [130, 80, 255], cmyk: [70, 70, 0, 0] },\n  { rgb: [150, 120, 255], cmyk: [56, 56, 0, 0] },\n  { rgb: [160, 170, 255], cmyk: [40, 30, 0, 0] },\n  { rgb: [180, 205, 255], cmyk: [36, 12, 0, 0] },\n  { rgb: [195, 235, 255], cmyk: [32, 0, 0, 0] },\n  { rgb: [0, 0, 90], cmyk: [100, 95, 35, 40] },\n  { rgb: [0, 0, 160], cmyk: [100, 90, 12, 0] },\n  { rgb: [0, 0, 255], cmyk: [93, 74, 0, 0] },\n  { rgb: [0, 120, 255], cmyk: [87, 50, 0, 0] },\n  { rgb: [60, 185, 255], cmyk: [80, 0, 0, 0] },\n  { rgb: [0, 220, 255], cmyk: [65, 0, 10, 0] },\n  { rgb: [60, 255, 255], cmyk: [80, 0, 12, 0] },\n  { rgb: [220, 255, 255], cmyk: [25, 0, 5, 0] },\n  { rgb: [30, 60, 90], cmyk: [100, 75, 40, 35] },\n  { rgb: [60, 100, 130], cmyk: [88, 50, 30, 15] },\n  { rgb: [80, 130, 160], cmyk: [80, 30, 25, 10] },\n  { rgb: [100, 160, 180], cmyk: [75, 15, 25, 0] },\n  { rgb: [120, 170, 190], cmyk: [65, 15, 20, 0] },\n  { rgb: [150, 180, 200], cmyk: [50, 15, 15, 0] },\n  { rgb: [170, 200, 210], cmyk: [40, 10, 15, 0] },\n  { rgb: [200, 220, 230], cmyk: [30, 5, 10, 0] },\n  { rgb: [0, 60, 40], cmyk: [100, 45, 90, 60] },\n  { rgb: [0, 90, 60], cmyk: [100, 30, 90, 35] },\n  { rgb: [0, 120, 90], cmyk: [100, 20, 75, 10] },\n  { rgb: [0, 150, 120], cmyk: [100, 0, 65, 0] },\n  { rgb: [20, 180, 150], cmyk: [90, 0, 55, 0] },\n  { rgb: [60, 230, 200], cmyk: [80, 0, 40, 0] },\n  { rgb: [120, 245, 210], cmyk: [65, 0, 35, 0] },\n  { rgb: [180, 255, 255], cmyk: [40, 0, 15, 0] },\n  { rgb: [40, 75, 0], cmyk: [90, 45, 100, 50] },\n  { rgb: [30, 95, 20], cmyk: [100, 30, 100, 30] },\n  { rgb: [20, 115, 40], cmyk: [100, 20, 100, 15] },\n  { rgb: [10, 170, 50], cmyk: [100, 0, 100, 0] },\n  { rgb: [0, 210, 70], cmyk: [80, 0, 90, 0] },\n  { rgb: [0, 255, 50], cmyk: [70, 0, 80, 0] },\n  { rgb: [90, 255, 130], cmyk: [70, 0, 70, 0] },\n  { rgb: [180, 255, 160], cmyk: [50, 0, 50, 0] },\n  { rgb: [140, 115, 0], cmyk: [30, 45, 100, 25] },\n  { rgb: [180, 140, 0], cmyk: [20, 40, 100, 10] },\n  { rgb: [220, 180, 0], cmyk: [10, 30, 100, 0] },\n  { rgb: [255, 220, 0], cmyk: [0, 10, 90, 0] },\n  { rgb: [255, 255, 40], cmyk: [0, 0, 100, 0] },\n  { rgb: [255, 250, 100], cmyk: [5, 0, 70, 0] },\n  { rgb: [255, 245, 160], cmyk: [0, 0, 50, 0] },\n  { rgb: [255, 255, 200], cmyk: [0, 0, 20, 0] },\n  { rgb: [100, 45, 80], cmyk: [50, 90, 35, 35] },\n  { rgb: [140, 60, 60], cmyk: [25, 85, 70, 20] },\n  { rgb: [180, 75, 40], cmyk: [15, 80, 95, 0] },\n  { rgb: [200, 90, 20], cmyk: [0, 75, 100, 0] },\n  { rgb: [225, 115, 10], cmyk: [0, 65, 95, 0] },\n  { rgb: [255, 140, 0], cmyk: [0, 55, 90, 0] },\n  { rgb: [255, 170, 75], cmyk: [0, 40, 70, 0] },\n  { rgb: [255, 200, 150], cmyk: [0, 20, 40, 0] },\n  { rgb: [90, 0, 40], cmyk: [35, 100, 60, 55] },\n  { rgb: [150, 0, 60], cmyk: [20, 100, 60, 15] },\n  { rgb: [195, 0, 50], cmyk: [0, 100, 75, 0] },\n  { rgb: [220, 0, 40], cmyk: [0, 90, 75, 0] },\n  { rgb: [255, 0, 20], cmyk: [0, 90, 70, 0] },\n  { rgb: [255, 60, 60], cmyk: [0, 85, 65, 0] },\n  { rgb: [255, 120, 120], cmyk: [0, 65, 40, 0] },\n  { rgb: [250, 190, 190], cmyk: [0, 35, 15, 0] },\n  { rgb: [40, 20, 0], cmyk: [60, 80, 70, 85] },\n  { rgb: [70, 40, 20], cmyk: [40, 78, 90, 65] },\n  { rgb: [100, 60, 45], cmyk: [35, 75, 75, 50] },\n  { rgb: [135, 115, 100], cmyk: [35, 45, 50, 30] },\n  { rgb: [175, 145, 130], cmyk: [25, 40, 40, 10] },\n  { rgb: [210, 180, 160], cmyk: [10, 30, 35, 0] },\n  { rgb: [220, 200, 180], cmyk: [10, 20, 30, 0] },\n  { rgb: [235, 220, 200], cmyk: [5, 15, 20, 0] }\n].map(color => {\n  color.css = `rgb(${color.rgb})`\n\n  // Graphic designers define CMYK values on 0~100 range, but W3C defines them as 0~1 range\n  color.cmyk = color.cmyk.map(v => v / 100)\n\n  // TODO: for better accuracy, use hard-coded values to visually match on\n  // screen what a printed CMYK will look like (also known as \"proofing\")\n  color['css-cmyk-proof'] = `rgb(${proof(color.cmyk)})`\n  return color\n})\n\n// SEE https://graphicdesign.stackexchange.com/a/137902\nfunction proof ([c, m, y, k]) {\n  const C = 255 * (1 - c)\n  const M = 255 * (1 - m)\n  const Y = 255 * (1 - y)\n  const K = 255 * (1 - k)\n  const r = 80 + 0.5882 * C - 0.3529 * M - 0.1373 * Y + 0.00185 * C * M + 0.00046 * Y * C\n  const g = 66 - 0.1961 * C + 0.2745 * M - 0.0627 * Y + 0.00215 * C * M + 0.00008 * Y * C + 0.00062 * Y * M\n  const b = 86 - 0.3255 * C - 0.1569 * M + 0.1647 * Y + 0.00046 * C * M + 0.00123 * Y * C + 0.00215 * Y * M\n\n  return [r * K / 255, g * K / 255, b * K / 255].map(v => clamp(v, 0, 255))\n}\n\nfunction clone (color) {\n  return Object.assign({}, color, { rgb: [...color.rgb], cmyk: [...color.cmyk] })\n}\n\nexport function toArray () {\n  return [...COLORS]\n}\n\nexport function log (colors, lineLength = 1) {\n  if (!arguments.length) {\n    colors = COLORS\n    lineLength = 8\n  }\n\n  const lines = chunk(colors, lineLength)\n  for (const line of lines) {\n    const styles = []\n    for (const color of line) {\n      const css = color.css\n        ? color.css\n        : color.rgb\n          ? `rgb(${color.rgb[0]}, ${color.rgb[1]}, ${color.rgb[2]})`\n          : color\n      styles.push(`background-color:${css}; padding: 20px`)\n    }\n    console.log(new Array(styles.length).fill('%c ').join(''), ...styles)\n  }\n}\n\nexport function swatch ({\n  colorSpace = null,\n  random = prng.random\n} = {}) {\n  /**\n   * Procgen of the swatch:\n   * - group colors by hue (every 8 colors)\n   * - push two successive dark colors\n   * - push two successive medium colors\n   * - push two successive light colors\n   *\n   * Do not take colors with hue overlapping indexes (ie [0, 1] of hue#1, [1, 2] of hue#2)\n   */\n\n  let colors = []\n\n  // Group COLORS by hue (every 8 colors), and take three random hues\n  const hues = shuffle(chunk(COLORS, 8), random).splice(0, 3)\n\n  // Push the two dark colors\n  let index = Math.round(random()) // 0 or 1\n  colors.push(hues[0][index++])\n  colors.push(hues[0][index++])\n\n  // Push the two medium colors\n  if (index < 3) index = Math.round(random())\n  colors.push(hues[1][index++])\n  colors.push(hues[1][index++])\n\n  // Push the two bright colors\n  index += Math.round(random())\n  colors.push(hues[2][index++])\n  colors.push(hues[2][index++])\n\n  return colorSpace\n    ? colors.map(color => clone(color)[colorSpace])\n    : colors.map(clone)\n}\n\nexport default {\n  toArray,\n  swatch,\n  log\n}\n","'use strict'\n\n/**\n * Core of the raf package\n * @module raf\n * @type {Object}\n * @example\n * import { raf } from '@internet/raf'\n *\n * function tick (dt) {\n *  console.log('called on new frame')\n * }\n *\n * raf.add(tick)\n */\n\nvar root = typeof window === 'undefined' ? global : window\nvar _observers = []\nvar _afterObservers = []\nvar _beforeObservers = []\nvar _rafHandler = null\nvar _lastDate = null\nvar _once = false\nvar _complex = false\n\n/**\n * Time elapsed between the previous and the current frame\n * @type {number}\n * @static\n * @category properties\n */\nvar time\n\n/**\n * Current delta time\n * @type {number}\n * @static\n * @category properties\n */\nvar dt\n\nfunction _frame (timestamp) {\n  // compute deltatime and time\n  if (timestamp === void 0) timestamp = 0\n  if (_lastDate === null) _lastDate = timestamp\n  dt = timestamp - _lastDate\n  time += dt\n  _lastDate = timestamp\n  // we request the frame now, allowing to cancel it from observers\n  _rafHandler = _once ? null : root.requestAnimationFrame(_frame)\n  if (_once) _once = false\n  // call all observers\n  var i\n  if (_complex) {\n    for (i = 0; i < _beforeObservers.length; i++) _beforeObservers[i](dt)\n    for (i = 0; i < _observers.length; i++) _observers[i](dt)\n    for (i = 0; i < _afterObservers.length; i++) _afterObservers[i](dt)\n  } else {\n    for (i = 0; i < _observers.length; i++) _observers[i](dt)\n  }\n}\n\nfunction _swapRunner () {\n  _complex = !!(_afterObservers.length > 0 || _beforeObservers.length > 0)\n}\n\nfunction _addObserver (arr, fn, prepend) {\n  if (!fn || !arr) return false\n  if (~arr.indexOf(fn)) return false\n  prepend = !!prepend\n  prepend ? arr.unshift(fn) : arr.push(fn)\n  return true\n}\n\nfunction _removeObserver (arr, fn) {\n  if (!fn) return false\n  var index = arr.indexOf(fn)\n  if (!~index) return false\n  arr.splice(index, 1)\n  return !!(arr.length === 0)\n}\n\n/**\n * Add a function for execution at the beginning of the raf call\n * Calling addBefore will not start the raf.\n * @param {function} fn Function to be called at the start of the raf\n * @param {function} [prepend=false] Prepend the function to the beginning of the functions list\n * @static\n * @category methods\n */\nfunction addBefore (fn, prepend) {\n  _addObserver(_beforeObservers, fn, prepend) && _swapRunner()\n}\n\n/**\n * Add a function for execution at the end of the raf call\n * Calling addAfter will not start the raf.\n * @param {function} fn Function to be called at the end of the raf\n * @param {function} [prepend=false] Prepend the function to the beginning of the functions list\n * @static\n * @category methods\n */\nfunction addAfter (fn, prepend) {\n  _addObserver(_afterObservers, fn, prepend) && _swapRunner()\n}\n\n/**\n * Add a function for execution on each frame\n * @param {function} fn Function to be called\n * @param {function} [prepend=false] Prepend the function to the beginning of the functions list\n * @static\n * @category methods\n */\nfunction add (fn, prepend) {\n  _addObserver(_observers, fn, prepend) && start()\n}\n\n/**\n * Remove a function for execution at the beginning of the raf call\n * Calling removeBefore will not stop the raf.\n * @param {function} fn Function to remove from the raf\n * @static\n * @category methods\n */\nfunction removeBefore (fn) {\n  _removeObserver(_beforeObservers, fn) && _swapRunner()\n}\n\n/**\n * Remove a function for execution at the end of the raf call\n * Calling removeAfter will not stop the raf.\n * @param {function} fn Function to remove from the raf\n * @param {function} [prepend=false] Prepend the function to the beginning of the functions list\n * @static\n * @category methods\n */\nfunction removeAfter (fn, prepend) {\n  _removeObserver(_afterObservers, fn) && _swapRunner()\n}\n\n/**\n * Remove a function for execution on each frame\n * @param {function} fn Function to remove from the raf\n * @static\n * @category methods\n */\nfunction remove (fn) {\n  _removeObserver(_observers, fn) && stop()\n}\n\n/**\n * Force start the raf. You usually don't need to use it.\n * @param {boolean} [instant=false] Directly make a raf call without waiting for the next frame (default false)\n * @static\n * @category methods\n */\nfunction start (instant) {\n  _once = false\n  if (_rafHandler) return\n  instant = !!instant\n  _lastDate = null\n  if (instant) _frame()\n  else _rafHandler = root.requestAnimationFrame(_frame)\n}\n\n/**\n * Request once the raf. Will not be executed if the raf is already running.\n * @static\n * @category methods\n */\nfunction requestOnce () {\n  if (_rafHandler) return\n  _once = true\n  _lastDate = null\n  _rafHandler = root.requestAnimationFrame(_frame)\n}\n\n/**\n * Force stop the raf. You usually don't need to use it.\n * @static\n * @category methods\n */\nfunction stop () {\n  if (!_rafHandler) return\n  root.cancelAnimationFrame(_rafHandler)\n  _rafHandler = null\n}\n\n/**\n * Remove all observers from the raf singleton and stop the raf if it's running. Reset time.\n * @static\n * @category methods\n */\nfunction dispose () {\n  stop()\n  _observers.length = 0\n  _afterObservers.length = 0\n  _beforeObservers.length = 0\n  _complex = false\n  _lastDate = null\n  time = 0\n  dt = 0\n}\n\nexport default {\n  add: add,\n  addAfter: addAfter,\n  addBefore: addBefore,\n  remove: remove,\n  removeAfter: removeAfter,\n  removeBefore: removeBefore,\n  start: start,\n  stop: stop,\n  time: time,\n  dt: dt,\n  requestOnce: requestOnce,\n  dispose: dispose\n}\n","function pathData (arr, decimals = 3) {\n  let d = ''\n  for (let i = 0; i < arr.length + 1; i++) {\n    d += i ? ' L ' : 'M '\n    d += arr[i % arr.length][0].toFixed(decimals) + ' ' + arr[i % arr.length][1].toFixed(decimals)\n  }\n\n  return d\n}\n\nfunction createSVGElement (tagName, attributes, parent) {\n  const ns = 'http://www.w3.org/2000/svg'\n  const el = document.createElementNS(ns, tagName)\n  for (const attrName in attributes) {\n    el.setAttribute(attrName, attributes[attrName])\n  }\n\n  if (parent) parent.appendChild(el)\n  return el\n}\n\nexport default (landscape, { colorSpace = 'css', decimals = 3 } = {}) => {\n  const svgElement = createSVGElement('svg', {\n    'width': landscape.width,\n    'height': landscape.height,\n    'viewBox': `0 0 ${landscape.width} ${landscape.height}`\n  })\n\n  // Use a rectangle as background\n  createSVGElement('rect', {\n    x: 0,\n    y: 0,\n    width: landscape.width,\n    height: landscape.height,\n    fill: landscape.props.background[colorSpace]\n  }, svgElement)\n\n  // TODO: <defs> & <use\n  landscape.render((cell, path) => createSVGElement('path', {\n    d: pathData(path, decimals),\n    fill: cell.color[colorSpace]\n  }, svgElement))\n\n  return svgElement\n}\n","import { Landscape, Colors, prng } from '..'\nimport { erode } from '../post-processing'\nimport render from '../render'\n\nprng.seed = window.location.hash.substring(1) || Date.now()\nconsole.log('seed', +prng.seed)\ndocument.title += ' | ' + prng.seed\n\n// Colors.log(Colors.toArray(), 8)\nconst c = Colors.toArray().map(c => c['css-cmyk-proof'])\nColors.log(c, 8)\n\n// Landscape generation, agnostic of any rendering context\nconst landscape = perf('generate', () => {\n  const colors = new Colors.swatch()\n  Colors.log(colors, colors.length)\n  return new Landscape({\n    sizes: [8, 16],\n    width: window.innerWidth - 20,\n    height: window.innerHeight - 20,\n\n    groundsLength: 30,\n    percentOfStraightLines: 0.125,\n    percentOfGradients: 0.5,\n    percentOfSimplexGradients: 0.1,\n\n    colors,\n    background: prng.randomOf(colors),\n\n    random: prng.random\n  })\n})\n\n// Canvas rendering, and post-processing/erode implementation\nconst canvas = document.querySelector('canvas')\nperf('render.canvas', () => render.canvas(landscape, canvas, { colorSpace: 'css' }))\nconst eroder = erode(landscape, canvas)\ncanvas.addEventListener('click', () => {\n  eroder.rebuild()\n  eroder.play()\n})\n\n// SVG rendering\nconst svg = perf('render.svg', () => render.svg(landscape, { colorSpace: 'css-cmyk-proof' }))\ndocument.querySelector('main').appendChild(svg)\n\n// Helper\nfunction perf (name, callback) {\n  const start = performance.now()\n  const rtrn = callback()\n  console.warn(`[${name}] ${(performance.now() - start).toFixed(0)}ms`)\n  return rtrn\n}\n","export default (landscape, canvas, { colorSpace = 'css' } = {}) => {\n  canvas.width = landscape.width\n  canvas.height = landscape.height\n  canvas.style.width = canvas.width + 'px'\n  canvas.style.height = canvas.height + 'px'\n\n  const ctx = canvas.getContext('2d')\n\n  ctx.fillStyle = landscape.props.background[colorSpace]\n  ctx.fillRect(0, 0, canvas.width, canvas.height)\n\n  landscape.render((cell, path) => {\n    ctx.fillStyle = cell.color[colorSpace]\n\n    ctx.beginPath()\n    path.forEach((point, index) => {\n      if (index === 0) ctx.moveTo(point[0], point[1])\n      else ctx.lineTo(point[0], point[1])\n    })\n    ctx.fill()\n  })\n}\n","import raf from '@internet/raf'\nimport { map, roundTo } from 'missing-math'\nimport shuffle from '../lib/utils/array-shuffle'\nimport median from '../lib/utils/array-median'\nimport prng from '../lib/utils/prng'\n\nfunction cloneCanvas (canvas, clone = document.createElement('canvas')) {\n  clone.width = canvas.width\n  clone.height = canvas.height\n  const ctx = clone.getContext('2d')\n\n  ctx.drawImage(canvas, 0, 0)\n  return clone\n}\n\nexport default (landscape, canvas, {\n  autoplay = true,\n\n  easing = 0.09,\n  noUpdateThreshold = 1,\n\n  columnWidth = 16,\n  snapToGrid = 8,\n  round = true,\n  breaks = 2,\n  minimizeVisualBreaks = false,\n  amplitude = [0, 200],\n  scaleFactor = 1\n} = {}) => {\n  const length = Math.ceil(landscape.width / columnWidth)\n  const buffer = cloneCanvas(canvas)\n  const ctx = canvas.getContext('2d')\n\n  let points = []\n  let shouldUpdate = autoplay\n\n  build()\n  raf.add(update)\n\n  return {\n    rebuild: build,\n    toggle: () => { shouldUpdate = !shouldUpdate },\n    play: () => { shouldUpdate = true },\n    pause: () => { shouldUpdate = false },\n    destroy: () => raf.remove(update)\n  }\n\n  function build () {\n    // Compute breakpoints at which a line will be swaped with the next\n    const breakpoints = []\n    for (let i = 0; i < breaks; i++) breakpoints.push(prng.randomInt(0, length))\n    breakpoints.push(length)\n\n    // Create a model of the future lines breaks\n    let linesIndexes = []\n    breakpoints.sort((a, b) => a - b).forEach((breakpoint, index) => {\n      linesIndexes = linesIndexes.concat(new Array(breakpoint - linesIndexes.length).fill(index))\n    })\n\n    // Reassign points array with new values computed from corresponding lines\n    const lines = shuffle(landscape.lines).slice(0, breaks + 1)\n    points = linesIndexes.map((lineIndex, index) => {\n      const value = lines[lineIndex].compute(index * columnWidth * scaleFactor)\n      return {\n        t: 1 - value,\n        v: points[index] ? points[index].v : 0,\n        lineIndex\n      }\n    })\n\n    // When options.minimizeVisualBreaks is set to true, make sure that each\n    // section starts where the previous one ends, to avoid creating vertical\n    // breaks\n    if (minimizeVisualBreaks) {\n      let offset = 0\n      points.forEach((point, index) => {\n        const previous = points[index - 1]\n        if (!previous) return\n\n        if (previous.lineIndex !== point.lineIndex) {\n          offset = previous.t - point.t\n        }\n\n        point.t += offset\n      })\n    }\n\n    // Minimize global up/down shift by cancelling the median movement\n    // Scale up vertically according to the amplitude argument\n    // If snapToGrid, round the target to the nearest on-grid value\n    const values = points.map(({t}) => t).sort((a, b) => a - b)\n    const m = median(values, { alreadyCloned: true, alreadySorted: true })\n    const min = values[0]\n    const max = values[values.length - 1]\n    points.forEach(p => {\n      p.t = map(p.t - m, min - m, max - m, amplitude[0], amplitude[1])\n      if (snapToGrid && snapToGrid > 0) p.t = roundTo(p.t, snapToGrid)\n    })\n  }\n\n  function update (dt) {\n    if (!shouldUpdate) return\n    shouldUpdate = false\n\n    ctx.fillStyle = landscape.props.background\n    ctx.fillRect(0, 0, canvas.width, canvas.height)\n\n    points.forEach((p, index) => {\n      p.v += (p.t - p.v) * easing\n\n      // Continue updating if there are still relevant movements\n      if (Math.abs(p.t - p.v) > noUpdateThreshold) {\n        shouldUpdate = true\n      }\n\n      const x = index * columnWidth\n      const y = round ? Math.floor(p.v) : p.v\n      ctx.drawImage(buffer, x, 0, columnWidth, (buffer.height - 2), x, y, columnWidth, (buffer.height - 2))\n    })\n  }\n}\n","export default (arr = [], {\n  alreadySorted = false,\n  alreadyCloned = false\n} = {}) => {\n  const values = alreadyCloned ? arr : arr.slice(0)\n  const numbers = alreadySorted ? values : values.sort((a, b) => a - b)\n\n  const middle = Math.floor(numbers.length / 2)\n  const isEven = numbers.length % 2 === 0\n  return isEven ? (numbers[middle] + numbers[middle - 1]) / 2 : numbers[middle]\n}\n"],"names":["lineclip","points","bbox","result","i","a","b","codeB","lastCode","len","length","codeA","bitCode","part","push","intersect","edge","p","code","n","t","r","Math","max","min","o","u","e","PI","f","ceil","polyline","polygon","prev","prevInside","inside","empty","square","cell","thickness","size","value","ht","hs","x","y","square_offset","vertical_line","vertical_line_offset","horizontal_line","horizontal_line_offset","diagonal","diamond","circle","diameter","path","alpha","theta","radians","sin","cos","serializer","replacer","cycleReplacer","stack","keys","key","slice","indexOf","join","thisPos","this","splice","Infinity","call","module","obj","spaces","JSON","stringify","Mash","data","toString","h","charCodeAt","uheprng","seed","j","c","s","Array","k","mash","random","rawprng","range","floor","string","count","String","fromCharCode","hash","args","prototype","arguments","cleanString","inStr","replace","hashString","initState","addEntropy","Date","getTime","done","Number","MAX_VALUE","floatBetween","intBetween","create","[object Object]","Uint8Array","rng","rand","temp","fn","dims","apply","bind","octaves","val","w","gen","map","Vec1","g1","grad1","falloff","reduce","sum","lerp","fade","cut1","cut","require$$0","require$$1","Vec2","g2","grad2","S2_TO_C","sqrt","C_TO_S2","Vec3","z","Vec4","Noise","gx","dx","dot","skew","trunc","unskew","dx0","dy0","di","dj","dx1","dy1","dx2","dy2","n0","n1","Line","equation","_equation","compute","force","undefined","perlin","lacunarity","gain","resolution","noise","tumult","transform","v","normalize","amplitude","frequency","simplex","pow","Gradient","width","height","power","linear","fix","Object","getOwnPropertyNames","filter","prop","_seed","_nextInt","nextInt","nextFloat","now","randomizer","fastRandom","newSeed","reset","randomOf","arr","arrayRandom","randomFloat","randomInt","Landscape","props","generate","assign","sizes","gradientResolution","groundsLength","percentOfStraightLines","percentOfGradients","percentOfSimplexGradients","colors","background","symbols","prng","lines","gradients","cells","from","instance","index","rnd","color","symbol","gradient","offy","_this","line","find","roundTo","ground","render","callback","SYMBOLS","COLORS","rgb","cmyk","C","M","Y","K","css","clamp","clone","dt","colorSpace","hues","shuffle","chunk","round","lineLength","styles","console","log","fill","root","window","global","_observers","_rafHandler","_lastDate","_once","_frame","timestamp","requestAnimationFrame","pathData","decimals","d","toFixed","createSVGElement","tagName","attributes","parent","el","document","createElementNS","attrName","setAttribute","appendChild","location","substring","title","Colors","landscape","perf","innerWidth","innerHeight","canvas","querySelector","style","ctx","getContext","fillStyle","fillRect","beginPath","forEach","point","moveTo","lineTo","eroder","instant","autoplay","easing","noUpdateThreshold","columnWidth","snapToGrid","breaks","minimizeVisualBreaks","scaleFactor","buffer","createElement","drawImage","cloneCanvas","shouldUpdate","build","prepend","unshift","_addObserver","update","rebuild","toggle","play","pause","destroy","_removeObserver","cancelAnimationFrame","raf","breakpoints","linesIndexes","sort","breakpoint","concat","lineIndex","offset","previous","values","m","alreadySorted","alreadyCloned","numbers","middle","median","abs","erode","addEventListener","svg","svgElement","viewBox","name","start","performance","rtrn","warn"],"mappings":"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"}