{"version":3,"file":"ffp-generate.umd.js","sources":["../node_modules/json-stringify-safe/stringify.js","../node_modules/random-seed/index.js","../node_modules/tumult/lib/util/noise.js","../node_modules/tumult/lib/util/1d.js","../node_modules/tumult/lib/util/math.js","../node_modules/tumult/lib/simplex/simplex1.js","../node_modules/tumult/lib/util/2d.js","../node_modules/tumult/lib/simplex/simplex2.js","../node_modules/tumult/lib/perlin/perlin1.js","../node_modules/tumult/lib/perlin/perlin2.js","../node_modules/tumult/lib/util/3d.js","../node_modules/tumult/lib/perlin/perlin3.js","../node_modules/tumult/lib/util/4d.js","../node_modules/tumult/lib/perlin/perlin4.js","../node_modules/tumult/lib/util/nd.js","../node_modules/tumult/lib/perlin/perlinN.js","../node_modules/tumult/lib/index.js","../node_modules/perlin/index.js","../node_modules/missing-math/lib/index.js","../src/abstractions/Gradient.js","../src/utils/draw-background.js","../src/controllers/make-pattern.js","../node_modules/lineclip/index.js","../src/utils/draw-path.js","../src/utils/round-to.js","../src/controllers/symbols.js","../src/abstractions/Ground.js","../src/utils/create-canvas-from-context.js","../node_modules/canvas2svg/canvas2svg.js","../node_modules/file-saver/dist/FileSaver.min.js","../src/abstractions/SVGCanvas.js","../src/abstractions/Landscape.js","../src/abstractions/Line.js","../src/utils/array-random.js","../node_modules/fast-random/index.js","../node_modules/@internet/raf/lib/raf.js","../src/utils/prng.js","../node_modules/animejs/lib/anime.es.js","../src/index.js","../src/controllers/erode.js","../src/controllers/hue-rotate.js","../src/controllers/swatches.js"],"sourcesContent":["exports = module.exports = stringify\nexports.getSerialize = serializer\n\nfunction stringify(obj, replacer, spaces, cycleReplacer) {\n  return JSON.stringify(obj, serializer(replacer, cycleReplacer), spaces)\n}\n\nfunction serializer(replacer, cycleReplacer) {\n  var stack = [], keys = []\n\n  if (cycleReplacer == null) cycleReplacer = function(key, value) {\n    if (stack[0] === value) return \"[Circular ~]\"\n    return \"[Circular ~.\" + keys.slice(0, stack.indexOf(value)).join(\".\") + \"]\"\n  }\n\n  return function(key, value) {\n    if (stack.length > 0) {\n      var thisPos = stack.indexOf(this)\n      ~thisPos ? stack.splice(thisPos + 1) : stack.push(this)\n      ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key)\n      if (~stack.indexOf(value)) value = cycleReplacer.call(this, key, value)\n    }\n    else stack.push(value)\n\n    return replacer == null ? value : replacer.call(this, key, value)\n  }\n}\n","/*\n * random-seed\n * https://github.com/skratchdot/random-seed\n *\n * This code was originally written by Steve Gibson and can be found here:\n *\n * https://www.grc.com/otg/uheprng.htm\n *\n * It was slightly modified for use in node, to pass jshint, and a few additional\n * helper functions were added.\n *\n * Copyright (c) 2013 skratchdot\n * Dual Licensed under the MIT license and the original GRC copyright/license\n * included below.\n */\n/*\t============================================================================\n\t\t\t\t\t\t\t\t\tGibson Research Corporation\n\t\t\t\tUHEPRNG - Ultra High Entropy Pseudo-Random Number Generator\n\t============================================================================\n\tLICENSE AND COPYRIGHT:  THIS CODE IS HEREBY RELEASED INTO THE PUBLIC DOMAIN\n\tGibson Research Corporation releases and disclaims ALL RIGHTS AND TITLE IN\n\tTHIS CODE OR ANY DERIVATIVES. Anyone may be freely use it for any purpose.\n\t============================================================================\n\tThis is GRC's cryptographically strong PRNG (pseudo-random number generator)\n\tfor JavaScript. It is driven by 1536 bits of entropy, stored in an array of\n\t48, 32-bit JavaScript variables.  Since many applications of this generator,\n\tincluding ours with the \"Off The Grid\" Latin Square generator, may require\n\tthe deteriministic re-generation of a sequence of PRNs, this PRNG's initial\n\tentropic state can be read and written as a static whole, and incrementally\n\tevolved by pouring new source entropy into the generator's internal state.\n\t----------------------------------------------------------------------------\n\tENDLESS THANKS are due Johannes Baagoe for his careful development of highly\n\trobust JavaScript implementations of JS PRNGs.  This work was based upon his\n\tJavaScript \"Alea\" PRNG which is based upon the extremely robust Multiply-\n\tWith-Carry (MWC) PRNG invented by George Marsaglia. MWC Algorithm References:\n\thttp://www.GRC.com/otg/Marsaglia_PRNGs.pdf\n\thttp://www.GRC.com/otg/Marsaglia_MWC_Generators.pdf\n\t----------------------------------------------------------------------------\n\tThe quality of this algorithm's pseudo-random numbers have been verified by\n\tmultiple independent researchers. It handily passes the fermilab.ch tests as\n\twell as the \"diehard\" and \"dieharder\" test suites.  For individuals wishing\n\tto further verify the quality of this algorithm's pseudo-random numbers, a\n\t256-megabyte file of this algorithm's output may be downloaded from GRC.com,\n\tand a Microsoft Windows scripting host (WSH) version of this algorithm may be\n\tdownloaded and run from the Windows command prompt to generate unique files\n\tof any size:\n\tThe Fermilab \"ENT\" tests: http://fourmilab.ch/random/\n\tThe 256-megabyte sample PRN file at GRC: https://www.GRC.com/otg/uheprng.bin\n\tThe Windows scripting host version: https://www.GRC.com/otg/wsh-uheprng.js\n\t----------------------------------------------------------------------------\n\tQualifying MWC multipliers are: 187884, 686118, 898134, 1104375, 1250205,\n\t1460910 and 1768863. (We use the largest one that's < 2^21)\n\t============================================================================ */\n'use strict';\nvar stringify = require('json-stringify-safe');\n\n/*\t============================================================================\nThis is based upon Johannes Baagoe's carefully designed and efficient hash\nfunction for use with JavaScript.  It has a proven \"avalanche\" effect such\nthat every bit of the input affects every bit of the output 50% of the time,\nwhich is good.\tSee: http://baagoe.com/en/RandomMusings/hash/avalanche.xhtml\n============================================================================\n*/\nvar Mash = function () {\n\tvar n = 0xefc8249d;\n\tvar mash = function (data) {\n\t\tif (data) {\n\t\t\tdata = data.toString();\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\tn += data.charCodeAt(i);\n\t\t\t\tvar h = 0.02519603282416938 * n;\n\t\t\t\tn = h >>> 0;\n\t\t\t\th -= n;\n\t\t\t\th *= n;\n\t\t\t\tn = h >>> 0;\n\t\t\t\th -= n;\n\t\t\t\tn += h * 0x100000000; // 2^32\n\t\t\t}\n\t\t\treturn (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n\t\t} else {\n\t\t\tn = 0xefc8249d;\n\t\t}\n\t};\n\treturn mash;\n};\n\nvar uheprng = function (seed) {\n\treturn (function () {\n\t\tvar o = 48; // set the 'order' number of ENTROPY-holding 32-bit values\n\t\tvar c = 1; // init the 'carry' used by the multiply-with-carry (MWC) algorithm\n\t\tvar p = o; // init the 'phase' (max-1) of the intermediate variable pointer\n\t\tvar s = new Array(o); // declare our intermediate variables array\n\t\tvar i; // general purpose local\n\t\tvar j; // general purpose local\n\t\tvar k = 0; // general purpose local\n\n\t\t// when our \"uheprng\" is initially invoked our PRNG state is initialized from the\n\t\t// browser's own local PRNG. This is okay since although its generator might not\n\t\t// be wonderful, it's useful for establishing large startup entropy for our usage.\n\t\tvar mash = new Mash(); // get a pointer to our high-performance \"Mash\" hash\n\n\t\t// fill the array with initial mash hash values\n\t\tfor (i = 0; i < o; i++) {\n\t\t\ts[i] = mash(Math.random());\n\t\t}\n\n\t\t// this PRIVATE (internal access only) function is the heart of the multiply-with-carry\n\t\t// (MWC) PRNG algorithm. When called it returns a pseudo-random number in the form of a\n\t\t// 32-bit JavaScript fraction (0.0 to <1.0) it is a PRIVATE function used by the default\n\t\t// [0-1] return function, and by the random 'string(n)' function which returns 'n'\n\t\t// characters from 33 to 126.\n\t\tvar rawprng = function () {\n\t\t\tif (++p >= o) {\n\t\t\t\tp = 0;\n\t\t\t}\n\t\t\tvar t = 1768863 * s[p] + c * 2.3283064365386963e-10; // 2^-32\n\t\t\treturn s[p] = t - (c = t | 0);\n\t\t};\n\n\t\t// this EXPORTED function is the default function returned by this library.\n\t\t// The values returned are integers in the range from 0 to range-1. We first\n\t\t// obtain two 32-bit fractions (from rawprng) to synthesize a single high\n\t\t// resolution 53-bit prng (0 to <1), then we multiply this by the caller's\n\t\t// \"range\" param and take the \"floor\" to return a equally probable integer.\n\t\tvar random = function (range) {\n\t\t\treturn Math.floor(range * (rawprng() + (rawprng() * 0x200000 | 0) * 1.1102230246251565e-16)); // 2^-53\n\t\t};\n\n\t\t// this EXPORTED function 'string(n)' returns a pseudo-random string of\n\t\t// 'n' printable characters ranging from chr(33) to chr(126) inclusive.\n\t\trandom.string = function (count) {\n\t\t\tvar i;\n\t\t\tvar s = '';\n\t\t\tfor (i = 0; i < count; i++) {\n\t\t\t\ts += String.fromCharCode(33 + random(94));\n\t\t\t}\n\t\t\treturn s;\n\t\t};\n\n\t\t// this PRIVATE \"hash\" function is used to evolve the generator's internal\n\t\t// entropy state. It is also called by the EXPORTED addEntropy() function\n\t\t// which is used to pour entropy into the PRNG.\n\t\tvar hash = function () {\n\t\t\tvar args = Array.prototype.slice.call(arguments);\n\t\t\tfor (i = 0; i < args.length; i++) {\n\t\t\t\tfor (j = 0; j < o; j++) {\n\t\t\t\t\ts[j] -= mash(args[i]);\n\t\t\t\t\tif (s[j] < 0) {\n\t\t\t\t\t\ts[j] += 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// this EXPORTED \"clean string\" function removes leading and trailing spaces and non-printing\n\t\t// control characters, including any embedded carriage-return (CR) and line-feed (LF) characters,\n\t\t// from any string it is handed. this is also used by the 'hashstring' function (below) to help\n\t\t// users always obtain the same EFFECTIVE uheprng seeding key.\n\t\trandom.cleanString = function (inStr) {\n\t\t\tinStr = inStr.replace(/(^\\s*)|(\\s*$)/gi, ''); // remove any/all leading spaces\n\t\t\tinStr = inStr.replace(/[\\x00-\\x1F]/gi, ''); // remove any/all control characters\n\t\t\tinStr = inStr.replace(/\\n /, '\\n'); // remove any/all trailing spaces\n\t\t\treturn inStr; // return the cleaned up result\n\t\t};\n\n\t\t// this EXPORTED \"hash string\" function hashes the provided character string after first removing\n\t\t// any leading or trailing spaces and ignoring any embedded carriage returns (CR) or Line Feeds (LF)\n\t\trandom.hashString = function (inStr) {\n\t\t\tinStr = random.cleanString(inStr);\n\t\t\tmash(inStr); // use the string to evolve the 'mash' state\n\t\t\tfor (i = 0; i < inStr.length; i++) { // scan through the characters in our string\n\t\t\t\tk = inStr.charCodeAt(i); // get the character code at the location\n\t\t\t\tfor (j = 0; j < o; j++) { //\t\"mash\" it into the UHEPRNG state\n\t\t\t\t\ts[j] -= mash(k);\n\t\t\t\t\tif (s[j] < 0) {\n\t\t\t\t\t\ts[j] += 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// this EXPORTED function allows you to seed the random generator.\n\t\trandom.seed = function (seed) {\n\t\t\tif (typeof seed === 'undefined' || seed === null) {\n\t\t\t\tseed = Math.random();\n\t\t\t}\n\t\t\tif (typeof seed !== 'string') {\n\t\t\t\tseed = stringify(seed, function (key, value) {\n\t\t\t\t\tif (typeof value === 'function') {\n\t\t\t\t\t\treturn (value).toString();\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t});\n\t\t\t}\n\t\t\trandom.initState();\n\t\t\trandom.hashString(seed);\n\t\t};\n\n\t\t// this handy exported function is used to add entropy to our uheprng at any time\n\t\trandom.addEntropy = function ( /* accept zero or more arguments */ ) {\n\t\t\tvar args = [];\n\t\t\tfor (i = 0; i < arguments.length; i++) {\n\t\t\t\targs.push(arguments[i]);\n\t\t\t}\n\t\t\thash((k++) + (new Date().getTime()) + args.join('') + Math.random());\n\t\t};\n\n\t\t// if we want to provide a deterministic startup context for our PRNG,\n\t\t// but without directly setting the internal state variables, this allows\n\t\t// us to initialize the mash hash and PRNG's internal state before providing\n\t\t// some hashing input\n\t\trandom.initState = function () {\n\t\t\tmash(); // pass a null arg to force mash hash to init\n\t\t\tfor (i = 0; i < o; i++) {\n\t\t\t\ts[i] = mash(' '); // fill the array with initial mash hash values\n\t\t\t}\n\t\t\tc = 1; // init our multiply-with-carry carry\n\t\t\tp = o; // init our phase\n\t\t};\n\n\t\t// we use this (optional) exported function to signal the JavaScript interpreter\n\t\t// that we're finished using the \"Mash\" hash function so that it can free up the\n\t\t// local \"instance variables\" is will have been maintaining.  It's not strictly\n\t\t// necessary, of course, but it's good JavaScript citizenship.\n\t\trandom.done = function () {\n\t\t\tmash = null;\n\t\t};\n\n\t\t// if we called \"uheprng\" with a seed value, then execute random.seed() before returning\n\t\tif (typeof seed !== 'undefined') {\n\t\t\trandom.seed(seed);\n\t\t}\n\n\t\t// Returns a random integer between 0 (inclusive) and range (exclusive)\n\t\trandom.range = function (range) {\n\t\t\treturn random(range);\n\t\t};\n\n\t\t// Returns a random float between 0 (inclusive) and 1 (exclusive)\n\t\trandom.random = function () {\n\t\t\treturn random(Number.MAX_VALUE - 1) / Number.MAX_VALUE;\n\t\t};\n\n\t\t// Returns a random float between min (inclusive) and max (exclusive)\n\t\trandom.floatBetween = function (min, max) {\n\t\t\treturn random.random() * (max - min) + min;\n\t\t};\n\n\t\t// Returns a random integer between min (inclusive) and max (inclusive)\n\t\trandom.intBetween = function (min, max) {\n\t\t\treturn Math.floor(random.random() * (max - min + 1)) + min;\n\t\t};\n\n\t\t// when our main outer \"uheprng\" function is called, after setting up our\n\t\t// initial variables and entropic state, we return an \"instance pointer\"\n\t\t// to the internal anonymous function which can then be used to access\n\t\t// the uheprng's various exported functions.  As with the \".done\" function\n\t\t// above, we should set the returned value to 'null' once we're finished\n\t\t// using any of these functions.\n\t\treturn random;\n\t}());\n};\n\n// Modification for use in node:\nuheprng.create = function (seed) {\n\treturn new uheprng(seed);\n};\nmodule.exports = uheprng;\n","'use strict'\n\nconst rand = require('random-seed')\n\nclass Noise {\n  constructor (s) {\n    this.p = new Uint8Array(512)\n    this.seed(s)\n  }\n\n  gen () {}\n\n  seed (s) {\n    const rng = rand.create(s || Math.random())\n\n    for (let i = 0; i < 256; i++) this.p[i] = i\n    for (let i = 0; i < 256; i++) {\n      const r = rng(256)\n      const temp = this.p[i]\n      this.p[i] = this.p[r]\n      this.p[r] = temp\n    }\n    for (let i = 0; i < 256; i++) this.p[i + 256] = this.p[i]\n  }\n\n  transform (fn) {\n    const transformedFn = (...dims) => fn.apply(this, dims)\n\n    return transformedFn.bind(this)\n  }\n\n  octavate (...args) {\n    const octaves = args[0]\n    const dims = args.slice(1)\n    let val = 0\n    let max = 0\n\n    for (let i = 0; i < octaves; i++) {\n      const w = 1 << i\n      val += this.gen.apply(this, dims.map(x => x * w)) / w\n    }\n\n    for (let i = 0; i < octaves; i++) {\n      max += 1 / (1 << i)\n    }\n\n    return val / max\n  }\n}\n\nmodule.exports = Noise\n","'use strict'\n\nclass Vec1 {\n  constructor (x) {\n    this.x = x\n  }\n\n  dot (x) {\n    return this.x * x\n  }\n}\n\nconst g1 = [ new Vec1(1), new Vec1(-1) ]\n\nfunction grad1 (p, x) {\n  return g1[p[x] % g1.length]\n}\n\nmodule.exports = {\n  grad1\n}\n","'use strict'\n\nfunction falloff (...args) {\n  const dims = args.slice(1)\n  const t = args[0] - dims.reduce((sum, val) => {\n    return sum + val * val\n  }, 0)\n\n  return t * t * t * t\n}\n\nfunction lerp (a, b, t) {\n  return a * (1 - t) + b * t\n}\nfunction fade (t) {\n  return t * t * t * (10 + t * (-15 + t * 6))\n}\nconst cut1 = falloff.bind(null, 1)\nconst cut = falloff.bind(null, 0.5)\n\nmodule.exports = {\n  lerp,\n  fade,\n  cut1,\n  cut\n}\n","'use strict'\n\nconst Noise = require('../util/noise')\nconst { grad1 } = require('../util/1d')\nconst { cut1 } = require('../util/math')\n\nclass Simplex1 extends Noise {\n  gen (x) {\n    const gx = Math.floor(x) % 256\n    const dx = x - gx\n\n    const n0 = cut1(dx) * grad1(this.p, gx).dot(dx)\n    const n1 = cut1(dx - 1) * grad1(this.p, gx + 1).dot(dx - 1)\n\n    return 0.5 * (n0 + n1)\n  }\n}\n\nmodule.exports = Simplex1\n","'use strict'\n\nclass Vec2 {\n  constructor (x, y) {\n    this.x = x\n    this.y = y\n  }\n\n  dot (x, y) {\n    return this.x * x + this.y * y\n  }\n}\n\nconst g2 = [\n  new Vec2(1, 0), new Vec2(1, 1), new Vec2(0, 1), new Vec2(-1, 1),\n  new Vec2(-1, 0), new Vec2(-1, -1), new Vec2(0, -1), new Vec2(1, -1)\n]\n\nfunction grad2 (p, x, y) {\n  const hash = p[x + p[y]] % g2.length\n  return g2[hash]\n}\nconst S2_TO_C = 0.5 * (Math.sqrt(3) - 1)\nconst C_TO_S2 = (3 - Math.sqrt(3)) / 6\n\nmodule.exports = {\n  grad2,\n  S2_TO_C,\n  C_TO_S2\n}\n","'use strict'\n\nconst Noise = require('../util/noise')\nconst { grad2, S2_TO_C, C_TO_S2 } = require('../util/2d')\nconst { cut } = require('../util/math')\n\nclass Simplex2 extends Noise {\n  gen (x, y) {\n    const skew = (x + y) * S2_TO_C\n    const i = Math.trunc(x + skew)\n    const j = Math.trunc(y + skew)\n\n    const unskew = (i + j) * C_TO_S2\n    const gx = i - unskew\n    const gy = j - unskew\n\n    const dx0 = x - gx\n    const dy0 = y - gy\n\n    const di = dx0 > dy0 ? 1 : 0\n    const dj = dx0 > dy0 ? 0 : 1\n\n    const dx1 = dx0 - di + C_TO_S2\n    const dy1 = dy0 - dj + C_TO_S2\n    const dx2 = dx0 - 1 + 2 * C_TO_S2\n    const dy2 = dy0 - 1 + 2 * C_TO_S2\n\n    const n0 = cut(dx0, dy0) * grad2(this.p, i, j).dot(dx0, dy0)\n    const n1 = cut(dx1, dy1) * grad2(this.p, i + di, j + dj).dot(dx1, dy1)\n    const n2 = cut(dx2, dy2) * grad2(this.p, i + 1, j + 1).dot(dx2, dy2)\n\n    return 70 * (n0 + n1 + n2)\n  }\n}\n\nmodule.exports = Simplex2\n","'use strict'\n\nconst Noise = require('../util/noise')\nconst { grad1 } = require('../util/1d')\nconst { lerp, fade } = require('../util/math')\n\nclass Perlin1 extends Noise {\n  gen (x) {\n    const gx = Math.floor(x) % 256\n    const dx = x - gx\n\n    const n0 = grad1(this.p, gx).dot(dx)\n    const n1 = grad1(this.p, gx + 1).dot(dx - 1)\n\n    return lerp(n0, n1, fade(dx))\n  }\n}\n\nmodule.exports = Perlin1\n","'use strict'\n\nconst Noise = require('../util/noise')\nconst { grad2 } = require('../util/2d')\nconst { fade, lerp } = require('../util/math')\n\nclass Perlin2 extends Noise {\n  gen (x, y) {\n    const gx = Math.trunc(x) % 256\n    const gy = Math.trunc(y) % 256\n\n    const dx = x - gx\n    const dy = y - gy\n\n    const n00 = grad2(this.p, gx, gy).dot(dx, dy)\n    const n10 = grad2(this.p, gx + 1, gy).dot(dx - 1, dy)\n    const n01 = grad2(this.p, gx, gy + 1).dot(dx, dy - 1)\n    const n11 = grad2(this.p, gx + 1, gy + 1).dot(dx - 1, dy - 1)\n\n    return lerp(\n      lerp(n00, n10, fade(dx)),\n      lerp(n01, n11, fade(dx)),\n      fade(dy)\n    )\n  }\n}\n\nmodule.exports = Perlin2\n","'use strict'\n\nclass Vec3 {\n  constructor (x, y, z) {\n    this.x = x\n    this.y = y\n    this.z = z\n  }\n\n  dot (x, y, z) {\n    return this.x * x + this.y * y + this.z * z\n  }\n}\n\nconst g3 = [\n  new Vec3(1, 1, 1), new Vec3(-1, 1, 1), new Vec3(1, -1, 1), new Vec3(-1, -1, 1),\n  new Vec3(1, 1, 0), new Vec3(-1, 1, 0), new Vec3(1, -1, 0), new Vec3(-1, -1, 0),\n  new Vec3(1, 1, -1), new Vec3(-1, 1, -1), new Vec3(1, -1, -1), new Vec3(-1, -1, -1)\n]\n\nfunction grad3 (p, x, y, z) {\n  const hash = p[x + p[y + p[z]]] % g3.length\n  return g3[hash]\n}\n\nmodule.exports = {\n  grad3\n}\n","'use strict'\n\nconst Noise = require('../util/noise')\nconst { grad3 } = require('../util/3d')\nconst { fade, lerp } = require('../util/math')\n\nclass Perlin3 extends Noise {\n  gen (x, y, z) {\n    const gx = Math.trunc(x) % 256\n    const gy = Math.trunc(y) % 256\n    const gz = Math.trunc(z) % 256\n\n    const dx = x - gx\n    const dy = y - gy\n    const dz = z - gz\n\n    const n000 = grad3(this.p, gx, gy, gz).dot(dx, dy, dz)\n    const n100 = grad3(this.p, gx + 1, gy, gz).dot(dx - 1, dy, dz)\n    const n010 = grad3(this.p, gx, gy + 1, gz).dot(dx, dy - 1, dz)\n    const n110 = grad3(this.p, gx + 1, gy + 1, gz).dot(dx - 1, dy - 1, dz)\n    const n001 = grad3(this.p, gx, gy, gz + 1).dot(dx, dy, dz - 1)\n    const n101 = grad3(this.p, gx + 1, gy, gz + 1).dot(dx - 1, dy, dz - 1)\n    const n011 = grad3(this.p, gx, gy + 1, gz + 1).dot(dx, dy - 1, dz - 1)\n    const n111 = grad3(this.p, gx + 1, gy + 1, gz + 1).dot(dx - 1, dy - 1, dz - 1)\n\n    return lerp(\n      lerp(\n        lerp(n000, n100, dx),\n        lerp(n010, n110, dx),\n        fade(dy)\n      ),\n      lerp(\n        lerp(n001, n101, dx),\n        lerp(n011, n111, dx),\n        fade(dy)\n      ),\n      fade(dz)\n    )\n  }\n}\n\nmodule.exports = Perlin3\n","'use strict'\n\nclass Vec4 {\n  constructor (x, y, z, t) {\n    this.x = x\n    this.y = y\n    this.z = z\n    this.t = t\n  }\n\n  dot (x, y, z, t) {\n    return this.x * x + this.y * y + this.z * z + this.t * t\n  }\n}\n\nconst g4 = [\n  new Vec4(0, 1, 1, 1), new Vec4(0, 1, 1, -1), new Vec4(0, 1, -1, 1), new Vec4(0, 1, -1, -1),\n  new Vec4(0, -1, 1, 1), new Vec4(0, -1, 1, -1), new Vec4(0, -1, -1, 1), new Vec4(0, -1, -1, -1),\n  new Vec4(1, 0, 1, 1), new Vec4(1, 0, 1, -1), new Vec4(1, 0, -1, 1), new Vec4(1, 0, -1, -1),\n  new Vec4(-1, 0, 1, 1), new Vec4(-1, 0, 1, -1), new Vec4(-1, 0, -1, 1), new Vec4(-1, 0, -1, -1),\n  new Vec4(1, 1, 0, 1), new Vec4(1, 1, 0, -1), new Vec4(1, -1, 0, 1), new Vec4(1, -1, 0, -1),\n  new Vec4(-1, 1, 0, 1), new Vec4(-1, 1, 0, -1), new Vec4(-1, -1, 0, 1), new Vec4(-1, -1, 0, -1),\n  new Vec4(1, 1, 1, 0), new Vec4(1, 1, -1, 0), new Vec4(1, -1, 1, 0), new Vec4(1, -1, -1, 0),\n  new Vec4(-1, 1, 1, 0), new Vec4(-1, 1, -1, 0), new Vec4(-1, -1, 1, 0), new Vec4(-1, -1, -1, 0)\n]\n\nfunction grad4 (p, x, y, z, t) {\n  const hash = p[x + p[y + p[z + p[t]]]] % g4.length\n  return g4[hash]\n}\n\nmodule.exports = {\n  grad4\n}\n","'use strict'\n\nconst Noise = require('../util/noise')\nconst { grad4 } = require('../util/4d')\nconst { fade, lerp } = require('../util/math')\n\nclass Perlin4 extends Noise {\n  gen (x, y, z, t) {\n    const gx = Math.trunc(x) % 256\n    const gy = Math.trunc(y) % 256\n    const gz = Math.trunc(z) % 256\n    const gt = Math.trunc(t) % 256\n\n    const dx = x - gx\n    const dy = y - gy\n    const dz = z - gz\n    const dt = t - gt\n\n    const n0000 = grad4(this.p, gx, gy, gz, gt).dot(dx, dy, dz, dt)\n    const n1000 = grad4(this.p, gx + 1, gy, gz, gt).dot(dx - 1, dy, dz)\n    const n0100 = grad4(this.p, gx, gy + 1, gz, gt).dot(dx, dy - 1, dz)\n    const n1100 = grad4(this.p, gx + 1, gy + 1, gz, gt).dot(dx - 1, dy - 1, dz)\n    const n0010 = grad4(this.p, gx, gy, gz + 1, gt).dot(dx, dy, dz - 1)\n    const n1010 = grad4(this.p, gx + 1, gy, gz + 1, gt).dot(dx - 1, dy, dz - 1)\n    const n0110 = grad4(this.p, gx, gy + 1, gz + 1, gt).dot(dx, dy - 1, dz - 1)\n    const n1110 = grad4(this.p, gx + 1, gy + 1, gz + 1, gt).dot(dx - 1, dy - 1, dz - 1)\n    const n0001 = grad4(this.p, gx, gy, gz, gt + 1).dot(dx, dy, dz, dt - 1)\n    const n1001 = grad4(this.p, gx + 1, gy, gz, gt + 1).dot(dx - 1, dy, dz, dt - 1)\n    const n0101 = grad4(this.p, gx, gy + 1, gz, gt + 1).dot(dx, dy - 1, dz, dt - 1)\n    const n1101 = grad4(this.p, gx + 1, gy + 1, gz, gt + 1).dot(dx - 1, dy - 1, dz, dt - 1)\n    const n0011 = grad4(this.p, gx, gy, gz + 1, gt + 1).dot(dx, dy, dz - 1, dt - 1)\n    const n1011 = grad4(this.p, gx + 1, gy, gz + 1, gt + 1).dot(dx - 1, dy, dz - 1, dt - 1)\n    const n0111 = grad4(this.p, gx, gy + 1, gz + 1, gt + 1).dot(dx, dy - 1, dz - 1, dt - 1)\n    const n1111 = grad4(this.p, gx + 1, gy + 1, gz + 1, gt + 1).dot(dx - 1, dy - 1, dz - 1, dt - 1)\n\n    return lerp(\n      lerp(\n        lerp(\n          lerp(n0000, n1000, dx),\n          lerp(n0100, n1100, dx),\n          fade(dy)\n        ),\n        lerp(\n          lerp(n0010, n1010, dx),\n          lerp(n0110, n1110, dx),\n          fade(dy)\n        ),\n        fade(dz)\n      ),\n      lerp(\n        lerp(\n          lerp(n0001, n1001, dx),\n          lerp(n0101, n1101, dx),\n          fade(dy)\n        ),\n        lerp(\n          lerp(n0011, n1011, dx),\n          lerp(n0111, n1111, dx),\n          fade(dy)\n        ),\n        fade(dz)\n      ),\n      fade(dt)\n    )\n  }\n}\n\nmodule.exports = Perlin4\n","'use strict'\n\nconst { lerp, fade } = require('./math')\n\nfunction hashN (p, gs) {\n  if (gs.length === 1) return p[gs[0]]\n\n  return p[gs[0] + hashN(p, gs.slice(1))]\n}\n\nclass VecN {\n  constructor (R) {\n    this.R = R\n  }\n\n  dot (R) {\n    let val = 0\n\n    for (let i = 0; i < R.length; i++) {\n      val += this.R[i] * R[i]\n    }\n\n    return val\n  }\n}\n\nconst gN = []\nfunction generateGN (dim) {\n  for (let i = 0; i < dim * 2; i++) {\n    const vec = new Array(dim).fill(0)\n\n    vec[i % dim] = i / dim >= 1 ? 1 : -1\n    gN[i] = new VecN(vec)\n  }\n}\n\nfunction lerpN (ns, ds) {\n  if (ds.length === 1) return lerp(ns[0], ns[1], fade(ds[0]))\n\n  const ns1 = ns.slice(0, Math.floor(ns.length / 2))\n  const ns2 = ns.slice(Math.ceil(ns.length / 2))\n\n  return lerp(\n    lerpN(ns1, ds.slice(0, ds.length - 1)),\n    lerpN(ns2, ds.slice(0, ds.length - 1)),\n    fade(ds[ds.length - 1])\n  )\n}\nfunction getNs (p, dim, gs, ds) {\n  const ns = []\n\n  if (gN.length === 0) {\n    generateGN(dim)\n  }\n\n  for (let i = 0; i < (2 << (dim - 1)); i++) {\n    const gsPerm = gs.slice()\n    const dsPerm = ds.slice()\n    let temp = i\n\n    for (let j = 0; j < dim; j++) {\n      if (temp & 1) {\n        gsPerm[j] += 1\n        dsPerm[j] -= 1\n      }\n      temp = temp >> 1\n    }\n    ns[i] = gN[hashN(p, gsPerm) % gN.length].dot(dsPerm)\n  }\n\n  return ns\n}\n\nmodule.exports = {\n  lerpN,\n  getNs\n}\n","'use strict'\n\nconst Noise = require('../util/noise')\nconst { lerpN, getNs } = require('../util/nd')\n\nclass PerlinN extends Noise {\n  gen (...args) {\n    const gs = []\n    const ds = []\n\n    for (let i = 0; i < args.length; i++) {\n      gs[i] = Math.trunc(args[i]) % 256\n      ds[i] = args[i] - gs[i]\n    }\n\n    const ns = getNs(this.p, args.length, gs, ds)\n\n    return lerpN(ns, ds)\n  }\n}\n\nmodule.exports = PerlinN\n","'use struct'\n\nconst Simplex1 = require('./simplex/simplex1')\nconst Simplex2 = require('./simplex/simplex2')\n\nconst Perlin1 = require('./perlin/perlin1')\nconst Perlin2 = require('./perlin/perlin2')\nconst Perlin3 = require('./perlin/perlin3')\nconst Perlin4 = require('./perlin/perlin4')\nconst PerlinN = require('./perlin/perlinN')\n\nmodule.exports = {\n  Simplex1,\n  Simplex2,\n  Perlin1,\n  Perlin2,\n  Perlin3,\n  Perlin4,\n  PerlinN\n}\n","/*\n * A speed-improved perlin and simplex noise algorithms for 2D.\n *\n * Based on example code by Stefan Gustavson (stegu@itn.liu.se).\n * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\n * Better rank ordering method by Stefan Gustavson in 2012.\n * Converted to Javascript by Joseph Gentle.\n *\n * Version 2012-03-09\n *\n * This code was placed in the public domain by its original author,\n * Stefan Gustavson. You may use it as you see fit, but\n * attribution is appreciated.\n *\n */\n\n(function(global){\n  var module = global.noise = {};\n\n  function Grad(x, y, z) {\n    this.x = x; this.y = y; this.z = z;\n  }\n  \n  Grad.prototype.dot2 = function(x, y) {\n    return this.x*x + this.y*y;\n  };\n\n  Grad.prototype.dot3 = function(x, y, z) {\n    return this.x*x + this.y*y + this.z*z;\n  };\n\n  var grad3 = [new Grad(1,1,0),new Grad(-1,1,0),new Grad(1,-1,0),new Grad(-1,-1,0),\n               new Grad(1,0,1),new Grad(-1,0,1),new Grad(1,0,-1),new Grad(-1,0,-1),\n               new Grad(0,1,1),new Grad(0,-1,1),new Grad(0,1,-1),new Grad(0,-1,-1)];\n\n  var p = [151,160,137,91,90,15,\n  131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,\n  190, 6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,\n  88,237,149,56,87,174,20,125,136,171,168, 68,175,74,165,71,134,139,48,27,166,\n  77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,\n  102,143,54, 65,25,63,161, 1,216,80,73,209,76,132,187,208, 89,18,169,200,196,\n  135,130,116,188,159,86,164,100,109,198,173,186, 3,64,52,217,226,250,124,123,\n  5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,\n  223,183,170,213,119,248,152, 2,44,154,163, 70,221,153,101,155,167, 43,172,9,\n  129,22,39,253, 19,98,108,110,79,113,224,232,178,185, 112,104,218,246,97,228,\n  251,34,242,193,238,210,144,12,191,179,162,241, 81,51,145,235,249,14,239,107,\n  49,192,214, 31,181,199,106,157,184, 84,204,176,115,121,50,45,127, 4,150,254,\n  138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];\n  // To remove the need for index wrapping, double the permutation table length\n  var perm = new Array(512);\n  var gradP = new Array(512);\n\n  // This isn't a very good seeding function, but it works ok. It supports 2^16\n  // different seed values. Write something better if you need more seeds.\n  module.seed = function(seed) {\n    if(seed > 0 && seed < 1) {\n      // Scale the seed out\n      seed *= 65536;\n    }\n\n    seed = Math.floor(seed);\n    if(seed < 256) {\n      seed |= seed << 8;\n    }\n\n    for(var i = 0; i < 256; i++) {\n      var v;\n      if (i & 1) {\n        v = p[i] ^ (seed & 255);\n      } else {\n        v = p[i] ^ ((seed>>8) & 255);\n      }\n\n      perm[i] = perm[i + 256] = v;\n      gradP[i] = gradP[i + 256] = grad3[v % 12];\n    }\n  };\n\n  module.seed(0);\n\n  /*\n  for(var i=0; i<256; i++) {\n    perm[i] = perm[i + 256] = p[i];\n    gradP[i] = gradP[i + 256] = grad3[perm[i] % 12];\n  }*/\n\n  // Skewing and unskewing factors for 2, 3, and 4 dimensions\n  var F2 = 0.5*(Math.sqrt(3)-1);\n  var G2 = (3-Math.sqrt(3))/6;\n\n  var F3 = 1/3;\n  var G3 = 1/6;\n\n  // 2D simplex noise\n  module.simplex2 = function(xin, yin) {\n    var n0, n1, n2; // Noise contributions from the three corners\n    // Skew the input space to determine which simplex cell we're in\n    var s = (xin+yin)*F2; // Hairy factor for 2D\n    var i = Math.floor(xin+s);\n    var j = Math.floor(yin+s);\n    var t = (i+j)*G2;\n    var x0 = xin-i+t; // The x,y distances from the cell origin, unskewed.\n    var y0 = yin-j+t;\n    // For the 2D case, the simplex shape is an equilateral triangle.\n    // Determine which simplex we are in.\n    var i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n    if(x0>y0) { // lower triangle, XY order: (0,0)->(1,0)->(1,1)\n      i1=1; j1=0;\n    } else {    // upper triangle, YX order: (0,0)->(0,1)->(1,1)\n      i1=0; j1=1;\n    }\n    // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n    // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n    // c = (3-sqrt(3))/6\n    var x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n    var y1 = y0 - j1 + G2;\n    var x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords\n    var y2 = y0 - 1 + 2 * G2;\n    // Work out the hashed gradient indices of the three simplex corners\n    i &= 255;\n    j &= 255;\n    var gi0 = gradP[i+perm[j]];\n    var gi1 = gradP[i+i1+perm[j+j1]];\n    var gi2 = gradP[i+1+perm[j+1]];\n    // Calculate the contribution from the three corners\n    var t0 = 0.5 - x0*x0-y0*y0;\n    if(t0<0) {\n      n0 = 0;\n    } else {\n      t0 *= t0;\n      n0 = t0 * t0 * gi0.dot2(x0, y0);  // (x,y) of grad3 used for 2D gradient\n    }\n    var t1 = 0.5 - x1*x1-y1*y1;\n    if(t1<0) {\n      n1 = 0;\n    } else {\n      t1 *= t1;\n      n1 = t1 * t1 * gi1.dot2(x1, y1);\n    }\n    var t2 = 0.5 - x2*x2-y2*y2;\n    if(t2<0) {\n      n2 = 0;\n    } else {\n      t2 *= t2;\n      n2 = t2 * t2 * gi2.dot2(x2, y2);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 70 * (n0 + n1 + n2);\n  };\n\n  // 3D simplex noise\n  module.simplex3 = function(xin, yin, zin) {\n    var n0, n1, n2, n3; // Noise contributions from the four corners\n\n    // Skew the input space to determine which simplex cell we're in\n    var s = (xin+yin+zin)*F3; // Hairy factor for 2D\n    var i = Math.floor(xin+s);\n    var j = Math.floor(yin+s);\n    var k = Math.floor(zin+s);\n\n    var t = (i+j+k)*G3;\n    var x0 = xin-i+t; // The x,y distances from the cell origin, unskewed.\n    var y0 = yin-j+t;\n    var z0 = zin-k+t;\n\n    // For the 3D case, the simplex shape is a slightly irregular tetrahedron.\n    // Determine which simplex we are in.\n    var i1, j1, k1; // Offsets for second corner of simplex in (i,j,k) coords\n    var i2, j2, k2; // Offsets for third corner of simplex in (i,j,k) coords\n    if(x0 >= y0) {\n      if(y0 >= z0)      { i1=1; j1=0; k1=0; i2=1; j2=1; k2=0; }\n      else if(x0 >= z0) { i1=1; j1=0; k1=0; i2=1; j2=0; k2=1; }\n      else              { i1=0; j1=0; k1=1; i2=1; j2=0; k2=1; }\n    } else {\n      if(y0 < z0)      { i1=0; j1=0; k1=1; i2=0; j2=1; k2=1; }\n      else if(x0 < z0) { i1=0; j1=1; k1=0; i2=0; j2=1; k2=1; }\n      else             { i1=0; j1=1; k1=0; i2=1; j2=1; k2=0; }\n    }\n    // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),\n    // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and\n    // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where\n    // c = 1/6.\n    var x1 = x0 - i1 + G3; // Offsets for second corner\n    var y1 = y0 - j1 + G3;\n    var z1 = z0 - k1 + G3;\n\n    var x2 = x0 - i2 + 2 * G3; // Offsets for third corner\n    var y2 = y0 - j2 + 2 * G3;\n    var z2 = z0 - k2 + 2 * G3;\n\n    var x3 = x0 - 1 + 3 * G3; // Offsets for fourth corner\n    var y3 = y0 - 1 + 3 * G3;\n    var z3 = z0 - 1 + 3 * G3;\n\n    // Work out the hashed gradient indices of the four simplex corners\n    i &= 255;\n    j &= 255;\n    k &= 255;\n    var gi0 = gradP[i+   perm[j+   perm[k   ]]];\n    var gi1 = gradP[i+i1+perm[j+j1+perm[k+k1]]];\n    var gi2 = gradP[i+i2+perm[j+j2+perm[k+k2]]];\n    var gi3 = gradP[i+ 1+perm[j+ 1+perm[k+ 1]]];\n\n    // Calculate the contribution from the four corners\n    var t0 = 0.5 - x0*x0-y0*y0-z0*z0;\n    if(t0<0) {\n      n0 = 0;\n    } else {\n      t0 *= t0;\n      n0 = t0 * t0 * gi0.dot3(x0, y0, z0);  // (x,y) of grad3 used for 2D gradient\n    }\n    var t1 = 0.5 - x1*x1-y1*y1-z1*z1;\n    if(t1<0) {\n      n1 = 0;\n    } else {\n      t1 *= t1;\n      n1 = t1 * t1 * gi1.dot3(x1, y1, z1);\n    }\n    var t2 = 0.5 - x2*x2-y2*y2-z2*z2;\n    if(t2<0) {\n      n2 = 0;\n    } else {\n      t2 *= t2;\n      n2 = t2 * t2 * gi2.dot3(x2, y2, z2);\n    }\n    var t3 = 0.5 - x3*x3-y3*y3-z3*z3;\n    if(t3<0) {\n      n3 = 0;\n    } else {\n      t3 *= t3;\n      n3 = t3 * t3 * gi3.dot3(x3, y3, z3);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 32 * (n0 + n1 + n2 + n3);\n\n  };\n\n  // ##### Perlin noise stuff\n\n  function fade(t) {\n    return t*t*t*(t*(t*6-15)+10);\n  }\n\n  function lerp(a, b, t) {\n    return (1-t)*a + t*b;\n  }\n\n  // 2D Perlin Noise\n  module.perlin2 = function(x, y) {\n    // Find unit grid cell containing point\n    var X = Math.floor(x), Y = Math.floor(y);\n    // Get relative xy coordinates of point within that cell\n    x = x - X; y = y - Y;\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n    X = X & 255; Y = Y & 255;\n\n    // Calculate noise contributions from each of the four corners\n    var n00 = gradP[X+perm[Y]].dot2(x, y);\n    var n01 = gradP[X+perm[Y+1]].dot2(x, y-1);\n    var n10 = gradP[X+1+perm[Y]].dot2(x-1, y);\n    var n11 = gradP[X+1+perm[Y+1]].dot2(x-1, y-1);\n\n    // Compute the fade curve value for x\n    var u = fade(x);\n\n    // Interpolate the four results\n    return lerp(\n        lerp(n00, n10, u),\n        lerp(n01, n11, u),\n       fade(y));\n  };\n\n  // 3D Perlin Noise\n  module.perlin3 = function(x, y, z) {\n    // Find unit grid cell containing point\n    var X = Math.floor(x), Y = Math.floor(y), Z = Math.floor(z);\n    // Get relative xyz coordinates of point within that cell\n    x = x - X; y = y - Y; z = z - Z;\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n    X = X & 255; Y = Y & 255; Z = Z & 255;\n\n    // Calculate noise contributions from each of the eight corners\n    var n000 = gradP[X+  perm[Y+  perm[Z  ]]].dot3(x,   y,     z);\n    var n001 = gradP[X+  perm[Y+  perm[Z+1]]].dot3(x,   y,   z-1);\n    var n010 = gradP[X+  perm[Y+1+perm[Z  ]]].dot3(x,   y-1,   z);\n    var n011 = gradP[X+  perm[Y+1+perm[Z+1]]].dot3(x,   y-1, z-1);\n    var n100 = gradP[X+1+perm[Y+  perm[Z  ]]].dot3(x-1,   y,   z);\n    var n101 = gradP[X+1+perm[Y+  perm[Z+1]]].dot3(x-1,   y, z-1);\n    var n110 = gradP[X+1+perm[Y+1+perm[Z  ]]].dot3(x-1, y-1,   z);\n    var n111 = gradP[X+1+perm[Y+1+perm[Z+1]]].dot3(x-1, y-1, z-1);\n\n    // Compute the fade curve value for x, y, z\n    var u = fade(x);\n    var v = fade(y);\n    var w = fade(z);\n\n    // Interpolate\n    return lerp(\n        lerp(\n          lerp(n000, n100, u),\n          lerp(n001, n101, u), w),\n        lerp(\n          lerp(n010, n110, u),\n          lerp(n011, n111, u), w),\n       v);\n  };\n\n})(typeof module === \"undefined\" ? this : module.exports);","'use strict'\n\nconst noise = require('perlin').noise\n\nconst clamp = (a, min, max) => Math.max(min, Math.min(a, max))\nconst normalize = (a, min, max) => map(a, min, max, 0, 1)\nconst map = (a, in_min, in_max, out_min, out_max) => (a - in_min) * (out_max - out_min) / (in_max - in_min) + out_min\nconst lerp = (a, b, t) => a + t * (b - a)\nconst random = (a, b) => {\n  if (b !== undefined) return lerp(a, b, Math.random())\n  return lerp(0, a, Math.random())\n}\n\nfunction perlin (x, y, z) {\n  if (arguments.length === 3) return noise.perlin3(x, y, z)\n  if (arguments.length === 2) return noise.perlin2(x, y)\n  if (arguments.length === 1) return noise.perlin2(x, null)\n  return null\n}\n\nmodule.exports = {\n  clamp,\n  constrain: clamp,\n  degrees: rad => rad * 180 / Math.PI,\n  radians: deg => deg * Math.PI / 180,\n  lerp,\n  normalize,\n  norm: normalize,\n  map,\n  random,\n  rnd: random,\n  perlin,\n  noise: perlin\n}\n","import tumult from 'tumult'\nimport { normalize, radians, lerp } from 'missing-math'\n\nexport default class Gradient {\n  // IMPORTANT: f() should return a normalized value\n  constructor (f = (x, y, width, height) => 1) {\n    this.compute = f.bind(this)\n  }\n\n  static get methods () {\n    return Object.getOwnPropertyNames(Gradient)\n      .filter(prop => prop !== 'methods')\n      .filter(prop => typeof Gradient[prop] === 'function')\n  }\n\n  static normalize (x, y, width, height) {\n    return [\n      normalize(x, 0, width),\n      normalize(y, 0, height)\n    ]\n  }\n\n  static simplex ({\n    seed = null,\n    octaves = 2,\n    power = 1\n  } = {}) {\n    const frequency = Math.pow(2, octaves)\n    const simplex = new tumult.Simplex2(seed)\n    return new Gradient((x, y, width, height) => {\n      const [i, j] = Gradient.normalize(x, y, width, height)\n      return normalize(simplex.gen(i / frequency, j / frequency), -1, 1) ** power\n    })\n  }\n\n  static linear (alpha = 0) {\n    return new Gradient((x, y, width, height) => {\n      const [i, j] = Gradient.normalize(x, y, width, height)\n      const theta = radians(alpha)\n\n      const dirx = lerp(1 - i, i, (Math.sin(theta) + 1) / 2)\n      const diry = lerp(1 - j, j, (Math.cos(theta) + 1) / 2)\n      return ((dirx + diry) / 2)\n    })\n  }\n\n  static random (rng = Math.random) {\n    return new Gradient(rng)\n  }\n\n  static fix (value = 1) {\n    return new Gradient(() => value)\n  }\n}\n","export default (x, y, width, height, { ctx, color } = {}) => {\n  if (color === 'transparent') return\n\n  if (color) ctx.fillStyle = color\n  ctx.fillRect(x, y, width, height)\n}\n","import background from '../utils/draw-background'\n\nexport default symbol => {\n  return (x, y, {\n    ctx,\n    unit,\n    scale = 1,\n    foregroundColor = 'black',\n    backgroundColor = 'white'\n  } = {}) => {\n    ctx.isSVG && ctx.beginSVGGroup()\n\n    background(x, y, unit, unit, { ctx, color: backgroundColor })\n\n    ctx.fillStyle = foregroundColor\n    symbol(x, y, { ctx, unit, scale })\n\n    ctx.isSVG && ctx.endSVGGroup()\n  }\n}\n","'use strict';\n\nmodule.exports = lineclip;\n\nlineclip.polyline = lineclip;\nlineclip.polygon = polygonclip;\n\n\n// Cohen-Sutherland line clippign algorithm, adapted to efficiently\n// handle polylines rather than just segments\n\nfunction lineclip(points, bbox, result) {\n\n    var len = points.length,\n        codeA = bitCode(points[0], bbox),\n        part = [],\n        i, a, b, codeB, lastCode;\n\n    if (!result) result = [];\n\n    for (i = 1; i < len; i++) {\n        a = points[i - 1];\n        b = points[i];\n        codeB = lastCode = bitCode(b, bbox);\n\n        while (true) {\n\n            if (!(codeA | codeB)) { // accept\n                part.push(a);\n\n                if (codeB !== lastCode) { // segment went outside\n                    part.push(b);\n\n                    if (i < len - 1) { // start a new line\n                        result.push(part);\n                        part = [];\n                    }\n                } else if (i === len - 1) {\n                    part.push(b);\n                }\n                break;\n\n            } else if (codeA & codeB) { // trivial reject\n                break;\n\n            } else if (codeA) { // a outside, intersect with clip edge\n                a = intersect(a, b, codeA, bbox);\n                codeA = bitCode(a, bbox);\n\n            } else { // b outside\n                b = intersect(a, b, codeB, bbox);\n                codeB = bitCode(b, bbox);\n            }\n        }\n\n        codeA = lastCode;\n    }\n\n    if (part.length) result.push(part);\n\n    return result;\n}\n\n// Sutherland-Hodgeman polygon clipping algorithm\n\nfunction polygonclip(points, bbox) {\n\n    var result, edge, prev, prevInside, i, p, inside;\n\n    // clip against each side of the clip rectangle\n    for (edge = 1; edge <= 8; edge *= 2) {\n        result = [];\n        prev = points[points.length - 1];\n        prevInside = !(bitCode(prev, bbox) & edge);\n\n        for (i = 0; i < points.length; i++) {\n            p = points[i];\n            inside = !(bitCode(p, bbox) & edge);\n\n            // if segment goes through the clip window, add an intersection\n            if (inside !== prevInside) result.push(intersect(prev, p, edge, bbox));\n\n            if (inside) result.push(p); // add a point if it's inside\n\n            prev = p;\n            prevInside = inside;\n        }\n\n        points = result;\n\n        if (!points.length) break;\n    }\n\n    return result;\n}\n\n// intersect a segment against one of the 4 lines that make up the bbox\n\nfunction intersect(a, b, edge, bbox) {\n    return edge & 8 ? [a[0] + (b[0] - a[0]) * (bbox[3] - a[1]) / (b[1] - a[1]), bbox[3]] : // top\n           edge & 4 ? [a[0] + (b[0] - a[0]) * (bbox[1] - a[1]) / (b[1] - a[1]), bbox[1]] : // bottom\n           edge & 2 ? [bbox[2], a[1] + (b[1] - a[1]) * (bbox[2] - a[0]) / (b[0] - a[0])] : // right\n           edge & 1 ? [bbox[0], a[1] + (b[1] - a[1]) * (bbox[0] - a[0]) / (b[0] - a[0])] : // left\n           null;\n}\n\n// bit code reflects the point position relative to the bbox:\n\n//         left  mid  right\n//    top  1001  1000  1010\n//    mid  0001  0000  0010\n// bottom  0101  0100  0110\n\nfunction bitCode(p, bbox) {\n    var code = 0;\n\n    if (p[0] < bbox[0]) code |= 1; // left\n    else if (p[0] > bbox[2]) code |= 2; // right\n\n    if (p[1] < bbox[1]) code |= 4; // bottom\n    else if (p[1] > bbox[3]) code |= 8; // top\n\n    return code;\n}\n","export default (ctx, path) => {\n  ctx.beginPath()\n  path.forEach((point, index) => {\n    ctx[index === 0 ? 'moveTo' : 'lineTo'](...point)\n  })\n}\n","export default (value, nearest) => Math.floor(value / nearest) * nearest\n","import lineclip from 'lineclip'\nimport { radians } from 'missing-math'\n\nimport drawPath from '../utils/draw-path'\nimport roundTo from '../utils/round-to'\n\n/* eslint-disable camelcase */\n\nfunction steps (unit, step) {\n  return unit / step\n}\n\nconst symbols = {\n  empty: () => {},\n\n  debug: (x, y, { ctx, unit, scale = 1 } = {}) => {\n    ctx.strokeStyle = 'black'\n    ctx.lineWidth = unit / 12\n    ctx.strokeRect(x, y, unit, unit)\n  },\n\n  square: (x, y, { ctx, unit, scale = 1 } = {}) => {\n    const thickness = roundTo(unit * scale, steps(unit, 24))\n    if (thickness < 0) return\n\n    ctx.fillRect(x + (unit / 2) - thickness / 2, y + (unit / 2) - thickness / 2, thickness, thickness)\n  },\n\n  square_offset: (x, y, { ctx, unit, scale = 1 } = {}) => {\n    const thickness = roundTo(unit * scale, steps(unit, 24)) - 10\n    if (thickness < 0) return\n\n    ctx.fillRect(x + (unit / 2) - thickness / 2, y + (unit / 2) - thickness / 2, thickness, thickness)\n  },\n\n  vertical_line: (x, y, { ctx, unit, scale = 1 } = {}) => {\n    const thickness = roundTo(unit * scale, steps(unit, 24))\n    if (thickness < 0) return\n\n    ctx.fillRect(x + (unit / 2) - (thickness / 2), y, thickness, unit)\n  },\n\n  vertical_line_offset: (x, y, { ctx, unit, scale = 1 } = {}) => {\n    const thickness = roundTo(unit * scale, steps(unit, 24)) - 10\n    if (thickness < 0) return\n\n    ctx.fillRect(x + (unit / 2) - (thickness / 2), y, thickness, unit)\n  },\n\n  horizontal_line: (x, y, { ctx, unit, scale = 1 } = {}) => {\n    const thickness = roundTo(unit * scale, steps(unit, 24))\n    if (thickness < 0) return\n\n    ctx.fillRect(x, y + (unit / 2) - (thickness / 2), unit, thickness)\n  },\n\n  horizontal_line_offset: (x, y, { ctx, unit, scale = 1 } = {}) => {\n    const thickness = roundTo(unit * scale, steps(unit, 24)) - 10\n    if (thickness < 0) return\n\n    ctx.fillRect(x, y + (unit / 2) - (thickness / 2), unit, thickness)\n  },\n\n  diagonal: (x, y, { ctx, unit, scale = 1 } = {}) => {\n    const thickness = roundTo(unit * scale, steps(unit, 24))\n    if (thickness < 0) return\n\n    ctx.beginPath()\n    ctx.moveTo(x + unit - thickness, y)\n    ctx.lineTo(x + unit, y)\n    ctx.lineTo(x + thickness, y + unit)\n    ctx.lineTo(x, y + unit)\n    ctx.fill()\n  },\n\n  diamond: (x, y, { ctx, unit, scale = 1 } = {}) => {\n    const thickness = roundTo(unit * scale, steps(unit, 24)) - 1\n    if (thickness < 0) return\n\n    drawPath(ctx, lineclip.polygon([\n      [x + unit / 2, y + thickness],\n      [x + unit - thickness, y + unit / 2],\n      [x + unit / 2, y + unit - thickness],\n      [x + thickness, y + unit / 2]\n    ], [x, y, x + unit, y + unit]))\n    ctx.fill()\n  },\n\n  circle: (x, y, { ctx, unit, scale = 1 } = {}) => {\n    const diameter = roundTo((unit - 1) * scale, steps(unit, 24))\n    if (diameter < 0) return\n\n    const path = []\n    for (let alpha = 0; alpha < 360; alpha += (360 / 36)) {\n      const theta = radians(alpha)\n      path.push([\n        (x + unit / 2) + Math.sin(theta) * (diameter),\n        (y + unit / 2) + Math.cos(theta) * (diameter)\n      ])\n    }\n\n    drawPath(ctx, lineclip.polygon(path, [x, y, x + unit, y + unit]))\n    ctx.closePath()\n    ctx.fill()\n  },\n\n  ffp: (x, y, { ctx, unit, scale = 1 } = {}) => {\n    const gradient = 'FFP'.split('')\n    const char = gradient[Math.floor(Math.random() * gradient.length)]\n    if (!char) return\n\n    ctx.font = `${unit * 1.2}px Space Mono`\n    ctx.fillText(char, x, y + unit)\n  }\n}\n\nexport default symbols\n","import makePattern from '../controllers/make-pattern'\nimport symbols from '../controllers/symbols'\n\nimport createCanvasFromContext from '../utils/create-canvas-from-context'\n\nexport default class Ground {\n  constructor ({\n    width,\n    height,\n    unit = 24,\n    line,\n    gradient,\n    pattern = makePattern(symbols['debug']),\n    foregroundColor = 'black',\n    backgroundColor = 'white'\n  } = {}) {\n    this.width = width\n    this.height = height\n    this.unit = unit\n\n    this.line = line\n    this.gradient = gradient\n    this.pattern = pattern\n\n    this.backgroundColor = backgroundColor\n    this.foregroundColor = foregroundColor\n\n    this.grid = []\n    this.cells = []\n    this._populate()\n  }\n\n  _populate () {\n    for (let x = 0; x < this.width; x += this.unit) {\n      const i = Math.floor(x / this.unit)\n      const ystart = this.line.compute(i) * this.height\n      for (let y = ystart; y < this.height; y += this.unit) {\n        const j = Math.floor(y / this.unit)\n        this.setCell(i, j)\n      }\n    }\n  }\n\n  setCell (i, j) {\n    if (!this.grid[i]) this.grid[i] = []\n\n    const cell = {\n      i,\n      j,\n      x: i * this.unit,\n      y: j * this.unit,\n      shouldRender: true\n    }\n    this.grid[i][j] = cell\n    this.cells.push(cell)\n  }\n\n  hasCell (i, j) {\n    return this.grid[i] && this.grid[i][j]\n  }\n\n  isInFrontOf (x, y) {\n    const i = Math.floor(x / this.unit)\n    const j = Math.floor(y / this.unit)\n    return this.hasCell(i, j)\n  }\n\n  setBehind (grounds) {\n    this.grid.forEach(column => {\n      column.forEach(cell => {\n        if (!cell || !cell.shouldRender) return\n        cell.shouldRender = !grounds.some(ground => {\n          return ground.isInFrontOf(cell.x, cell.y)\n        })\n      })\n    })\n  }\n\n  get isEmpty () {\n    return !this.cells.find(cell => cell.shouldRender)\n  }\n\n  render (ctx) {\n    this.cells.forEach(cell => {\n      if (!cell.shouldRender) return\n\n      this.pattern(cell.x, cell.y, {\n        ctx,\n        unit: this.unit,\n        backgroundColor: this.backgroundColor,\n        foregroundColor: this.foregroundColor,\n        scale: this.gradient.compute(cell.x, cell.y, this.width, this.height)\n      })\n    })\n  }\n\n  createSprite (ctx) {\n    if (ctx.isSVG) throw new Error('Sprite rendering only works on non-SVG context')\n\n    this.sprite = createCanvasFromContext(ctx)\n    this.render(this.sprite.getContext('2d'))\n  }\n}\n","export default ctx => {\n  if (ctx.isSVG) throw new Error('This function does not handle SVG context')\n\n  const canvas = document.createElement('canvas')\n  canvas.width = ctx.canvas.width\n  canvas.height = ctx.canvas.height\n\n  return canvas\n}\n","/*!!\n *  Canvas 2 Svg v1.0.15\n *  A low level canvas to SVG converter. Uses a mock canvas context to build an SVG document.\n *\n *  Licensed under the MIT license:\n *  http://www.opensource.org/licenses/mit-license.php\n *\n *  Author:\n *  Kerry Liu\n *\n *  Copyright (c) 2014 Gliffy Inc.\n */\n\n;(function() {\n    \"use strict\";\n\n    var STYLES, ctx, CanvasGradient, CanvasPattern, namedEntities;\n\n    //helper function to format a string\n    function format(str, args) {\n        var keys = Object.keys(args), i;\n        for (i=0; i<keys.length; i++) {\n            str = str.replace(new RegExp(\"\\\\{\" + keys[i] + \"\\\\}\", \"gi\"), args[keys[i]]);\n        }\n        return str;\n    }\n\n    //helper function that generates a random string\n    function randomString(holder) {\n        var chars, randomstring, i;\n        if (!holder) {\n            throw new Error(\"cannot create a random attribute name for an undefined object\");\n        }\n        chars = \"ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz\";\n        randomstring = \"\";\n        do {\n            randomstring = \"\";\n            for (i = 0; i < 12; i++) {\n                randomstring += chars[Math.floor(Math.random() * chars.length)];\n            }\n        } while (holder[randomstring]);\n        return randomstring;\n    }\n\n    //helper function to map named to numbered entities\n    function createNamedToNumberedLookup(items, radix) {\n        var i, entity, lookup = {}, base10, base16;\n        items = items.split(',');\n        radix = radix || 10;\n        // Map from named to numbered entities.\n        for (i = 0; i < items.length; i += 2) {\n            entity = '&' + items[i + 1] + ';';\n            base10 = parseInt(items[i], radix);\n            lookup[entity] = '&#'+base10+';';\n        }\n        //FF and IE need to create a regex from hex values ie &nbsp; == \\xa0\n        lookup[\"\\\\xa0\"] = '&#160;';\n        return lookup;\n    }\n\n    //helper function to map canvas-textAlign to svg-textAnchor\n    function getTextAnchor(textAlign) {\n        //TODO: support rtl languages\n        var mapping = {\"left\":\"start\", \"right\":\"end\", \"center\":\"middle\", \"start\":\"start\", \"end\":\"end\"};\n        return mapping[textAlign] || mapping.start;\n    }\n\n    //helper function to map canvas-textBaseline to svg-dominantBaseline\n    function getDominantBaseline(textBaseline) {\n        //INFO: not supported in all browsers\n        var mapping = {\"alphabetic\": \"alphabetic\", \"hanging\": \"hanging\", \"top\":\"text-before-edge\", \"bottom\":\"text-after-edge\", \"middle\":\"central\"};\n        return mapping[textBaseline] || mapping.alphabetic;\n    }\n\n    // Unpack entities lookup where the numbers are in radix 32 to reduce the size\n    // entity mapping courtesy of tinymce\n    namedEntities = createNamedToNumberedLookup(\n        '50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' +\n            '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' +\n            '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' +\n            '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' +\n            '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' +\n            '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' +\n            '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' +\n            '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' +\n            '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' +\n            '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' +\n            'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' +\n            'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' +\n            't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' +\n            'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' +\n            'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' +\n            '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' +\n            '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' +\n            '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' +\n            '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' +\n            '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' +\n            'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' +\n            'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' +\n            'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' +\n            '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' +\n            '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);\n\n\n    //Some basic mappings for attributes and default values.\n    STYLES = {\n        \"strokeStyle\":{\n            svgAttr : \"stroke\", //corresponding svg attribute\n            canvas : \"#000000\", //canvas default\n            svg : \"none\",       //svg default\n            apply : \"stroke\"    //apply on stroke() or fill()\n        },\n        \"fillStyle\":{\n            svgAttr : \"fill\",\n            canvas : \"#000000\",\n            svg : null, //svg default is black, but we need to special case this to handle canvas stroke without fill\n            apply : \"fill\"\n        },\n        \"lineCap\":{\n            svgAttr : \"stroke-linecap\",\n            canvas : \"butt\",\n            svg : \"butt\",\n            apply : \"stroke\"\n        },\n        \"lineJoin\":{\n            svgAttr : \"stroke-linejoin\",\n            canvas : \"miter\",\n            svg : \"miter\",\n            apply : \"stroke\"\n        },\n        \"miterLimit\":{\n            svgAttr : \"stroke-miterlimit\",\n            canvas : 10,\n            svg : 4,\n            apply : \"stroke\"\n        },\n        \"lineWidth\":{\n            svgAttr : \"stroke-width\",\n            canvas : 1,\n            svg : 1,\n            apply : \"stroke\"\n        },\n        \"globalAlpha\": {\n            svgAttr : \"opacity\",\n            canvas : 1,\n            svg : 1,\n            apply : \"fill stroke\"\n        },\n        \"font\":{\n            //font converts to multiple svg attributes, there is custom logic for this\n            canvas : \"10px sans-serif\"\n        },\n        \"shadowColor\":{\n            canvas : \"#000000\"\n        },\n        \"shadowOffsetX\":{\n            canvas : 0\n        },\n        \"shadowOffsetY\":{\n            canvas : 0\n        },\n        \"shadowBlur\":{\n            canvas : 0\n        },\n        \"textAlign\":{\n            canvas : \"start\"\n        },\n        \"textBaseline\":{\n            canvas : \"alphabetic\"\n        }\n    };\n\n    /**\n     *\n     * @param gradientNode - reference to the gradient\n     * @constructor\n     */\n    CanvasGradient = function(gradientNode, ctx) {\n        this.__root = gradientNode;\n        this.__ctx = ctx;\n    };\n\n    /**\n     * Adds a color stop to the gradient root\n     */\n    CanvasGradient.prototype.addColorStop = function(offset, color) {\n        var stop = this.__ctx.__createElement(\"stop\"), regex, matches;\n        stop.setAttribute(\"offset\", offset);\n        if(color.indexOf(\"rgba\") !== -1) {\n            //separate alpha value, since webkit can't handle it\n            regex = /rgba\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d?\\.?\\d*)\\s*\\)/gi;\n            matches = regex.exec(color);\n            stop.setAttribute(\"stop-color\", format(\"rgb({r},{g},{b})\", {r:matches[1], g:matches[2], b:matches[3]}));\n            stop.setAttribute(\"stop-opacity\", matches[4]);\n        } else {\n            stop.setAttribute(\"stop-color\", color);\n        }\n        this.__root.appendChild(stop);\n    };\n\n    CanvasPattern = function(pattern, ctx) {\n        this.__root = pattern;\n        this.__ctx = ctx;\n    };\n\n    /**\n     * The mock canvas context\n     * @param o - options include:\n     * width - width of your canvas (defaults to 500)\n     * height - height of your canvas (defaults to 500)\n     * enableMirroring - enables canvas mirroring (get image data) (defaults to false)\n     * document - the document object (defaults to the current document)\n     */\n    ctx = function(o) {\n\n        var defaultOptions = { width:500, height:500, enableMirroring : false}, options;\n\n        //keep support for this way of calling C2S: new C2S(width,height)\n        if(arguments.length > 1) {\n            options = defaultOptions;\n            options.width = arguments[0];\n            options.height = arguments[1];\n        } else if( !o ) {\n            options = defaultOptions;\n        } else {\n            options = o;\n        }\n\n        if(!(this instanceof ctx)) {\n            //did someone call this without new?\n            return new ctx(options);\n        }\n\n        //setup options\n        this.width = options.width || defaultOptions.width;\n        this.height = options.height || defaultOptions.height;\n        this.enableMirroring = options.enableMirroring !== undefined ? options.enableMirroring : defaultOptions.enableMirroring;\n\n        this.canvas = this;   ///point back to this instance!\n        this.__document = options.document || document;\n        this.__canvas = this.__document.createElement(\"canvas\");\n        this.__ctx = this.__canvas.getContext(\"2d\");\n\n        this.__setDefaultStyles();\n        this.__stack = [this.__getStyleState()];\n        this.__groupStack = [];\n\n        //the root svg element\n        this.__root = this.__document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n        this.__root.setAttribute(\"version\", 1.1);\n        this.__root.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n        this.__root.setAttributeNS(\"http://www.w3.org/2000/xmlns/\", \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\");\n        this.__root.setAttribute(\"width\", this.width);\n        this.__root.setAttribute(\"height\", this.height);\n\n        //make sure we don't generate the same ids in defs\n        this.__ids = {};\n\n        //defs tag\n        this.__defs = this.__document.createElementNS(\"http://www.w3.org/2000/svg\", \"defs\");\n        this.__root.appendChild(this.__defs);\n\n        //also add a group child. the svg element can't use the transform attribute\n        this.__currentElement = this.__document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        this.__root.appendChild(this.__currentElement);\n    };\n\n\n    /**\n     * Creates the specified svg element\n     * @private\n     */\n    ctx.prototype.__createElement = function (elementName, properties, resetFill) {\n        if (typeof properties === \"undefined\") {\n            properties = {};\n        }\n\n        var element = this.__document.createElementNS(\"http://www.w3.org/2000/svg\", elementName),\n            keys = Object.keys(properties), i, key;\n        if(resetFill) {\n            //if fill or stroke is not specified, the svg element should not display. By default SVG's fill is black.\n            element.setAttribute(\"fill\", \"none\");\n            element.setAttribute(\"stroke\", \"none\");\n        }\n        for(i=0; i<keys.length; i++) {\n            key = keys[i];\n            element.setAttribute(key, properties[key]);\n        }\n        return element;\n    };\n\n    /**\n     * Applies default canvas styles to the context\n     * @private\n     */\n    ctx.prototype.__setDefaultStyles = function() {\n        //default 2d canvas context properties see:http://www.w3.org/TR/2dcontext/\n        var keys = Object.keys(STYLES), i, key;\n        for(i=0; i<keys.length; i++) {\n            key = keys[i];\n            this[key] = STYLES[key].canvas;\n        }\n    };\n\n    /**\n     * Applies styles on restore\n     * @param styleState\n     * @private\n     */\n    ctx.prototype.__applyStyleState = function(styleState) {\n        var keys = Object.keys(styleState), i, key;\n        for(i=0; i<keys.length; i++) {\n            key = keys[i];\n            this[key] = styleState[key];\n        }\n    };\n\n    /**\n     * Gets the current style state\n     * @return {Object}\n     * @private\n     */\n    ctx.prototype.__getStyleState = function() {\n        var i, styleState = {}, keys = Object.keys(STYLES), key;\n        for(i=0; i<keys.length; i++) {\n            key = keys[i];\n            styleState[key] = this[key];\n        }\n        return styleState;\n    };\n\n    /**\n     * Apples the current styles to the current SVG element. On \"ctx.fill\" or \"ctx.stroke\"\n     * @param type\n     * @private\n     */\n    ctx.prototype.__applyStyleToCurrentElement = function(type) {\n        var keys = Object.keys(STYLES), i, style, value, id, regex, matches;\n        for(i=0; i<keys.length; i++) {\n            style = STYLES[keys[i]];\n            value = this[keys[i]];\n            if(style.apply) {\n                //is this a gradient or pattern?\n                if(style.apply.indexOf(\"fill\")!==-1 && value instanceof CanvasPattern) {\n                    //pattern\n                    if(value.__ctx) {\n                        //copy over defs\n                        while(value.__ctx.__defs.childNodes.length) {\n                            id = value.__ctx.__defs.childNodes[0].getAttribute(\"id\");\n                            this.__ids[id] = id;\n                            this.__defs.appendChild(value.__ctx.__defs.childNodes[0]);\n                        }\n                    }\n                    this.__currentElement.setAttribute(\"fill\", format(\"url(#{id})\", {id:value.__root.getAttribute(\"id\")}));\n                }\n                else if(style.apply.indexOf(\"fill\")!==-1 && value instanceof CanvasGradient) {\n                    //gradient\n                    this.__currentElement.setAttribute(\"fill\", format(\"url(#{id})\", {id:value.__root.getAttribute(\"id\")}));\n                } else if(style.apply.indexOf(type)!==-1 && style.svg !== value) {\n                    if((style.svgAttr === \"stroke\" || style.svgAttr === \"fill\") && value.indexOf(\"rgba\") !== -1) {\n                        //separate alpha value, since illustrator can't handle it\n                        regex = /rgba\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d?\\.?\\d*)\\s*\\)/gi;\n                        matches = regex.exec(value);\n                        this.__currentElement.setAttribute(style.svgAttr, format(\"rgb({r},{g},{b})\", {r:matches[1], g:matches[2], b:matches[3]}));\n                        this.__currentElement.setAttribute(style.svgAttr+\"-opacity\", matches[4]);\n                    } else {\n                        //otherwise only update attribute if right type, and not svg default\n                        this.__currentElement.setAttribute(style.svgAttr, value);\n                    }\n                }\n            }\n        }\n\n    };\n\n    /**\n     * Will return the closest group or svg node. May return the current element.\n     * @private\n     */\n    ctx.prototype.__closestGroupOrSvg = function(node) {\n        node = node || this.__currentElement;\n        if(node.nodeName === \"g\" || node.nodeName === \"svg\") {\n            return node;\n        } else {\n            return this.__closestGroupOrSvg(node.parentNode);\n        }\n    };\n\n    /**\n     * Returns the serialized value of the svg so far\n     * @param fixNamedEntities - Standalone SVG doesn't support named entities, which document.createTextNode encodes.\n     *                           If true, we attempt to find all named entities and encode it as a numeric entity.\n     * @return serialized svg\n     */\n    ctx.prototype.getSerializedSvg = function(fixNamedEntities) {\n        var serialized = new XMLSerializer().serializeToString(this.__root),\n            keys, i, key, value, regexp, xmlns;\n\n        //IE search for a duplicate xmnls because they didn't implement setAttributeNS correctly\n        xmlns = /xmlns=\"http:\\/\\/www\\.w3\\.org\\/2000\\/svg\".+xmlns=\"http:\\/\\/www\\.w3\\.org\\/2000\\/svg/gi;\n        if(xmlns.test(serialized)) {\n            serialized = serialized.replace('xmlns=\"http://www.w3.org/2000/svg','xmlns:xlink=\"http://www.w3.org/1999/xlink');\n        }\n\n        if(fixNamedEntities) {\n            keys = Object.keys(namedEntities);\n            //loop over each named entity and replace with the proper equivalent.\n            for(i=0; i<keys.length; i++) {\n                key = keys[i];\n                value = namedEntities[key];\n                regexp = new RegExp(key, \"gi\");\n                if(regexp.test(serialized)) {\n                    serialized = serialized.replace(regexp, value);\n                }\n            }\n        }\n\n        return serialized;\n    };\n\n\n    /**\n     * Returns the root svg\n     * @return\n     */\n    ctx.prototype.getSvg = function() {\n        return this.__root;\n    };\n    /**\n     * Will generate a group tag.\n     */\n    ctx.prototype.save = function() {\n        var group = this.__createElement(\"g\"), parent = this.__closestGroupOrSvg();\n        this.__groupStack.push(parent);\n        parent.appendChild(group);\n        this.__currentElement = group;\n        this.__stack.push(this.__getStyleState());\n    };\n    /**\n     * Sets current element to parent, or just root if already root\n     */\n    ctx.prototype.restore = function(){\n        this.__currentElement = this.__groupStack.pop();\n        var state = this.__stack.pop();\n        this.__applyStyleState(state);\n\n    };\n\n    /**\n     * Helper method to add transform\n     * @private\n     */\n    ctx.prototype.__addTransform = function(t) {\n\n        //if the current element has siblings, add another group\n        var parent = this.__closestGroupOrSvg();\n        if(parent.childNodes.length > 0) {\n            var group = this.__createElement(\"g\");\n            parent.appendChild(group);\n            this.__currentElement = group;\n        }\n\n        var transform = this.__currentElement.getAttribute(\"transform\");\n        if(transform) {\n            transform += \" \";\n        } else {\n            transform = \"\";\n        }\n        transform += t;\n        this.__currentElement.setAttribute(\"transform\", transform);\n    };\n\n    /**\n     *  scales the current element\n     */\n    ctx.prototype.scale = function(x, y) {\n        if(y === undefined) {\n            y = x;\n        }\n        this.__addTransform(format(\"scale({x},{y})\", {x:x, y:y}));\n    };\n\n    /**\n     * rotates the current element\n     */\n    ctx.prototype.rotate = function(angle){\n        var degrees = (angle * 180 / Math.PI);\n        this.__addTransform(format(\"rotate({angle},{cx},{cy})\", {angle:degrees, cx:0, cy:0}));\n    };\n\n    /**\n     * translates the current element\n     */\n    ctx.prototype.translate = function(x, y){\n        this.__addTransform(format(\"translate({x},{y})\", {x:x,y:y}));\n    };\n\n    /**\n     * applies a transform to the current element\n     */\n    ctx.prototype.transform = function(a, b, c, d, e, f){\n        this.__addTransform(format(\"matrix({a},{b},{c},{d},{e},{f})\", {a:a, b:b, c:c, d:d, e:e, f:f}));\n    };\n\n    /**\n     * Create a new Path Element\n     */\n    ctx.prototype.beginPath = function(){\n        var path, parent;\n\n        // Note that there is only one current default path, it is not part of the drawing state.\n        // See also: https://html.spec.whatwg.org/multipage/scripting.html#current-default-path\n        this.__currentDefaultPath = \"\";\n        this.__currentPosition = {};\n\n        path = this.__createElement(\"path\", {}, true);\n        parent = this.__closestGroupOrSvg();\n        parent.appendChild(path);\n        this.__currentElement = path;\n    };\n\n    /**\n     * Helper function to apply currentDefaultPath to current path element\n     * @private\n     */\n    ctx.prototype.__applyCurrentDefaultPath = function() {\n        if(this.__currentElement.nodeName === \"path\") {\n            var d = this.__currentDefaultPath;\n            this.__currentElement.setAttribute(\"d\", d);\n        } else {\n            throw new Error(\"Attempted to apply path command to node \" + this.__currentElement.nodeName);\n        }\n    };\n\n    /**\n     * Helper function to add path command\n     * @private\n     */\n    ctx.prototype.__addPathCommand = function(command){\n        this.__currentDefaultPath += \" \";\n        this.__currentDefaultPath += command;\n    };\n\n    /**\n     * Adds the move command to the current path element,\n     * if the currentPathElement is not empty create a new path element\n     */\n    ctx.prototype.moveTo = function(x,y){\n        if(this.__currentElement.nodeName !== \"path\") {\n            this.beginPath();\n        }\n\n        // creates a new subpath with the given point\n        this.__currentPosition = {x: x, y: y};\n        this.__addPathCommand(format(\"M {x} {y}\", {x:x, y:y}));\n    };\n\n    /**\n     * Closes the current path\n     */\n    ctx.prototype.closePath = function(){\n        this.__addPathCommand(\"Z\");\n    };\n\n    /**\n     * Adds a line to command\n     */\n    ctx.prototype.lineTo = function(x, y){\n        this.__currentPosition = {x: x, y: y};\n        if (this.__currentDefaultPath.indexOf('M') > -1) {\n            this.__addPathCommand(format(\"L {x} {y}\", {x:x, y:y}));\n        } else {\n            this.__addPathCommand(format(\"M {x} {y}\", {x:x, y:y}));\n        }\n    };\n\n    /**\n     * Add a bezier command\n     */\n    ctx.prototype.bezierCurveTo = function(cp1x, cp1y, cp2x, cp2y, x, y) {\n        this.__currentPosition = {x: x, y: y};\n        this.__addPathCommand(format(\"C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}\",\n            {cp1x:cp1x, cp1y:cp1y, cp2x:cp2x, cp2y:cp2y, x:x, y:y}));\n    };\n\n    /**\n     * Adds a quadratic curve to command\n     */\n    ctx.prototype.quadraticCurveTo = function(cpx, cpy, x, y){\n        this.__currentPosition = {x: x, y: y};\n        this.__addPathCommand(format(\"Q {cpx} {cpy} {x} {y}\", {cpx:cpx, cpy:cpy, x:x, y:y}));\n    };\n\n\n    /**\n     * Return a new normalized vector of given vector\n     */\n    var normalize = function(vector) {\n        var len = Math.sqrt(vector[0] * vector[0] + vector[1] * vector[1]);\n        return [vector[0] / len, vector[1] / len];\n    };\n\n    /**\n     * Adds the arcTo to the current path\n     *\n     * @see http://www.w3.org/TR/2015/WD-2dcontext-20150514/#dom-context-2d-arcto\n     */\n    ctx.prototype.arcTo = function(x1, y1, x2, y2, radius) {\n        // Let the point (x0, y0) be the last point in the subpath.\n        var x0 = this.__currentPosition && this.__currentPosition.x;\n        var y0 = this.__currentPosition && this.__currentPosition.y;\n\n        // First ensure there is a subpath for (x1, y1).\n        if (typeof x0 == \"undefined\" || typeof y0 == \"undefined\") {\n            return;\n        }\n\n        // Negative values for radius must cause the implementation to throw an IndexSizeError exception.\n        if (radius < 0) {\n            throw new Error(\"IndexSizeError: The radius provided (\" + radius + \") is negative.\");\n        }\n\n        // If the point (x0, y0) is equal to the point (x1, y1),\n        // or if the point (x1, y1) is equal to the point (x2, y2),\n        // or if the radius radius is zero,\n        // then the method must add the point (x1, y1) to the subpath,\n        // and connect that point to the previous point (x0, y0) by a straight line.\n        if (((x0 === x1) && (y0 === y1))\n            || ((x1 === x2) && (y1 === y2))\n            || (radius === 0)) {\n            this.lineTo(x1, y1);\n            return;\n        }\n\n        // Otherwise, if the points (x0, y0), (x1, y1), and (x2, y2) all lie on a single straight line,\n        // then the method must add the point (x1, y1) to the subpath,\n        // and connect that point to the previous point (x0, y0) by a straight line.\n        var unit_vec_p1_p0 = normalize([x0 - x1, y0 - y1]);\n        var unit_vec_p1_p2 = normalize([x2 - x1, y2 - y1]);\n        if (unit_vec_p1_p0[0] * unit_vec_p1_p2[1] === unit_vec_p1_p0[1] * unit_vec_p1_p2[0]) {\n            this.lineTo(x1, y1);\n            return;\n        }\n\n        // Otherwise, let The Arc be the shortest arc given by circumference of the circle that has radius radius,\n        // and that has one point tangent to the half-infinite line that crosses the point (x0, y0) and ends at the point (x1, y1),\n        // and that has a different point tangent to the half-infinite line that ends at the point (x1, y1), and crosses the point (x2, y2).\n        // The points at which this circle touches these two lines are called the start and end tangent points respectively.\n\n        // note that both vectors are unit vectors, so the length is 1\n        var cos = (unit_vec_p1_p0[0] * unit_vec_p1_p2[0] + unit_vec_p1_p0[1] * unit_vec_p1_p2[1]);\n        var theta = Math.acos(Math.abs(cos));\n\n        // Calculate origin\n        var unit_vec_p1_origin = normalize([\n            unit_vec_p1_p0[0] + unit_vec_p1_p2[0],\n            unit_vec_p1_p0[1] + unit_vec_p1_p2[1]\n        ]);\n        var len_p1_origin = radius / Math.sin(theta / 2);\n        var x = x1 + len_p1_origin * unit_vec_p1_origin[0];\n        var y = y1 + len_p1_origin * unit_vec_p1_origin[1];\n\n        // Calculate start angle and end angle\n        // rotate 90deg clockwise (note that y axis points to its down)\n        var unit_vec_origin_start_tangent = [\n            -unit_vec_p1_p0[1],\n            unit_vec_p1_p0[0]\n        ];\n        // rotate 90deg counter clockwise (note that y axis points to its down)\n        var unit_vec_origin_end_tangent = [\n            unit_vec_p1_p2[1],\n            -unit_vec_p1_p2[0]\n        ];\n        var getAngle = function(vector) {\n            // get angle (clockwise) between vector and (1, 0)\n            var x = vector[0];\n            var y = vector[1];\n            if (y >= 0) { // note that y axis points to its down\n                return Math.acos(x);\n            } else {\n                return -Math.acos(x);\n            }\n        };\n        var startAngle = getAngle(unit_vec_origin_start_tangent);\n        var endAngle = getAngle(unit_vec_origin_end_tangent);\n\n        // Connect the point (x0, y0) to the start tangent point by a straight line\n        this.lineTo(x + unit_vec_origin_start_tangent[0] * radius,\n                    y + unit_vec_origin_start_tangent[1] * radius);\n\n        // Connect the start tangent point to the end tangent point by arc\n        // and adding the end tangent point to the subpath.\n        this.arc(x, y, radius, startAngle, endAngle);\n    };\n\n    /**\n     * Sets the stroke property on the current element\n     */\n    ctx.prototype.stroke = function(){\n        if(this.__currentElement.nodeName === \"path\") {\n            this.__currentElement.setAttribute(\"paint-order\", \"fill stroke markers\");\n        }\n        this.__applyCurrentDefaultPath();\n        this.__applyStyleToCurrentElement(\"stroke\");\n    };\n\n    /**\n     * Sets fill properties on the current element\n     */\n    ctx.prototype.fill = function(){\n        if(this.__currentElement.nodeName === \"path\") {\n            this.__currentElement.setAttribute(\"paint-order\", \"stroke fill markers\");\n        }\n        this.__applyCurrentDefaultPath();\n        this.__applyStyleToCurrentElement(\"fill\");\n    };\n\n    /**\n     *  Adds a rectangle to the path.\n     */\n    ctx.prototype.rect = function(x, y, width, height){\n        if(this.__currentElement.nodeName !== \"path\") {\n            this.beginPath();\n        }\n        this.moveTo(x, y);\n        this.lineTo(x+width, y);\n        this.lineTo(x+width, y+height);\n        this.lineTo(x, y+height);\n        this.lineTo(x, y);\n        this.closePath();\n    };\n\n\n    /**\n     * adds a rectangle element\n     */\n    ctx.prototype.fillRect = function(x, y, width, height){\n        var rect, parent;\n        rect = this.__createElement(\"rect\", {\n            x : x,\n            y : y,\n            width : width,\n            height : height\n        }, true);\n        parent = this.__closestGroupOrSvg();\n        parent.appendChild(rect);\n        this.__currentElement = rect;\n        this.__applyStyleToCurrentElement(\"fill\");\n    };\n\n    /**\n     * Draws a rectangle with no fill\n     * @param x\n     * @param y\n     * @param width\n     * @param height\n     */\n    ctx.prototype.strokeRect = function(x, y, width, height){\n        var rect, parent;\n        rect = this.__createElement(\"rect\", {\n            x : x,\n            y : y,\n            width : width,\n            height : height\n        }, true);\n        parent = this.__closestGroupOrSvg();\n        parent.appendChild(rect);\n        this.__currentElement = rect;\n        this.__applyStyleToCurrentElement(\"stroke\");\n    };\n\n\n    /**\n     * \"Clears\" a canvas by just drawing a white rectangle in the current group.\n     */\n    ctx.prototype.clearRect = function(x, y, width, height) {\n        var rect, parent = this.__closestGroupOrSvg();\n        rect = this.__createElement(\"rect\", {\n            x : x,\n            y : y,\n            width : width,\n            height : height,\n            fill : \"#FFFFFF\"\n        }, true);\n        parent.appendChild(rect);\n    };\n\n    /**\n     * Adds a linear gradient to a defs tag.\n     * Returns a canvas gradient object that has a reference to it's parent def\n     */\n    ctx.prototype.createLinearGradient = function(x1, y1, x2, y2){\n        var grad = this.__createElement(\"linearGradient\", {\n            id : randomString(this.__ids),\n            x1 : x1+\"px\",\n            x2 : x2+\"px\",\n            y1 : y1+\"px\",\n            y2 : y2+\"px\",\n            \"gradientUnits\" : \"userSpaceOnUse\"\n        }, false);\n        this.__defs.appendChild(grad);\n        return new CanvasGradient(grad, this);\n    };\n\n    /**\n     * Adds a radial gradient to a defs tag.\n     * Returns a canvas gradient object that has a reference to it's parent def\n     */\n    ctx.prototype.createRadialGradient = function(x0, y0, r0, x1, y1, r1){\n        var grad = this.__createElement(\"radialGradient\", {\n            id : randomString(this.__ids),\n            cx : x1+\"px\",\n            cy : y1+\"px\",\n            r  : r1+\"px\",\n            fx : x0+\"px\",\n            fy : y0+\"px\",\n            \"gradientUnits\" : \"userSpaceOnUse\"\n        }, false);\n        this.__defs.appendChild(grad);\n        return new CanvasGradient(grad, this);\n\n    };\n\n    /**\n     * Parses the font string and returns svg mapping\n     * @private\n     */\n    ctx.prototype.__parseFont = function() {\n        var regex = /^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))(?:\\s*\\/\\s*(normal|[.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])))?\\s*([-,\\\"\\sa-z]+?)\\s*$/i;\n        var fontPart = regex.exec( this.font );\n        var data = {\n            style : fontPart[1] || 'normal',\n            size : fontPart[4] || '10px',\n            family : fontPart[6] || 'sans-serif',\n            weight: fontPart[3] || 'normal',\n            decoration : fontPart[2] || 'normal',\n            href : null\n        };\n\n        //canvas doesn't support underline natively, but we can pass this attribute\n        if(this.__fontUnderline === \"underline\") {\n            data.decoration = \"underline\";\n        }\n\n        //canvas also doesn't support linking, but we can pass this as well\n        if(this.__fontHref) {\n            data.href = this.__fontHref;\n        }\n\n        return data;\n    };\n\n    /**\n     * Helper to link text fragments\n     * @param font\n     * @param element\n     * @return {*}\n     * @private\n     */\n    ctx.prototype.__wrapTextLink = function(font, element) {\n        if(font.href) {\n            var a = this.__createElement(\"a\");\n            a.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"xlink:href\", font.href);\n            a.appendChild(element);\n            return a;\n        }\n        return element;\n    };\n\n    /**\n     * Fills or strokes text\n     * @param text\n     * @param x\n     * @param y\n     * @param action - stroke or fill\n     * @private\n     */\n    ctx.prototype.__applyText = function(text, x, y, action) {\n        var font = this.__parseFont(),\n            parent = this.__closestGroupOrSvg(),\n            textElement = this.__createElement(\"text\", {\n                \"font-family\" : font.family,\n                \"font-size\" : font.size,\n                \"font-style\" : font.style,\n                \"font-weight\" : font.weight,\n                \"text-decoration\" : font.decoration,\n                \"x\" : x,\n                \"y\" : y,\n                \"text-anchor\": getTextAnchor(this.textAlign),\n                \"dominant-baseline\": getDominantBaseline(this.textBaseline)\n            }, true);\n\n        textElement.appendChild(this.__document.createTextNode(text));\n        this.__currentElement = textElement;\n        this.__applyStyleToCurrentElement(action);\n        parent.appendChild(this.__wrapTextLink(font,textElement));\n    };\n\n    /**\n     * Creates a text element\n     * @param text\n     * @param x\n     * @param y\n     */\n    ctx.prototype.fillText = function(text, x, y){\n        this.__applyText(text, x, y, \"fill\");\n    };\n\n    /**\n     * Strokes text\n     * @param text\n     * @param x\n     * @param y\n     */\n    ctx.prototype.strokeText = function(text, x, y){\n        this.__applyText(text, x, y, \"stroke\");\n    };\n\n    /**\n     * No need to implement this for svg.\n     * @param text\n     * @return {TextMetrics}\n     */\n    ctx.prototype.measureText = function(text){\n        this.__ctx.font = this.font;\n        return this.__ctx.measureText(text);\n    };\n\n    /**\n     *  Arc command!\n     */\n    ctx.prototype.arc = function(x, y, radius, startAngle, endAngle, counterClockwise) {\n        // in canvas no circle is drawn if no angle is provided.\n        if (startAngle === endAngle) {\n            return;\n        }\n        startAngle = startAngle % (2*Math.PI);\n        endAngle = endAngle % (2*Math.PI);\n        if(startAngle === endAngle) {\n            //circle time! subtract some of the angle so svg is happy (svg elliptical arc can't draw a full circle)\n            endAngle = ((endAngle + (2*Math.PI)) - 0.001 * (counterClockwise ? -1 : 1)) % (2*Math.PI);\n        }\n        var endX = x+radius*Math.cos(endAngle),\n            endY = y+radius*Math.sin(endAngle),\n            startX = x+radius*Math.cos(startAngle),\n            startY = y+radius*Math.sin(startAngle),\n            sweepFlag = counterClockwise ? 0 : 1,\n            largeArcFlag = 0,\n            diff = endAngle - startAngle;\n\n        // https://github.com/gliffy/canvas2svg/issues/4\n        if(diff < 0) {\n            diff += 2*Math.PI;\n        }\n\n        if(counterClockwise) {\n            largeArcFlag = diff > Math.PI ? 0 : 1;\n        } else {\n            largeArcFlag = diff > Math.PI ? 1 : 0;\n        }\n\n        this.lineTo(startX, startY);\n        this.__addPathCommand(format(\"A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}\",\n            {rx:radius, ry:radius, xAxisRotation:0, largeArcFlag:largeArcFlag, sweepFlag:sweepFlag, endX:endX, endY:endY}));\n\n        this.__currentPosition = {x: endX, y: endY};\n    };\n\n    /**\n     * Generates a ClipPath from the clip command.\n     */\n    ctx.prototype.clip = function(){\n        var group = this.__closestGroupOrSvg(),\n            clipPath = this.__createElement(\"clipPath\"),\n            id =  randomString(this.__ids),\n            newGroup = this.__createElement(\"g\");\n\n        group.removeChild(this.__currentElement);\n        clipPath.setAttribute(\"id\", id);\n        clipPath.appendChild(this.__currentElement);\n\n        this.__defs.appendChild(clipPath);\n\n        //set the clip path to this group\n        group.setAttribute(\"clip-path\", format(\"url(#{id})\", {id:id}));\n\n        //clip paths can be scaled and transformed, we need to add another wrapper group to avoid later transformations\n        // to this path\n        group.appendChild(newGroup);\n\n        this.__currentElement = newGroup;\n\n    };\n\n    /**\n     * Draws a canvas, image or mock context to this canvas.\n     * Note that all svg dom manipulation uses node.childNodes rather than node.children for IE support.\n     * http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-drawimage\n     */\n    ctx.prototype.drawImage = function(){\n        //convert arguments to a real array\n        var args = Array.prototype.slice.call(arguments),\n            image=args[0],\n            dx, dy, dw, dh, sx=0, sy=0, sw, sh, parent, svg, defs, group,\n            currentElement, svgImage, canvas, context, id;\n\n        if(args.length === 3) {\n            dx = args[1];\n            dy = args[2];\n            sw = image.width;\n            sh = image.height;\n            dw = sw;\n            dh = sh;\n        } else if(args.length === 5) {\n            dx = args[1];\n            dy = args[2];\n            dw = args[3];\n            dh = args[4];\n            sw = image.width;\n            sh = image.height;\n        } else if(args.length === 9) {\n            sx = args[1];\n            sy = args[2];\n            sw = args[3];\n            sh = args[4];\n            dx = args[5];\n            dy = args[6];\n            dw = args[7];\n            dh = args[8];\n        } else {\n            throw new Error(\"Inavlid number of arguments passed to drawImage: \" + arguments.length);\n        }\n\n        parent = this.__closestGroupOrSvg();\n        currentElement = this.__currentElement;\n\n        if(image instanceof ctx) {\n            //canvas2svg mock canvas context. In the future we may want to clone nodes instead.\n            //also I'm currently ignoring dw, dh, sw, sh, sx, sy for a mock context.\n            svg = image.getSvg();\n            defs = svg.childNodes[0];\n            while(defs.childNodes.length) {\n                id = defs.childNodes[0].getAttribute(\"id\");\n                this.__ids[id] = id;\n                this.__defs.appendChild(defs.childNodes[0]);\n            }\n            group = svg.childNodes[1];\n            parent.appendChild(group);\n            this.__currentElement = group;\n            this.translate(dx, dy);\n            this.__currentElement = currentElement;\n        } else if(image.nodeName === \"CANVAS\" || image.nodeName === \"IMG\") {\n            //canvas or image\n            svgImage = this.__createElement(\"image\");\n            svgImage.setAttribute(\"width\", dw);\n            svgImage.setAttribute(\"height\", dh);\n            svgImage.setAttribute(\"preserveAspectRatio\", \"none\");\n\n            if(sx || sy || sw !== image.width || sh !== image.height) {\n                //crop the image using a temporary canvas\n                canvas = this.__document.createElement(\"canvas\");\n                canvas.width = dw;\n                canvas.height = dh;\n                context = canvas.getContext(\"2d\");\n                context.drawImage(image, sx, sy, sw, sh, 0, 0, dw, dh);\n                image = canvas;\n            }\n\n            svgImage.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"xlink:href\",\n                image.nodeName === \"CANVAS\" ? image.toDataURL() : image.getAttribute(\"src\"));\n            parent.appendChild(svgImage);\n            this.__currentElement = svgImage;\n            this.translate(dx, dy);\n            this.__currentElement = currentElement;\n        }\n    };\n\n    /**\n     * Generates a pattern tag\n     */\n    ctx.prototype.createPattern = function(image, repetition){\n        var pattern = this.__document.createElementNS(\"http://www.w3.org/2000/svg\", \"pattern\"), id = randomString(this.__ids),\n            img;\n        pattern.setAttribute(\"id\", id);\n        pattern.setAttribute(\"width\", image.width);\n        pattern.setAttribute(\"height\", image.height);\n        if(image.nodeName === \"CANVAS\" || image.nodeName === \"IMG\") {\n            img = this.__document.createElementNS(\"http://www.w3.org/2000/svg\", \"image\");\n            img.setAttribute(\"width\", image.width);\n            img.setAttribute(\"height\", image.height);\n            img.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"xlink:href\",\n                image.nodeName === \"CANVAS\" ? image.toDataURL() : image.getAttribute(\"src\"));\n            pattern.appendChild(img);\n            this.__defs.appendChild(pattern);\n        } else if(image instanceof ctx) {\n            pattern.appendChild(image.__root.childNodes[1]);\n            this.__defs.appendChild(pattern);\n        }\n        return new CanvasPattern(pattern, this);\n    };\n\n    /**\n     * Not yet implemented\n     */\n    ctx.prototype.drawFocusRing = function(){};\n    ctx.prototype.createImageData = function(){};\n    ctx.prototype.getImageData = function(){};\n    ctx.prototype.putImageData = function(){};\n    ctx.prototype.globalCompositeOperation = function(){};\n    ctx.prototype.setTransform = function(){};\n\n    //add options for alternative namespace\n    if (typeof window === \"object\") {\n        window.C2S = ctx;\n    }\n\n    // CommonJS/Browserify\n    if (typeof module === \"object\" && typeof module.exports === \"object\") {\n        module.exports = ctx;\n    }\n\n}());\n","(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(b,c,d){var e=new XMLHttpRequest;e.open(\"GET\",b),e.responseType=\"blob\",e.onload=function(){a(e.response,c,d)},e.onerror=function(){console.error(\"could not download file\")},e.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(a,b,d,e){if(e=e||open(\"\",\"_blank\"),e&&(e.document.title=e.document.body.innerText=\"downloading...\"),\"string\"==typeof a)return c(a,b,d);var g=\"application/octet-stream\"===a.type,h=/constructor/i.test(f.HTMLElement)||f.safari,i=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((i||g&&h)&&\"object\"==typeof FileReader){var j=new FileReader;j.onloadend=function(){var a=j.result;a=i?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),e?e.location.href=a:location=a,e=null},j.readAsDataURL(a)}else{var k=f.URL||f.webkitURL,l=k.createObjectURL(a);e?e.location=l:location.href=l,e=null,setTimeout(function(){k.revokeObjectURL(l)},4E4)}});f.saveAs=a.saveAs=a,\"undefined\"!=typeof module&&(module.exports=a)});\n\n//# sourceMappingURL=FileSaver.min.js.map","import Canvas from 'canvas2svg'\nimport FileSaver from 'file-saver'\n\nimport drawBackground from '../utils/draw-background'\n\n/* global Blob */\n\nexport default class SVGCanvas {\n  constructor (width, height, canvas) {\n    if (!width || !height) {\n      throw new Error('You must specify a width and a height')\n    }\n\n    this.width = width\n    this.height = height\n    this.canvas = canvas\n\n    if (this.canvas) {\n      this.canvas.width = this.width\n      this.canvas.height = this.height\n      this.canvas.style.width = this.width + 'px'\n      this.canvas.style.height = this.height + 'px'\n    }\n\n    this.ctx = this.canvas\n      ? this.canvas.getContext('2d')\n      : new Canvas(width, height)\n    this.ctx.isSVG = !this.canvas\n\n    // NOTE: canvas2svg uses context[save|restore] to handle svg grouping\n    // Theses aliases are designed to improve code readability\n    this.ctx.beginSVGGroup = this.ctx.save\n    this.ctx.endSVGGroup = this.ctx.restore\n    this.ctx.group = fn => {\n      this.ctx.isSVG && this.ctx.beginSVGGroup()\n      fn()\n      this.ctx.isSVG && this.ctx.endSVGGroup()\n    }\n  }\n\n  get context () { return this.ctx }\n\n  get svg () { return this.ctx.getSvg() }\n  get serializedSvg () { return this.ctx.getSerializedSvg(true) }\n\n  async toBlob (type) {\n    if (!type) type = this.ctx.isSVG ? 'image/svg+xml' : 'image/png'\n\n    if (!SVGCanvas.isSupportedMimeType(type)) {\n      throw new Error(`Invalid or unsupported mime type.\\nSupported mime types are: ${SVGCanvas.SUPPORTED_MIME_TYPES}`)\n    }\n\n    if (type === 'image/svg+xml' && !this.ctx.isSVG) {\n      throw new Error(`image/svg+xml mime type is not compatible with the current context.`)\n    }\n\n    return (type === 'image/svg+xml')\n      ? new Blob([this.serializedSvg], { type: 'image/svg+xml;charset=utf-8' })\n      : new Promise(resolve => this.canvas.toBlob(resolve, type))\n  }\n\n  didMount () {}\n\n  mount (parent, sibling = null) {\n    if (!parent || this.mounted) return\n\n    this.parent = parent\n    this.el = this.canvas || this.svg\n\n    if (sibling) this.parent.insertBefore(this.el, sibling)\n    else this.parent.appendChild(this.el)\n\n    this.mounted = true\n    this.didMount(this.el)\n  }\n\n  background (color) {\n    drawBackground(0, 0, this.width, this.height, { color, ctx: this.ctx })\n  }\n\n  copy (canvas = document.createElement('canvas')) {\n    if (this.ctx.isSVG) throw new Error('Copying canvas with SVG context is not supported yet')\n\n    canvas.width = this.width\n    canvas.height = this.height\n    const ctx = canvas.getContext('2d')\n\n    ctx.drawImage(this.canvas, 0, 0)\n    return canvas\n  }\n\n  clear () {\n    if (!this.ctx.isSVG) this.ctx.clearRect(0, 0, this.width, this.height)\n    else {\n      if (!this.mounted) return\n      this.el.querySelector('g').innerHTML = ''\n    }\n  }\n\n  static get SUPPORTED_MIME_TYPES () {\n    return [\n      'image/png',\n      'image/jpeg',\n      'image/svg+xml'\n    ]\n  }\n\n  static isSupportedMimeType (type) {\n    return SVGCanvas.SUPPORTED_MIME_TYPES.includes(type)\n  }\n\n  async save (filename = Date.now(), { type = 'image/png' } = {}) {\n    if (!SVGCanvas.isSupportedMimeType(type)) {\n      throw new Error(`Invalid or unsupported mime type.\\nSupported mime types are: ${SVGCanvas.SUPPORTED_MIME_TYPES}`)\n    }\n\n    const blob = await this.toBlob(type)\n    return FileSaver.saveAs(blob, filename)\n  }\n}\n","import SVGCanvas from '../abstractions/SVGCanvas'\n\nexport default class Landscape extends SVGCanvas {\n  constructor (grounds, {\n    canvas = null,\n    backgroundColor = 'transparent'\n  } = {}) {\n    super(grounds[0].width, grounds[0].height, canvas)\n\n    this.backgroundColor = backgroundColor\n    this.grounds = grounds\n  }\n\n  get grounds () { return this._grounds }\n  set grounds (grounds) {\n    let foregrounds = []\n    this._grounds = grounds.map((ground, index) => {\n      ground.setBehind(foregrounds)\n      if (ground.isEmpty) return null\n\n      foregrounds.push(ground)\n\n      if (!this.ctx.isSVG) {\n        ground.createSprite(this.ctx)\n      }\n\n      return ground\n    }).filter(Boolean)\n  }\n\n  render (ctx = this.ctx) {\n    super.background(this.backgroundColor)\n\n    this.grounds.forEach((ground, index) => {\n      if (ground.sprite) ctx.drawImage(ground.sprite, 0, 0)\n      else ground.render(ctx)\n    })\n\n    return this\n  }\n\n  ensureSVGContext () {\n    return this.ctx.isSVG\n      ? this\n      : new Landscape(this.grounds, {\n        canvas: null,\n        backgroundColor: this.backgroundColor\n      }).render()\n  }\n\n  save (filename, { type } = {}) {\n    return (type === 'image/svg+xml' && !this.ctx.isSVG)\n      ? this.ensureSVGContext().save(filename, { type })\n      : super.save(filename, { type })\n  }\n}\n","import tumult from 'tumult'\nimport { normalize } from 'missing-math'\n\nexport default class Line {\n  // IMPORTANT: equation() should return a normalized value\n  constructor (equation = x => 0.5) {\n    this._equation = equation\n    this.points = []\n  }\n\n  compute (x, { force = false } = {}) {\n    if (force || this.points[x] === undefined) {\n      this.points[x] = this._equation(x)\n    }\n\n    return this.points[x]\n  }\n\n  static perlin ({\n    seed = null,\n    octaves = 2,\n    lacunarity = 2,\n    gain = 0.5,\n    resolution = 32\n  } = {}) {\n    const noise = new tumult.Perlin1(seed).transform(function (v) {\n      return normalize(this.gen(v / resolution), -1, 1)\n    })\n\n    return x => {\n      let y = 0\n      let amplitude = 0.5\n      let frequency = 1.0\n\n      for (let i = 0; i < octaves; i++) {\n        y += amplitude * noise(frequency * x)\n        frequency *= lacunarity\n        amplitude *= gain\n      }\n\n      return Math.sin(y)\n    }\n  }\n\n  static simplex ({\n    seed = null,\n    octaves = 2\n  } = {}) {\n    const frequency = Math.pow(2, octaves)\n    return new tumult.Simplex1(seed).transform(function (v) {\n      return (Math.sin(1 / this.gen(v / frequency)) + 1) / 2\n    })\n  }\n}\n","export default (arr, rng = Math.random) => arr[Math.floor(rng() * arr.length)]\n","function random(seed) {\n\tfunction _seed(s) {\n\t\tif ((seed = (s|0) % 2147483647) <= 0) {\n\t\t\tseed += 2147483646;\n\t\t}\n\t}\n\n\tfunction _nextInt() {\n\t\treturn seed = seed * 48271 % 2147483647;\n\t}\n\n\tfunction _nextFloat() {\n\t\treturn (_nextInt() - 1) / 2147483646;\n\t}\n\n\t_seed(seed);\n\n\treturn {\n\t\tseed: _seed,\n\t\tnextInt: _nextInt,\n\t\tnextFloat: _nextFloat\n\t};\n}\n\nmodule.exports = random;\n","'use strict'\n\n/**\n * Core of the raf package\n * @module raf\n * @type {Object}\n * @example\n * import { raf } from '@internet/raf'\n *\n * function tick (dt) {\n *  console.log('called on new frame')\n * }\n *\n * raf.add(tick)\n */\n\nvar root = typeof window === 'undefined' ? global : window\nvar _observers = []\nvar _afterObservers = []\nvar _beforeObservers = []\nvar _rafHandler = null\nvar _lastDate = null\nvar _once = false\nvar _complex = false\n\n/**\n * Time elapsed between the previous and the current frame\n * @type {number}\n * @static\n * @category properties\n */\nvar time\n\n/**\n * Current delta time\n * @type {number}\n * @static\n * @category properties\n */\nvar dt\n\nfunction _frame (timestamp) {\n  // compute deltatime and time\n  if (timestamp === void 0) timestamp = 0\n  if (_lastDate === null) _lastDate = timestamp\n  dt = timestamp - _lastDate\n  time += dt\n  _lastDate = timestamp\n  // we request the frame now, allowing to cancel it from observers\n  _rafHandler = _once ? null : root.requestAnimationFrame(_frame)\n  if (_once) _once = false\n  // call all observers\n  var i\n  if (_complex) {\n    for (i = 0; i < _beforeObservers.length; i++) _beforeObservers[i](dt)\n    for (i = 0; i < _observers.length; i++) _observers[i](dt)\n    for (i = 0; i < _afterObservers.length; i++) _afterObservers[i](dt)\n  } else {\n    for (i = 0; i < _observers.length; i++) _observers[i](dt)\n  }\n}\n\nfunction _swapRunner () {\n  _complex = !!(_afterObservers.length > 0 || _beforeObservers.length > 0)\n}\n\nfunction _addObserver (arr, fn, prepend) {\n  if (!fn || !arr) return false\n  if (~arr.indexOf(fn)) return false\n  prepend = !!prepend\n  prepend ? arr.unshift(fn) : arr.push(fn)\n  return true\n}\n\nfunction _removeObserver (arr, fn) {\n  if (!fn) return false\n  var index = arr.indexOf(fn)\n  if (!~index) return false\n  arr.splice(index, 1)\n  return !!(arr.length === 0)\n}\n\n/**\n * Add a function for execution at the beginning of the raf call\n * Calling addBefore will not start the raf.\n * @param {function} fn Function to be called at the start of the raf\n * @param {function} [prepend=false] Prepend the function to the beginning of the functions list\n * @static\n * @category methods\n */\nfunction addBefore (fn, prepend) {\n  _addObserver(_beforeObservers, fn, prepend) && _swapRunner()\n}\n\n/**\n * Add a function for execution at the end of the raf call\n * Calling addAfter will not start the raf.\n * @param {function} fn Function to be called at the end of the raf\n * @param {function} [prepend=false] Prepend the function to the beginning of the functions list\n * @static\n * @category methods\n */\nfunction addAfter (fn, prepend) {\n  _addObserver(_afterObservers, fn, prepend) && _swapRunner()\n}\n\n/**\n * Add a function for execution on each frame\n * @param {function} fn Function to be called\n * @param {function} [prepend=false] Prepend the function to the beginning of the functions list\n * @static\n * @category methods\n */\nfunction add (fn, prepend) {\n  _addObserver(_observers, fn, prepend) && start()\n}\n\n/**\n * Remove a function for execution at the beginning of the raf call\n * Calling removeBefore will not stop the raf.\n * @param {function} fn Function to remove from the raf\n * @static\n * @category methods\n */\nfunction removeBefore (fn) {\n  _removeObserver(_beforeObservers, fn) && _swapRunner()\n}\n\n/**\n * Remove a function for execution at the end of the raf call\n * Calling removeAfter will not stop the raf.\n * @param {function} fn Function to remove from the raf\n * @param {function} [prepend=false] Prepend the function to the beginning of the functions list\n * @static\n * @category methods\n */\nfunction removeAfter (fn, prepend) {\n  _removeObserver(_afterObservers, fn) && _swapRunner()\n}\n\n/**\n * Remove a function for execution on each frame\n * @param {function} fn Function to remove from the raf\n * @static\n * @category methods\n */\nfunction remove (fn) {\n  _removeObserver(_observers, fn) && stop()\n}\n\n/**\n * Force start the raf. You usually don't need to use it.\n * @param {boolean} [instant=false] Directly make a raf call without waiting for the next frame (default false)\n * @static\n * @category methods\n */\nfunction start (instant) {\n  _once = false\n  if (_rafHandler) return\n  instant = !!instant\n  _lastDate = null\n  if (instant) _frame()\n  else _rafHandler = root.requestAnimationFrame(_frame)\n}\n\n/**\n * Request once the raf. Will not be executed if the raf is already running.\n * @static\n * @category methods\n */\nfunction requestOnce () {\n  if (_rafHandler) return\n  _once = true\n  _lastDate = null\n  _rafHandler = root.requestAnimationFrame(_frame)\n}\n\n/**\n * Force stop the raf. You usually don't need to use it.\n * @static\n * @category methods\n */\nfunction stop () {\n  if (!_rafHandler) return\n  root.cancelAnimationFrame(_rafHandler)\n  _rafHandler = null\n}\n\n/**\n * Remove all observers from the raf singleton and stop the raf if it's running. Reset time.\n * @static\n * @category methods\n */\nfunction dispose () {\n  stop()\n  _observers.length = 0\n  _afterObservers.length = 0\n  _beforeObservers.length = 0\n  _complex = false\n  _lastDate = null\n  time = 0\n  dt = 0\n}\n\nexport default {\n  add: add,\n  addAfter: addAfter,\n  addBefore: addBefore,\n  remove: remove,\n  removeAfter: removeAfter,\n  removeBefore: removeBefore,\n  start: start,\n  stop: stop,\n  time: time,\n  dt: dt,\n  requestOnce: requestOnce,\n  dispose: dispose\n}\n","import fastRandom from 'fast-random'\nimport arrayRandom from '../utils/array-random'\n\nlet seed = Date.now()\nlet randomizer = fastRandom(seed)\n\nexport default {\n  // NOTE: seed must be an integer\n  set seed (newSeed) {\n    seed = newSeed\n    randomizer = fastRandom(seed)\n  },\n\n  get seed () {\n    return seed\n  },\n\n  reset: () => {\n    randomizer = fastRandom(seed)\n  },\n\n  random: () => randomizer.nextFloat(),\n  randomOf: arr => arrayRandom(arr, randomizer.nextFloat),\n  randomFloat: (min, max) => randomizer.nextFloat() * (max - min) + min,\n  randomInt: (min, max) => Math.floor(randomizer.nextFloat() * (max - min) + min)\n}\n","/*\n * anime.js v3.0.1\n * (c) 2019 Julian Garnier\n * Released under the MIT license\n * animejs.com\n */\n\n// Defaults\n\nvar defaultInstanceSettings = {\n  update: null,\n  begin: null,\n  loopBegin: null,\n  changeBegin: null,\n  change: null,\n  changeComplete: null,\n  loopComplete: null,\n  complete: null,\n  loop: 1,\n  direction: 'normal',\n  autoplay: true,\n  timelineOffset: 0\n};\n\nvar defaultTweenSettings = {\n  duration: 1000,\n  delay: 0,\n  endDelay: 0,\n  easing: 'easeOutElastic(1, .5)',\n  round: 0\n};\n\nvar validTransforms = ['translateX', 'translateY', 'translateZ', 'rotate', 'rotateX', 'rotateY', 'rotateZ', 'scale', 'scaleX', 'scaleY', 'scaleZ', 'skew', 'skewX', 'skewY', 'perspective'];\n\n// Caching\n\nvar cache = {\n  CSS: {},\n  springs: {}\n};\n\n// Utils\n\nfunction minMax(val, min, max) {\n  return Math.min(Math.max(val, min), max);\n}\n\nfunction stringContains(str, text) {\n  return str.indexOf(text) > -1;\n}\n\nfunction applyArguments(func, args) {\n  return func.apply(null, args);\n}\n\nvar is = {\n  arr: function (a) { return Array.isArray(a); },\n  obj: function (a) { return stringContains(Object.prototype.toString.call(a), 'Object'); },\n  pth: function (a) { return is.obj(a) && a.hasOwnProperty('totalLength'); },\n  svg: function (a) { return a instanceof SVGElement; },\n  inp: function (a) { return a instanceof HTMLInputElement; },\n  dom: function (a) { return a.nodeType || is.svg(a); },\n  str: function (a) { return typeof a === 'string'; },\n  fnc: function (a) { return typeof a === 'function'; },\n  und: function (a) { return typeof a === 'undefined'; },\n  hex: function (a) { return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a); },\n  rgb: function (a) { return /^rgb/.test(a); },\n  hsl: function (a) { return /^hsl/.test(a); },\n  col: function (a) { return (is.hex(a) || is.rgb(a) || is.hsl(a)); },\n  key: function (a) { return !defaultInstanceSettings.hasOwnProperty(a) && !defaultTweenSettings.hasOwnProperty(a) && a !== 'targets' && a !== 'keyframes'; }\n};\n\n// Easings\n\nfunction parseEasingParameters(string) {\n  var match = /\\(([^)]+)\\)/.exec(string);\n  return match ? match[1].split(',').map(function (p) { return parseFloat(p); }) : [];\n}\n\n// Spring solver inspired by Webkit Copyright  2016 Apple Inc. All rights reserved. https://webkit.org/demos/spring/spring.js\n\nfunction spring(string, duration) {\n\n  var params = parseEasingParameters(string);\n  var mass = minMax(is.und(params[0]) ? 1 : params[0], .1, 100);\n  var stiffness = minMax(is.und(params[1]) ? 100 : params[1], .1, 100);\n  var damping = minMax(is.und(params[2]) ? 10 : params[2], .1, 100);\n  var velocity =  minMax(is.und(params[3]) ? 0 : params[3], .1, 100);\n  var w0 = Math.sqrt(stiffness / mass);\n  var zeta = damping / (2 * Math.sqrt(stiffness * mass));\n  var wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\n  var a = 1;\n  var b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\n\n  function solver(t) {\n    var progress = duration ? (duration * t) / 1000 : t;\n    if (zeta < 1) {\n      progress = Math.exp(-progress * zeta * w0) * (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\n    } else {\n      progress = (a + b * progress) * Math.exp(-progress * w0);\n    }\n    if (t === 0 || t === 1) { return t; }\n    return 1 - progress;\n  }\n\n  function getDuration() {\n    var cached = cache.springs[string];\n    if (cached) { return cached; }\n    var frame = 1/6;\n    var elapsed = 0;\n    var rest = 0;\n    while(true) {\n      elapsed += frame;\n      if (solver(elapsed) === 1) {\n        rest++;\n        if (rest >= 16) { break; }\n      } else {\n        rest = 0;\n      }\n    }\n    var duration = elapsed * frame * 1000;\n    cache.springs[string] = duration;\n    return duration;\n  }\n\n  return duration ? solver : getDuration;\n\n}\n\n// Elastic easing adapted from jQueryUI http://api.jqueryui.com/easings/\n\nfunction elastic(amplitude, period) {\n  if ( amplitude === void 0 ) amplitude = 1;\n  if ( period === void 0 ) period = .5;\n\n  var a = minMax(amplitude, 1, 10);\n  var p = minMax(period, .1, 2);\n  return function (t) {\n    return (t === 0 || t === 1) ? t : \n      -a * Math.pow(2, 10 * (t - 1)) * Math.sin((((t - 1) - (p / (Math.PI * 2) * Math.asin(1 / a))) * (Math.PI * 2)) / p);\n  }\n}\n\n// Basic steps easing implementation https://developer.mozilla.org/fr/docs/Web/CSS/transition-timing-function\n\nfunction steps(steps) {\n  if ( steps === void 0 ) steps = 10;\n\n  return function (t) { return Math.round(t * steps) * (1 / steps); };\n}\n\n// BezierEasing https://github.com/gre/bezier-easing\n\nvar bezier = (function () {\n\n  var kSplineTableSize = 11;\n  var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\n  function A(aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1 }\n  function B(aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1 }\n  function C(aA1)      { return 3.0 * aA1 }\n\n  function calcBezier(aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT }\n  function getSlope(aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1) }\n\n  function binarySubdivide(aX, aA, aB, mX1, mX2) {\n    var currentX, currentT, i = 0;\n    do {\n      currentT = aA + (aB - aA) / 2.0;\n      currentX = calcBezier(currentT, mX1, mX2) - aX;\n      if (currentX > 0.0) { aB = currentT; } else { aA = currentT; }\n    } while (Math.abs(currentX) > 0.0000001 && ++i < 10);\n    return currentT;\n  }\n\n  function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n    for (var i = 0; i < 4; ++i) {\n      var currentSlope = getSlope(aGuessT, mX1, mX2);\n      if (currentSlope === 0.0) { return aGuessT; }\n      var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n      aGuessT -= currentX / currentSlope;\n    }\n    return aGuessT;\n  }\n\n  function bezier(mX1, mY1, mX2, mY2) {\n\n    if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) { return; }\n    var sampleValues = new Float32Array(kSplineTableSize);\n\n    if (mX1 !== mY1 || mX2 !== mY2) {\n      for (var i = 0; i < kSplineTableSize; ++i) {\n        sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n      }\n    }\n\n    function getTForX(aX) {\n\n      var intervalStart = 0;\n      var currentSample = 1;\n      var lastSample = kSplineTableSize - 1;\n\n      for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n        intervalStart += kSampleStepSize;\n      }\n\n      --currentSample;\n\n      var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n      var guessForT = intervalStart + dist * kSampleStepSize;\n      var initialSlope = getSlope(guessForT, mX1, mX2);\n\n      if (initialSlope >= 0.001) {\n        return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n      } else if (initialSlope === 0.0) {\n        return guessForT;\n      } else {\n        return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n      }\n\n    }\n\n    return function (x) {\n      if (mX1 === mY1 && mX2 === mY2) { return x; }\n      if (x === 0 || x === 1) { return x; }\n      return calcBezier(getTForX(x), mY1, mY2);\n    }\n\n  }\n\n  return bezier;\n\n})();\n\nvar penner = (function () {\n\n  var names = ['Quad', 'Cubic', 'Quart', 'Quint', 'Sine', 'Expo', 'Circ', 'Back', 'Elastic'];\n\n  // Approximated Penner equations http://matthewlein.com/ceaser/\n\n  var curves = {\n    In: [\n      [0.550, 0.085, 0.680, 0.530], /* inQuad */\n      [0.550, 0.055, 0.675, 0.190], /* inCubic */\n      [0.895, 0.030, 0.685, 0.220], /* inQuart */\n      [0.755, 0.050, 0.855, 0.060], /* inQuint */\n      [0.470, 0.000, 0.745, 0.715], /* inSine */\n      [0.950, 0.050, 0.795, 0.035], /* inExpo */\n      [0.600, 0.040, 0.980, 0.335], /* inCirc */\n      [0.600,-0.280, 0.735, 0.045], /* inBack */\n      elastic /* inElastic */\n    ],\n    Out: [\n      [0.250, 0.460, 0.450, 0.940], /* outQuad */\n      [0.215, 0.610, 0.355, 1.000], /* outCubic */\n      [0.165, 0.840, 0.440, 1.000], /* outQuart */\n      [0.230, 1.000, 0.320, 1.000], /* outQuint */\n      [0.390, 0.575, 0.565, 1.000], /* outSine */\n      [0.190, 1.000, 0.220, 1.000], /* outExpo */\n      [0.075, 0.820, 0.165, 1.000], /* outCirc */\n      [0.175, 0.885, 0.320, 1.275], /* outBack */\n      function (a, p) { return function (t) { return 1 - elastic(a, p)(1 - t); }; } /* outElastic */\n    ],\n    InOut: [\n      [0.455, 0.030, 0.515, 0.955], /* inOutQuad */\n      [0.645, 0.045, 0.355, 1.000], /* inOutCubic */\n      [0.770, 0.000, 0.175, 1.000], /* inOutQuart */\n      [0.860, 0.000, 0.070, 1.000], /* inOutQuint */\n      [0.445, 0.050, 0.550, 0.950], /* inOutSine */\n      [1.000, 0.000, 0.000, 1.000], /* inOutExpo */\n      [0.785, 0.135, 0.150, 0.860], /* inOutCirc */\n      [0.680,-0.550, 0.265, 1.550], /* inOutBack */\n      function (a, p) { return function (t) { return t < .5 ? elastic(a, p)(t * 2) / 2 : 1 - elastic(a, p)(t * -2 + 2) / 2; }; } /* inOutElastic */\n    ]\n  };\n\n  var eases = { \n    linear: [0.250, 0.250, 0.750, 0.750]\n  };\n\n  var loop = function ( coords ) {\n    curves[coords].forEach(function (ease, i) {\n      eases['ease'+coords+names[i]] = ease;\n    });\n  };\n\n  for (var coords in curves) loop( coords );\n\n  return eases;\n\n})();\n\nfunction parseEasings(easing, duration) {\n  if (is.fnc(easing)) { return easing; }\n  var name = easing.split('(')[0];\n  var ease = penner[name];\n  var args = parseEasingParameters(easing);\n  switch (name) {\n    case 'spring' : return spring(easing, duration);\n    case 'cubicBezier' : return applyArguments(bezier, args);\n    case 'steps' : return applyArguments(steps, args);\n    default : return is.fnc(ease) ? applyArguments(ease, args) : applyArguments(bezier, ease);\n  }\n}\n\n// Strings\n\nfunction selectString(str) {\n  try {\n    var nodes = document.querySelectorAll(str);\n    return nodes;\n  } catch(e) {\n    return;\n  }\n}\n\n// Arrays\n\nfunction filterArray(arr, callback) {\n  var len = arr.length;\n  var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n  var result = [];\n  for (var i = 0; i < len; i++) {\n    if (i in arr) {\n      var val = arr[i];\n      if (callback.call(thisArg, val, i, arr)) {\n        result.push(val);\n      }\n    }\n  }\n  return result;\n}\n\nfunction flattenArray(arr) {\n  return arr.reduce(function (a, b) { return a.concat(is.arr(b) ? flattenArray(b) : b); }, []);\n}\n\nfunction toArray(o) {\n  if (is.arr(o)) { return o; }\n  if (is.str(o)) { o = selectString(o) || o; }\n  if (o instanceof NodeList || o instanceof HTMLCollection) { return [].slice.call(o); }\n  return [o];\n}\n\nfunction arrayContains(arr, val) {\n  return arr.some(function (a) { return a === val; });\n}\n\n// Objects\n\nfunction cloneObject(o) {\n  var clone = {};\n  for (var p in o) { clone[p] = o[p]; }\n  return clone;\n}\n\nfunction replaceObjectProps(o1, o2) {\n  var o = cloneObject(o1);\n  for (var p in o1) { o[p] = o2.hasOwnProperty(p) ? o2[p] : o1[p]; }\n  return o;\n}\n\nfunction mergeObjects(o1, o2) {\n  var o = cloneObject(o1);\n  for (var p in o2) { o[p] = is.und(o1[p]) ? o2[p] : o1[p]; }\n  return o;\n}\n\n// Colors\n\nfunction rgbToRgba(rgbValue) {\n  var rgb = /rgb\\((\\d+,\\s*[\\d]+,\\s*[\\d]+)\\)/g.exec(rgbValue);\n  return rgb ? (\"rgba(\" + (rgb[1]) + \",1)\") : rgbValue;\n}\n\nfunction hexToRgba(hexValue) {\n  var rgx = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n  var hex = hexValue.replace(rgx, function (m, r, g, b) { return r + r + g + g + b + b; } );\n  var rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  var r = parseInt(rgb[1], 16);\n  var g = parseInt(rgb[2], 16);\n  var b = parseInt(rgb[3], 16);\n  return (\"rgba(\" + r + \",\" + g + \",\" + b + \",1)\");\n}\n\nfunction hslToRgba(hslValue) {\n  var hsl = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.exec(hslValue) || /hsla\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%,\\s*([\\d.]+)\\)/g.exec(hslValue);\n  var h = parseInt(hsl[1], 10) / 360;\n  var s = parseInt(hsl[2], 10) / 100;\n  var l = parseInt(hsl[3], 10) / 100;\n  var a = hsl[4] || 1;\n  function hue2rgb(p, q, t) {\n    if (t < 0) { t += 1; }\n    if (t > 1) { t -= 1; }\n    if (t < 1/6) { return p + (q - p) * 6 * t; }\n    if (t < 1/2) { return q; }\n    if (t < 2/3) { return p + (q - p) * (2/3 - t) * 6; }\n    return p;\n  }\n  var r, g, b;\n  if (s == 0) {\n    r = g = b = l;\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1/3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1/3);\n  }\n  return (\"rgba(\" + (r * 255) + \",\" + (g * 255) + \",\" + (b * 255) + \",\" + a + \")\");\n}\n\nfunction colorToRgb(val) {\n  if (is.rgb(val)) { return rgbToRgba(val); }\n  if (is.hex(val)) { return hexToRgba(val); }\n  if (is.hsl(val)) { return hslToRgba(val); }\n}\n\n// Units\n\nfunction getUnit(val) {\n  var split = /([\\+\\-]?[0-9#\\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(val);\n  if (split) { return split[2]; }\n}\n\nfunction getTransformUnit(propName) {\n  if (stringContains(propName, 'translate') || propName === 'perspective') { return 'px'; }\n  if (stringContains(propName, 'rotate') || stringContains(propName, 'skew')) { return 'deg'; }\n}\n\n// Values\n\nfunction getFunctionValue(val, animatable) {\n  if (!is.fnc(val)) { return val; }\n  return val(animatable.target, animatable.id, animatable.total);\n}\n\nfunction getAttribute(el, prop) {\n  return el.getAttribute(prop);\n}\n\nfunction convertPxToUnit(el, value, unit) {\n  var valueUnit = getUnit(value);\n  if (arrayContains([unit, 'deg', 'rad', 'turn'], valueUnit)) { return value; }\n  var cached = cache.CSS[value + unit];\n  if (!is.und(cached)) { return cached; }\n  var baseline = 100;\n  var tempEl = document.createElement(el.tagName);\n  var parentEl = (el.parentNode && (el.parentNode !== document)) ? el.parentNode : document.body;\n  parentEl.appendChild(tempEl);\n  tempEl.style.position = 'absolute';\n  tempEl.style.width = baseline + unit;\n  var factor = baseline / tempEl.offsetWidth;\n  parentEl.removeChild(tempEl);\n  var convertedUnit = factor * parseFloat(value);\n  cache.CSS[value + unit] = convertedUnit;\n  return convertedUnit;\n}\n\nfunction getCSSValue(el, prop, unit) {\n  if (prop in el.style) {\n    var uppercasePropName = prop.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n    var value = el.style[prop] || getComputedStyle(el).getPropertyValue(uppercasePropName) || '0';\n    return unit ? convertPxToUnit(el, value, unit) : value;\n  }\n}\n\nfunction getAnimationType(el, prop) {\n  if (is.dom(el) && !is.inp(el) && (getAttribute(el, prop) || (is.svg(el) && el[prop]))) { return 'attribute'; }\n  if (is.dom(el) && arrayContains(validTransforms, prop)) { return 'transform'; }\n  if (is.dom(el) && (prop !== 'transform' && getCSSValue(el, prop))) { return 'css'; }\n  if (el[prop] != null) { return 'object'; }\n}\n\nfunction getElementTransforms(el) {\n  if (!is.dom(el)) { return; }\n  var str = el.style.transform || '';\n  var reg  = /(\\w+)\\(([^)]*)\\)/g;\n  var transforms = new Map();\n  var m; while (m = reg.exec(str)) { transforms.set(m[1], m[2]); }\n  return transforms;\n}\n\nfunction getTransformValue(el, propName, animatable, unit) {\n  var defaultVal = stringContains(propName, 'scale') ? 1 : 0 + getTransformUnit(propName);\n  var value = getElementTransforms(el).get(propName) || defaultVal;\n  if (animatable) {\n    animatable.transforms.list.set(propName, value);\n    animatable.transforms['last'] = propName;\n  }\n  return unit ? convertPxToUnit(el, value, unit) : value;\n}\n\nfunction getOriginalTargetValue(target, propName, unit, animatable) {\n  switch (getAnimationType(target, propName)) {\n    case 'transform': return getTransformValue(target, propName, animatable, unit);\n    case 'css': return getCSSValue(target, propName, unit);\n    case 'attribute': return getAttribute(target, propName);\n    default: return target[propName] || 0;\n  }\n}\n\nfunction getRelativeValue(to, from) {\n  var operator = /^(\\*=|\\+=|-=)/.exec(to);\n  if (!operator) { return to; }\n  var u = getUnit(to) || 0;\n  var x = parseFloat(from);\n  var y = parseFloat(to.replace(operator[0], ''));\n  switch (operator[0][0]) {\n    case '+': return x + y + u;\n    case '-': return x - y + u;\n    case '*': return x * y + u;\n  }\n}\n\nfunction validateValue(val, unit) {\n  if (is.col(val)) { return colorToRgb(val); }\n  var originalUnit = getUnit(val);\n  var unitLess = originalUnit ? val.substr(0, val.length - originalUnit.length) : val;\n  return unit && !/\\s/g.test(val) ? unitLess + unit : unitLess;\n}\n\n// getTotalLength() equivalent for circle, rect, polyline, polygon and line shapes\n// adapted from https://gist.github.com/SebLambla/3e0550c496c236709744\n\nfunction getDistance(p1, p2) {\n  return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));\n}\n\nfunction getCircleLength(el) {\n  return Math.PI * 2 * getAttribute(el, 'r');\n}\n\nfunction getRectLength(el) {\n  return (getAttribute(el, 'width') * 2) + (getAttribute(el, 'height') * 2);\n}\n\nfunction getLineLength(el) {\n  return getDistance(\n    {x: getAttribute(el, 'x1'), y: getAttribute(el, 'y1')}, \n    {x: getAttribute(el, 'x2'), y: getAttribute(el, 'y2')}\n  );\n}\n\nfunction getPolylineLength(el) {\n  var points = el.points;\n  var totalLength = 0;\n  var previousPos;\n  for (var i = 0 ; i < points.numberOfItems; i++) {\n    var currentPos = points.getItem(i);\n    if (i > 0) { totalLength += getDistance(previousPos, currentPos); }\n    previousPos = currentPos;\n  }\n  return totalLength;\n}\n\nfunction getPolygonLength(el) {\n  var points = el.points;\n  return getPolylineLength(el) + getDistance(points.getItem(points.numberOfItems - 1), points.getItem(0));\n}\n\n// Path animation\n\nfunction getTotalLength(el) {\n  if (el.getTotalLength) { return el.getTotalLength(); }\n  switch(el.tagName.toLowerCase()) {\n    case 'circle': return getCircleLength(el);\n    case 'rect': return getRectLength(el);\n    case 'line': return getLineLength(el);\n    case 'polyline': return getPolylineLength(el);\n    case 'polygon': return getPolygonLength(el);\n  }\n}\n\nfunction setDashoffset(el) {\n  var pathLength = getTotalLength(el);\n  el.setAttribute('stroke-dasharray', pathLength);\n  return pathLength;\n}\n\n// Motion path\n\nfunction getParentSvgEl(el) {\n  var parentEl = el.parentNode;\n  while (is.svg(parentEl)) {\n    parentEl = parentEl.parentNode;\n    if (!is.svg(parentEl.parentNode)) { break; }\n  }\n  return parentEl;\n}\n\nfunction getParentSvg(pathEl, svgData) {\n  var svg = svgData || {};\n  var parentSvgEl = svg.el || getParentSvgEl(pathEl);\n  var rect = parentSvgEl.getBoundingClientRect();\n  var viewBoxAttr = getAttribute(parentSvgEl, 'viewBox');\n  var width = rect.width;\n  var height = rect.height;\n  var viewBox = svg.viewBox || (viewBoxAttr ? viewBoxAttr.split(' ') : [0, 0, width, height]);\n  return {\n    el: parentSvgEl,\n    viewBox: viewBox,\n    x: viewBox[0] / 1,\n    y: viewBox[1] / 1,\n    w: width / viewBox[2],\n    h: height / viewBox[3]\n  }\n}\n\nfunction getPath(path, percent) {\n  var pathEl = is.str(path) ? selectString(path)[0] : path;\n  var p = percent || 100;\n  return function(property) {\n    return {\n      property: property,\n      el: pathEl,\n      svg: getParentSvg(pathEl),\n      totalLength: getTotalLength(pathEl) * (p / 100)\n    }\n  }\n}\n\nfunction getPathProgress(path, progress) {\n  function point(offset) {\n    if ( offset === void 0 ) offset = 0;\n\n    var l = progress + offset >= 1 ? progress + offset : 0;\n    return path.el.getPointAtLength(l);\n  }\n  var svg = getParentSvg(path.el, path.svg);\n  var p = point();\n  var p0 = point(-1);\n  var p1 = point(+1);\n  switch (path.property) {\n    case 'x': return (p.x - svg.x) * svg.w;\n    case 'y': return (p.y - svg.y) * svg.h;\n    case 'angle': return Math.atan2(p1.y - p0.y, p1.x - p0.x) * 180 / Math.PI;\n  }\n}\n\n// Decompose value\n\nfunction decomposeValue(val, unit) {\n  var rgx = /-?\\d*\\.?\\d+/g;\n  var value = validateValue((is.pth(val) ? val.totalLength : val), unit) + '';\n  return {\n    original: value,\n    numbers: value.match(rgx) ? value.match(rgx).map(Number) : [0],\n    strings: (is.str(val) || unit) ? value.split(rgx) : []\n  }\n}\n\n// Animatables\n\nfunction parseTargets(targets) {\n  var targetsArray = targets ? (flattenArray(is.arr(targets) ? targets.map(toArray) : toArray(targets))) : [];\n  return filterArray(targetsArray, function (item, pos, self) { return self.indexOf(item) === pos; });\n}\n\nfunction getAnimatables(targets) {\n  var parsed = parseTargets(targets);\n  return parsed.map(function (t, i) {\n    return {target: t, id: i, total: parsed.length, transforms: { list: getElementTransforms(t) } };\n  });\n}\n\n// Properties\n\nfunction normalizePropertyTweens(prop, tweenSettings) {\n  var settings = cloneObject(tweenSettings);\n  // Override duration if easing is a spring\n  if (/^spring/.test(settings.easing)) { settings.duration = spring(settings.easing); }\n  if (is.arr(prop)) {\n    var l = prop.length;\n    var isFromTo = (l === 2 && !is.obj(prop[0]));\n    if (!isFromTo) {\n      // Duration divided by the number of tweens\n      if (!is.fnc(tweenSettings.duration)) { settings.duration = tweenSettings.duration / l; }\n    } else {\n      // Transform [from, to] values shorthand to a valid tween value\n      prop = {value: prop};\n    }\n  }\n  var propArray = is.arr(prop) ? prop : [prop];\n  return propArray.map(function (v, i) {\n    var obj = (is.obj(v) && !is.pth(v)) ? v : {value: v};\n    // Default delay value should only be applied to the first tween\n    if (is.und(obj.delay)) { obj.delay = !i ? tweenSettings.delay : 0; }\n    // Default endDelay value should only be applied to the last tween\n    if (is.und(obj.endDelay)) { obj.endDelay = i === propArray.length - 1 ? tweenSettings.endDelay : 0; }\n    return obj;\n  }).map(function (k) { return mergeObjects(k, settings); });\n}\n\n\nfunction flattenKeyframes(keyframes) {\n  var propertyNames = filterArray(flattenArray(keyframes.map(function (key) { return Object.keys(key); })), function (p) { return is.key(p); })\n  .reduce(function (a,b) { if (a.indexOf(b) < 0) { a.push(b); } return a; }, []);\n  var properties = {};\n  var loop = function ( i ) {\n    var propName = propertyNames[i];\n    properties[propName] = keyframes.map(function (key) {\n      var newKey = {};\n      for (var p in key) {\n        if (is.key(p)) {\n          if (p == propName) { newKey.value = key[p]; }\n        } else {\n          newKey[p] = key[p];\n        }\n      }\n      return newKey;\n    });\n  };\n\n  for (var i = 0; i < propertyNames.length; i++) loop( i );\n  return properties;\n}\n\nfunction getProperties(tweenSettings, params) {\n  var properties = [];\n  var keyframes = params.keyframes;\n  if (keyframes) { params = mergeObjects(flattenKeyframes(keyframes), params); }\n  for (var p in params) {\n    if (is.key(p)) {\n      properties.push({\n        name: p,\n        tweens: normalizePropertyTweens(params[p], tweenSettings)\n      });\n    }\n  }\n  return properties;\n}\n\n// Tweens\n\nfunction normalizeTweenValues(tween, animatable) {\n  var t = {};\n  for (var p in tween) {\n    var value = getFunctionValue(tween[p], animatable);\n    if (is.arr(value)) {\n      value = value.map(function (v) { return getFunctionValue(v, animatable); });\n      if (value.length === 1) { value = value[0]; }\n    }\n    t[p] = value;\n  }\n  t.duration = parseFloat(t.duration);\n  t.delay = parseFloat(t.delay);\n  return t;\n}\n\nfunction normalizeTweens(prop, animatable) {\n  var previousTween;\n  return prop.tweens.map(function (t) {\n    var tween = normalizeTweenValues(t, animatable);\n    var tweenValue = tween.value;\n    var to = is.arr(tweenValue) ? tweenValue[1] : tweenValue;\n    var toUnit = getUnit(to);\n    var originalValue = getOriginalTargetValue(animatable.target, prop.name, toUnit, animatable);\n    var previousValue = previousTween ? previousTween.to.original : originalValue;\n    var from = is.arr(tweenValue) ? tweenValue[0] : previousValue;\n    var fromUnit = getUnit(from) || getUnit(originalValue);\n    var unit = toUnit || fromUnit;\n    if (is.und(to)) { to = previousValue; }\n    tween.from = decomposeValue(from, unit);\n    tween.to = decomposeValue(getRelativeValue(to, from), unit);\n    tween.start = previousTween ? previousTween.end : 0;\n    tween.end = tween.start + tween.delay + tween.duration + tween.endDelay;\n    tween.easing = parseEasings(tween.easing, tween.duration);\n    tween.isPath = is.pth(tweenValue);\n    tween.isColor = is.col(tween.from.original);\n    if (tween.isColor) { tween.round = 1; }\n    previousTween = tween;\n    return tween;\n  });\n}\n\n// Tween progress\n\nvar setProgressValue = {\n  css: function (t, p, v) { return t.style[p] = v; },\n  attribute: function (t, p, v) { return t.setAttribute(p, v); },\n  object: function (t, p, v) { return t[p] = v; },\n  transform: function (t, p, v, transforms, manual) {\n    transforms.list.set(p, v);\n    if (p === transforms.last || manual) {\n      var str = '';\n      transforms.list.forEach(function (value, prop) { str += prop + \"(\" + value + \") \"; });\n      t.style.transform = str;\n    }\n  }\n};\n\n// Set Value helper\n\nfunction setTargetsValue(targets, properties) {\n  var animatables = getAnimatables(targets);\n  animatables.forEach(function (animatable) {\n    for (var property in properties) {\n      var value = getFunctionValue(properties[property], animatable);\n      var target = animatable.target;\n      var valueUnit = getUnit(value);\n      var originalValue = getOriginalTargetValue(target, property, valueUnit, animatable);\n      var unit = valueUnit || getUnit(originalValue);\n      var to = getRelativeValue(validateValue(value, unit), originalValue);\n      var animType = getAnimationType(target, property);\n      setProgressValue[animType](target, property, to, animatable.transforms, true);\n    }\n  });\n}\n\n// Animations\n\nfunction createAnimation(animatable, prop) {\n  var animType = getAnimationType(animatable.target, prop.name);\n  if (animType) {\n    var tweens = normalizeTweens(prop, animatable);\n    var lastTween = tweens[tweens.length - 1];\n    return {\n      type: animType,\n      property: prop.name,\n      animatable: animatable,\n      tweens: tweens,\n      duration: lastTween.end,\n      delay: tweens[0].delay,\n      endDelay: lastTween.endDelay\n    }\n  }\n}\n\nfunction getAnimations(animatables, properties) {\n  return filterArray(flattenArray(animatables.map(function (animatable) {\n    return properties.map(function (prop) {\n      return createAnimation(animatable, prop);\n    });\n  })), function (a) { return !is.und(a); });\n}\n\n// Create Instance\n\nfunction getInstanceTimings(animations, tweenSettings) {\n  var animLength = animations.length;\n  var getTlOffset = function (anim) { return anim.timelineOffset ? anim.timelineOffset : 0; };\n  var timings = {};\n  timings.duration = animLength ? Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration; })) : tweenSettings.duration;\n  timings.delay = animLength ? Math.min.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.delay; })) : tweenSettings.delay;\n  timings.endDelay = animLength ? timings.duration - Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration - anim.endDelay; })) : tweenSettings.endDelay;\n  return timings;\n}\n\nvar instanceID = 0;\n\nfunction createNewInstance(params) {\n  var instanceSettings = replaceObjectProps(defaultInstanceSettings, params);\n  var tweenSettings = replaceObjectProps(defaultTweenSettings, params);\n  var properties = getProperties(tweenSettings, params);\n  var animatables = getAnimatables(params.targets);\n  var animations = getAnimations(animatables, properties);\n  var timings = getInstanceTimings(animations, tweenSettings);\n  var id = instanceID;\n  instanceID++;\n  return mergeObjects(instanceSettings, {\n    id: id,\n    children: [],\n    animatables: animatables,\n    animations: animations,\n    duration: timings.duration,\n    delay: timings.delay,\n    endDelay: timings.endDelay\n  });\n}\n\n// Core\n\nvar activeInstances = [];\nvar pausedInstances = [];\nvar raf;\n\nvar engine = (function () {\n  function play() { \n    raf = requestAnimationFrame(step);\n  }\n  function step(t) {\n    var activeInstancesLength = activeInstances.length;\n    if (activeInstancesLength) {\n      var i = 0;\n      while (i < activeInstancesLength) {\n        var activeInstance = activeInstances[i];\n        if (!activeInstance.paused) {\n          activeInstance.tick(t);\n        } else {\n          var instanceIndex = activeInstances.indexOf(activeInstance);\n          if (instanceIndex > -1) {\n            activeInstances.splice(instanceIndex, 1);\n            activeInstancesLength = activeInstances.length;\n          }\n        }\n        i++;\n      }\n      play();\n    } else {\n      raf = cancelAnimationFrame(raf);\n    }\n  }\n  return play;\n})();\n\nfunction handleVisibilityChange() {\n  if (document.hidden) {\n    activeInstances.forEach(function (ins) { return ins.pause(); });\n    pausedInstances = activeInstances.slice(0);\n    activeInstances = [];\n  } else {\n    pausedInstances.forEach(function (ins) { return ins.play(); });\n  }\n}\n\nif (typeof document !== 'undefined') {\n  document.addEventListener('visibilitychange', handleVisibilityChange);\n}\n\n// Public Instance\n\nfunction anime(params) {\n  if ( params === void 0 ) params = {};\n\n\n  var startTime = 0, lastTime = 0, now = 0;\n  var children, childrenLength = 0;\n  var resolve = null;\n\n  function makePromise(instance) {\n    var promise = window.Promise && new Promise(function (_resolve) { return resolve = _resolve; });\n    instance.finished = promise;\n    return promise;\n  }\n\n  var instance = createNewInstance(params);\n  var promise = makePromise(instance);\n\n  function toggleInstanceDirection() {\n    var direction = instance.direction;\n    if (direction !== 'alternate') {\n      instance.direction = direction !== 'normal' ? 'normal' : 'reverse';\n    }\n    instance.reversed = !instance.reversed;\n    children.forEach(function (child) { return child.reversed = instance.reversed; });\n  }\n\n  function adjustTime(time) {\n    return instance.reversed ? instance.duration - time : time;\n  }\n\n  function resetTime() {\n    startTime = 0;\n    lastTime = adjustTime(instance.currentTime) * (1 / anime.speed);\n  }\n\n  function seekCild(time, child) {\n    if (child) { child.seek(time - child.timelineOffset); }\n  }\n\n  function syncInstanceChildren(time) {\n    if (!instance.reversePlayback) {\n      for (var i = 0; i < childrenLength; i++) { seekCild(time, children[i]); }\n    } else {\n      for (var i$1 = childrenLength; i$1--;) { seekCild(time, children[i$1]); }\n    }\n  }\n\n  function setAnimationsProgress(insTime) {\n    var i = 0;\n    var animations = instance.animations;\n    var animationsLength = animations.length;\n    while (i < animationsLength) {\n      var anim = animations[i];\n      var animatable = anim.animatable;\n      var tweens = anim.tweens;\n      var tweenLength = tweens.length - 1;\n      var tween = tweens[tweenLength];\n      // Only check for keyframes if there is more than one tween\n      if (tweenLength) { tween = filterArray(tweens, function (t) { return (insTime < t.end); })[0] || tween; }\n      var elapsed = minMax(insTime - tween.start - tween.delay, 0, tween.duration) / tween.duration;\n      var eased = isNaN(elapsed) ? 1 : tween.easing(elapsed);\n      var strings = tween.to.strings;\n      var round = tween.round;\n      var numbers = [];\n      var toNumbersLength = tween.to.numbers.length;\n      var progress = (void 0);\n      for (var n = 0; n < toNumbersLength; n++) {\n        var value = (void 0);\n        var toNumber = tween.to.numbers[n];\n        var fromNumber = tween.from.numbers[n] || 0;\n        if (!tween.isPath) {\n          value = fromNumber + (eased * (toNumber - fromNumber));\n        } else {\n          value = getPathProgress(tween.value, eased * toNumber);\n        }\n        if (round) {\n          if (!(tween.isColor && n > 2)) {\n            value = Math.round(value * round) / round;\n          }\n        }\n        numbers.push(value);\n      }\n      // Manual Array.reduce for better performances\n      var stringsLength = strings.length;\n      if (!stringsLength) {\n        progress = numbers[0];\n      } else {\n        progress = strings[0];\n        for (var s = 0; s < stringsLength; s++) {\n          var a = strings[s];\n          var b = strings[s + 1];\n          var n$1 = numbers[s];\n          if (!isNaN(n$1)) {\n            if (!b) {\n              progress += n$1 + ' ';\n            } else {\n              progress += n$1 + b;\n            }\n          }\n        }\n      }\n      setProgressValue[anim.type](animatable.target, anim.property, progress, animatable.transforms);\n      anim.currentValue = progress;\n      i++;\n    }\n  }\n\n  function setCallback(cb) {\n    if (instance[cb] && !instance.passThrough) { instance[cb](instance); }\n  }\n\n  function countIteration() {\n    if (instance.remaining && instance.remaining !== true) {\n      instance.remaining--;\n    }\n  }\n\n  function setInstanceProgress(engineTime) {\n    var insDuration = instance.duration;\n    var insDelay = instance.delay;\n    var insEndDelay = insDuration - instance.endDelay;\n    var insTime = adjustTime(engineTime);\n    instance.progress = minMax((insTime / insDuration) * 100, 0, 100);\n    instance.reversePlayback = insTime < instance.currentTime;\n    if (children) { syncInstanceChildren(insTime); }\n    if (!instance.began && instance.currentTime > 0) {\n      instance.began = true;\n      setCallback('begin');\n      setCallback('loopBegin');\n    }\n    if (insTime <= insDelay && instance.currentTime !== 0) {\n      setAnimationsProgress(0);\n    }\n    if ((insTime >= insEndDelay && instance.currentTime !== insDuration) || !insDuration) {\n      setAnimationsProgress(insDuration);\n    }\n    if (insTime > insDelay && insTime < insEndDelay) {\n      if (!instance.changeBegan) {\n        instance.changeBegan = true;\n        instance.changeCompleted = false;\n        setCallback('changeBegin');\n      }\n      setCallback('change');\n      setAnimationsProgress(insTime);\n    } else {\n      if (instance.changeBegan) {\n        instance.changeCompleted = true;\n        instance.changeBegan = false;\n        setCallback('changeComplete');\n      }\n    }\n    instance.currentTime = minMax(insTime, 0, insDuration);\n    if (instance.began) { setCallback('update'); }\n    if (engineTime >= insDuration) {\n      lastTime = 0;\n      countIteration();\n      if (instance.remaining) {\n        startTime = now;\n        setCallback('loopComplete');\n        setCallback('loopBegin');\n        if (instance.direction === 'alternate') { toggleInstanceDirection(); }\n      } else {\n        instance.paused = true;\n        if (!instance.completed) {\n          instance.completed = true;\n          setCallback('loopComplete');\n          setCallback('complete');\n          if (!instance.passThrough && 'Promise' in window) {\n            resolve();\n            promise = makePromise(instance);\n          }\n        }\n      }\n    }\n  }\n\n  instance.reset = function() {\n    var direction = instance.direction;\n    instance.passThrough = false;\n    instance.currentTime = 0;\n    instance.progress = 0;\n    instance.paused = true;\n    instance.began = false;\n    instance.changeBegan = false;\n    instance.completed = false;\n    instance.changeCompleted = false;\n    instance.reversePlayback = false;\n    instance.reversed = direction === 'reverse';\n    instance.remaining = instance.loop;\n    children = instance.children;\n    childrenLength = children.length;\n    for (var i = childrenLength; i--;) { instance.children[i].reset(); }\n    if (instance.reversed && instance.loop !== true || (direction === 'alternate' && instance.loop === 1)) { instance.remaining++; }\n    setAnimationsProgress(0);\n  };\n\n  // Set Value helper\n\n  instance.set = function(targets, properties) {\n    setTargetsValue(targets, properties);\n    return instance;\n  };\n\n  instance.tick = function(t) {\n    now = t;\n    if (!startTime) { startTime = now; }\n    setInstanceProgress((now + (lastTime - startTime)) * anime.speed);\n  };\n\n  instance.seek = function(time) {\n    setInstanceProgress(adjustTime(time));\n  };\n\n  instance.pause = function() {\n    instance.paused = true;\n    resetTime();\n  };\n\n  instance.play = function() {\n    if (!instance.paused) { return; }\n    if (instance.completed) { instance.reset(); }\n    instance.paused = false;\n    activeInstances.push(instance);\n    resetTime();\n    if (!raf) { engine(); }\n  };\n\n  instance.reverse = function() {\n    toggleInstanceDirection();\n    resetTime();\n  };\n\n  instance.restart = function() {\n    instance.reset();\n    instance.play();\n  };\n\n  instance.reset();\n\n  if (instance.autoplay) { instance.play(); }\n\n  return instance;\n\n}\n\n// Remove targets from animation\n\nfunction removeTargetsFromAnimations(targetsArray, animations) {\n  for (var a = animations.length; a--;) {\n    if (arrayContains(targetsArray, animations[a].animatable.target)) {\n      animations.splice(a, 1);\n    }\n  }\n}\n\nfunction removeTargets(targets) {\n  var targetsArray = parseTargets(targets);\n  for (var i = activeInstances.length; i--;) {\n    var instance = activeInstances[i];\n    var animations = instance.animations;\n    var children = instance.children;\n    removeTargetsFromAnimations(targetsArray, animations);\n    for (var c = children.length; c--;) {\n      var child = children[c];\n      var childAnimations = child.animations;\n      removeTargetsFromAnimations(targetsArray, childAnimations);\n      if (!childAnimations.length && !child.children.length) { children.splice(c, 1); }\n    }\n    if (!animations.length && !children.length) { instance.pause(); }\n  }\n}\n\n// Stagger helpers\n\nfunction stagger(val, params) {\n  if ( params === void 0 ) params = {};\n\n  var direction = params.direction || 'normal';\n  var easing = params.easing ? parseEasings(params.easing) : null;\n  var grid = params.grid;\n  var axis = params.axis;\n  var fromIndex = params.from || 0;\n  var fromFirst = fromIndex === 'first';\n  var fromCenter = fromIndex === 'center';\n  var fromLast = fromIndex === 'last';\n  var isRange = is.arr(val);\n  var val1 = isRange ? parseFloat(val[0]) : parseFloat(val);\n  var val2 = isRange ? parseFloat(val[1]) : 0;\n  var unit = getUnit(isRange ? val[1] : val) || 0;\n  var start = params.start || 0 + (isRange ? val1 : 0);\n  var values = [];\n  var maxValue = 0;\n  return function (el, i, t) {\n    if (fromFirst) { fromIndex = 0; }\n    if (fromCenter) { fromIndex = (t - 1) / 2; }\n    if (fromLast) { fromIndex = t - 1; }\n    if (!values.length) {\n      for (var index = 0; index < t; index++) {\n        if (!grid) {\n          values.push(Math.abs(fromIndex - index));\n        } else {\n          var fromX = !fromCenter ? fromIndex%grid[0] : (grid[0]-1)/2;\n          var fromY = !fromCenter ? Math.floor(fromIndex/grid[0]) : (grid[1]-1)/2;\n          var toX = index%grid[0];\n          var toY = Math.floor(index/grid[0]);\n          var distanceX = fromX - toX;\n          var distanceY = fromY - toY;\n          var value = Math.sqrt(distanceX * distanceX + distanceY * distanceY);\n          if (axis === 'x') { value = -distanceX; }\n          if (axis === 'y') { value = -distanceY; }\n          values.push(value);\n        }\n        maxValue = Math.max.apply(Math, values);\n      }\n      if (easing) { values = values.map(function (val) { return easing(val / maxValue) * maxValue; }); }\n      if (direction === 'reverse') { values = values.map(function (val) { return axis ? (val < 0) ? val * -1 : -val : Math.abs(maxValue - val); }); }\n    }\n    var spacing = isRange ? (val2 - val1) / maxValue : val1;\n    return start + (spacing * (Math.round(values[i] * 100) / 100)) + unit;\n  }\n}\n\n// Timeline\n\nfunction timeline(params) {\n  if ( params === void 0 ) params = {};\n\n  var tl = anime(params);\n  tl.duration = 0;\n  tl.add = function(instanceParams, timelineOffset) {\n    var tlIndex = activeInstances.indexOf(tl);\n    var children = tl.children;\n    if (tlIndex > -1) { activeInstances.splice(tlIndex, 1); }\n    function passThrough(ins) { ins.passThrough = true; }\n    for (var i = 0; i < children.length; i++) { passThrough(children[i]); }\n    var insParams = mergeObjects(instanceParams, replaceObjectProps(defaultTweenSettings, params));\n    insParams.targets = insParams.targets || params.targets;\n    var tlDuration = tl.duration;\n    insParams.autoplay = false;\n    insParams.direction = tl.direction;\n    insParams.timelineOffset = is.und(timelineOffset) ? tlDuration : getRelativeValue(timelineOffset, tlDuration);\n    passThrough(tl);\n    tl.seek(insParams.timelineOffset);\n    var ins = anime(insParams);\n    passThrough(ins);\n    children.push(ins);\n    var timings = getInstanceTimings(children, params);\n    tl.delay = timings.delay;\n    tl.endDelay = timings.endDelay;\n    tl.duration = timings.duration;\n    tl.seek(0);\n    tl.reset();\n    if (tl.autoplay) { tl.play(); }\n    return tl;\n  };\n  return tl;\n}\n\nanime.version = '3.0.1';\nanime.speed = 1;\nanime.running = activeInstances;\nanime.remove = removeTargets;\nanime.get = getOriginalTargetValue;\nanime.set = setTargetsValue;\nanime.convertPx = convertPxToUnit;\nanime.path = getPath;\nanime.setDashoffset = setDashoffset;\nanime.stagger = stagger;\nanime.timeline = timeline;\nanime.easing = parseEasings;\nanime.penner = penner;\nanime.random = function (min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; };\n\nexport default anime;\n","import Gradient from './abstractions/Gradient'\nimport Ground from './abstractions/Ground'\nimport Landscape from './abstractions/Landscape'\nimport Line from './abstractions/Line'\nimport makePattern from './controllers/make-pattern'\nimport SYMBOLS from './controllers/symbols'\nimport randomOf from './utils/array-random'\nimport prng from './utils/prng'\n\nexport const generate = ({\n  units = [24],\n  width = 240,\n  height = 240,\n  groundsLength = 2,\n\n  percentOfStraightLines = 0.5,\n  percentOfGradients = 0.5,\n  percentOfSimplexGradients = 0.1,\n\n  swatch = ['rgb(0, 0, 0)'],\n  backgroundColor = 'rgb(255, 255, 255)',\n  symbols = ['debug'],\n\n  canvas = null,\n  random = prng.random\n} = {}) => {\n  const patterns = symbols.map(symbolName => makePattern(SYMBOLS[symbolName]))\n\n  const grounds = new Array(groundsLength).fill(true).map((_, index, grounds) => {\n    const rnd = random() * 100\n    const unit = randomOf(units, random)\n\n    const foregroundColor = randomOf(swatch, random)\n    const pattern = randomOf(patterns, random)\n\n    const gradient = rnd > percentOfGradients * 100\n      ? Gradient.fix(random())\n      : rnd < percentOfSimplexGradients * 100\n        ? Gradient.simplex({ seed: rnd })\n        : Gradient.linear(rnd)\n\n    const offy = height * (1 - (index / (grounds.length))) ** (random() * 3)\n    const line = new Line(x => {\n      if (rnd < percentOfStraightLines * 100) {\n        return offy / height\n      } else {\n        const n = Line.perlin({\n          seed: rnd,\n          octaves: 3,\n          resolution: 64,\n          lacunarity: 2,\n          gain: 0.5\n        })(x / (2 + (rnd / 100) * 3))\n        return (offy / height) / 2 + n\n      }\n    })\n\n    return new Ground({\n      unit, line, gradient, width, height, foregroundColor, backgroundColor, pattern\n    })\n  })\n\n  return new Landscape(grounds, {\n    canvas,\n    backgroundColor\n  })\n}\n\nexport { prng }\nexport { erode } from './controllers/erode'\nexport { hueRotate } from './controllers/hue-rotate'\nexport { swatches } from './controllers/swatches'\n","import raf from '@internet/raf'\nimport Line from '../abstractions/Line'\nimport roundTo from '../utils/round-to'\n\n// let buffer\n// let shouldUpdate = false\n// const erosion = {}\n\n// const EASING = {\n//   values: [],\n//   targets: [],\n//   coef: 0.001,\n//   tolerance: 0.1,\n\n//   init: function (length = this.targets.length) {\n//     this.values = new Array(length).fill(0)\n//   },\n\n//   update: function () {\n//     if (!this.values || !this.values.length) this.init()\n\n//     shouldUpdate = false\n//     for (let i = 0; i < this.targets.length; i++) {\n//       const d = (this.targets[i] - this.values[i])\n//       if (Math.abs(d) > this.tolerance) {\n//         shouldUpdate = true\n//         this.values[i] += d * this.coef\n//       }\n//     }\n//   }\n// }\n\n// raf.add(update)\n\nexport const erode = (landscape, {\n  step = 24,\n  // easing = 0.001,\n  snapToGrid = true,\n  autoplay = true\n} = {}) => {\n  if (landscape.ctx.isSVG) {\n    throw new Error('Eroding canvas only works on non SVG context for now')\n  }\n\n  let shouldUpdate = autoplay\n  const buffer = landscape.copy()\n\n  // const line = new Line(x => Math.sin((x * 0.01) + line.frameCount) * 2)\n  const line = new Line(x => Line.perlin({\n    seed: 1,\n    octaves: 1,\n    resolution: 32,\n    lacunarity: 2,\n    gain: 0.5\n  })((x + line.frameCount) / 10) * step * 10)\n\n  line.frameCount = 0\n\n  raf.add(update)\n\n  return {\n    play: () => { shouldUpdate = true },\n    pause: () => { shouldUpdate = false },\n    clear: () => {\n      raf.remove(update)\n    }\n  }\n\n  function update (dt) {\n    if (!shouldUpdate) return\n\n    line.frameCount += 1\n\n    landscape.background(landscape.backgroundColor)\n\n    for (let x = 0; x < landscape.width; x += step) {\n      const v = line.compute(x, { force: true })\n      const y = snapToGrid ? roundTo(v, step) : v\n      landscape.ctx.drawImage(buffer, x, 0, step, buffer.height, x, y, step, buffer.height)\n    }\n  }\n}\n\nexport default erode\n","import anime from 'animejs'\n\n/* global Image */\n\nexport const hueRotate = (landscape, {\n  autoplay = true,\n  duration = 1000,\n  easing = 'linear',\n  loop = true,\n  containerClass = 'ffp-container'\n} = {}) => {\n  const parent = landscape.parent || landscape.canvas.parentNode\n\n  const container = document.createElement('div')\n  container.classList.add(containerClass)\n  parent.insertBefore(container, landscape.canvas.nextSibling)\n\n  landscape.canvas.style.display = 'none'\n\n  container.style.position = 'absolute'\n  container.style.width = landscape.width + 'px'\n  container.style.height = landscape.height + 'px'\n  container.style.backgroundColor = landscape.backgroundColor\n\n  landscape.grounds.forEach(ground => {\n    const img = new Image()\n    img.src = ground.sprite.toDataURL()\n    img.style.position = 'absolute'\n    container.appendChild(img)\n  })\n\n  const api = anime({\n    autoplay,\n    duration,\n    easing,\n    loop,\n    targets: container.querySelectorAll('img'),\n    filter: () => {\n      const off = Math.floor(Math.random() * 360)\n      const dir = Math.sign(Math.sin(Math.random() * Math.PI))\n      return [\n        `hue-rotate(${off}deg)`,\n        `hue-rotate(${off + 360 * dir}deg)`\n      ]\n    }\n  })\n\n  api.clear = () => {\n    container.remove()\n    landscape.canvas.style.display = ''\n  }\n\n  return api\n}\n\nexport default hueRotate\n","import randomOf from '../utils/array-random'\n\n/* eslint-disable comma-spacing, indent */\n\nexport const swatches = {\n    1: ['rgb(120,0,100)','rgb(160,15,150)','rgb(200,30,200)','rgb(255,50,255)','rgb(255,90,190)','rgb(255,120,140)','rgb(255,165,165)','rgb(255,215,235)'],\n    2: ['rgb(80,20,100)','rgb(110,30,130)','rgb(140,35,160)','rgb(170,40,190)','rgb(180,60,255)','rgb(190,100,255)','rgb(200,150,255)','rgb(210,200,255)'],\n    3: ['rgb(0,0,90)','rgb(0,0,160)','rgb(0,0,255)','rgb(0,120,255)','rgb(60,185,255)','rgb(0,200,255)','rgb(60,255,255)','rgb(220,255,255)'],\n    4: ['rgb(0,60,39)','rgb(0,90,59)','rgb(0,120,90)','rgb(0,151,120)','rgb(0,181,150)','rgb(52,231,200)','rgb(116,246,210)','rgb(179,254,225)'],\n    5: ['rgb(39,75,0)','rgb(27,95,15)','rgb(14,116,36)','rgb(0,170,43)','rgb(0,210,63)','rgb(0,252,29)','rgb(85,253,127)','rgb(178,253,157)'],\n    6: ['rgb(140,114,0)','rgb(180,139,0)','rgb(221,179,0)','rgb(255,218,0)','rgb(255,253,0)','rgb(255,249,88)','rgb(255,245,155)','rgb(255,254,218)'],\n    7: ['rgb(101,44,80)','rgb(141,58,57)','rgb(181,72,30)','rgb(201,88,0)','rgb(226,113,0)','rgb(255,137,0)','rgb(255,168,64)','rgb(255,199,147)'],\n    8: ['rgb(91,4,38)','rgb(151,11,57)','rgb(197,15,43)','rgb(222,18,27)','rgb(255,22,6)','rgb(255,53,49)','rgb(255,118,116)','rgb(255,189,189)'],\n    9: ['rgb(40,19,0)','rgb(71,39,17)','rgb(101,59,42)','rgb(136,115,99)','rgb(175,145,128)','rgb(210,179,158)','rgb(220,200,179)','rgb(236,220,199)'],\n   10: ['rgb(28,61,91)','rgb(59,100,131)','rgb(78,130,161)','rgb(98,161,181)','rgb(119,170,191)','rgb(150,180,201)','rgb(169,200,210)','rgb(199,220,230)'],\n   11: ['rgb(44,18,153)','rgb(85,28,202)','rgb(109,45,255)','rgb(130,82,255)','rgb(150,122,255)','rgb(160,171,255)','rgb(180,206,255)','rgb(194,235,255)'],\n   12: ['rgb(121,0,100)','rgb(161,12,151)','rgb(80,20,101)','rgb(110,30,131)','rgb(90,0,39)','rgb(151,0,58)'],\n   13: ['rgb(0,3,91)','rgb(0,9,162)','rgb(45,7,152)','rgb(85,26,203)','rgb(29,60,91)','rgb(59,100,131)'],\n   14: ['rgb(0,60,40)','rgb(0,90,60)','rgb(39,75,0)','rgb(28,95,15)','rgb(40,19,0)','rgb(70,39,17)'],\n   15: ['rgb(100,44,80)','rgb(141,58,58)','rgb(90,0,39)','rgb(151,0,58)','rgb(140,114,0)','rgb(181,139,0)'],\n   16: ['rgb(255,164,163)','rgb(255,215,235)','rgb(200,150,255)','rgb(210,200,255)','rgb(255,117,116)','rgb(255,189,189)'],\n   17: ['rgb(48,255,255)','rgb(219,255,255)','rgb(179,206,255)','rgb(194,236,255)','rgb(169,200,211)','rgb(200,220,231)'],\n   18: ['rgb(116,246,210)','rgb(178,255,225)','rgb(84,255,126)','rgb(179,255,157)','rgb(220,200,179)','rgb(235,220,199)'],\n   19: ['rgb(255,117,116)','rgb(255,189,189)','rgb(255,168,63)','rgb(255,199,146)','rgb(255,244,155)','rgb(255,255,219)'],\n   20: ['rgb(255,215,235)','rgb(210,200,255)','rgb(194,236,255)','rgb(219,255,255)','rgb(200,220,231)','rgb(178,255,225)'],\n   21: ['rgb(255,48,255)','rgb(181,62,255)','rgb(181,62,255)','rgb(0,21,255)','rgb(98,160,181)','rgb(51,231,200)'],\n   22: ['rgb(121,0,100)','rgb(80,20,101)','rgb(45,7,152)','rgb(0,3,91)','rgb(29,60,91)','rgb(0,60,40)'],\n   23: ['rgb(178,255,225)','rgb(179,255,157)','rgb(255,255,219)','rgb(255,199,146)','rgb(255,189,189)','rgb(235,220,199)'],\n   24: ['rgb(51,231,200)','rgb(0,255,28)','rgb(255,254,0)','rgb(255,137,0)','rgb(255,0,0)','rgb(100,59,43)'],\n   25: ['rgb(0,60,40)','rgb(39,75,0)','rgb(140,114,0)','rgb(100,44,80)','rgb(90,0,39)','rgb(40,19,0)'],\n   26: ['rgb(15,115,37)','rgb(0,170,43)','rgb(0,210,63)','rgb(255,117,138)','rgb(255,164,163)','rgb(255,215,235)'],\n   27: ['rgb(78,130,161)','rgb(98,160,181)','rgb(119,170,191)','rgb(190,101,255)','rgb(200,150,255)','rgb(210,200,255)'],\n   28: ['rgb(181,73,31)','rgb(201,87,0)','rgb(226,112,0)','rgb(0,221,255)','rgb(48,255,255)','rgb(219,255,255)'],\n   29: ['rgb(100,59,43)','rgb(135,114,99)','rgb(175,144,129)','rgb(8,239,34)','rgb(84,255,126)','rgb(179,255,157)'],\n   30: ['rgb(201,28,202)','rgb(255,48,255)','rgb(255,87,190)','rgb(159,171,255)','rgb(179,206,255)','rgb(194,236,255)'],\n   31: ['rgb(0,120,90)','rgb(0,150,120)','rgb(0,181,150)','rgb(255,53,50)','rgb(255,117,116)','rgb(255,189,189)'],\n   32: ['rgb(221,179,0)','rgb(255,219,0)','rgb(255,254,0)','rgb(51,231,200)','rgb(116,246,210)','rgb(178,255,225)'],\n   33: ['rgb(0,21,255)','rgb(0,122,255)','rgb(54,186,255)','rgb(210,179,158)','rgb(220,200,179)','rgb(235,220,199)'],\n   34: ['rgb(141,35,162)','rgb(171,40,192)','rgb(181,62,255)','rgb(255,137,0)','rgb(255,168,63)','rgb(255,199,146)'],\n   35: ['rgb(196,0,44)','rgb(222,0,28)','rgb(255,0,0)','rgb(149,180,201)','rgb(169,200,211)','rgb(200,220,231)'],\n   36: ['rgb(110,46,255)','rgb(130,82,255)','rgb(150,121,255)','rgb(255,249,88)','rgb(255,244,155)','rgb(255,255,219)'],\n   37: ['rgb(181,73,31)','rgb(223,20,42)','rgb(227,116,0)','rgb(254,65,61)','rgb(255,170,69)','rgb(255,191,189)'],\n   38: ['rgb(221,179,0)','rgb(202,91,12)','rgb(254,254,0)','rgb(255,139,0)','rgb(255,244,155)','rgb(255,200,149)'],\n   39: ['rgb(142,44,163)','rgb(130,89,255)','rgb(181,73,255)','rgb(157,172,255)','rgb(200,153,255)','rgb(193,236,255)'],\n   40: ['rgb(77,130,162)','rgb(0,149,119)','rgb(118,170,191)','rgb(44,229,198)','rgb(170,200,210)','rgb(178,254,224)'],\n   41: ['rgb(202,47,203)','rgb(172,50,193)','rgb(255,96,194)','rgb(191,107,255)','rgb(255,166,166)','rgb(210,201,255)'],\n   42: ['rgb(11,114,33)','rgb(254,218,0)','rgb(0,207,54)','rgb(255,248,87)','rgb(82,253,121)','rgb(255,253,218)'],\n   43: ['rgb(108,58,254)','rgb(0,125,254)','rgb(148,125,255)','rgb(0,220,255)','rgb(180,206,255)','rgb(219,255,255)'],\n   44: ['rgb(198,17,52)','rgb(254,68,255)','rgb(255,24,24)','rgb(255,122,141)','rgb(255,122,121)','rgb(255,216,235)'],\n   45: ['rgb(101,59,43)','rgb(98,160,181)','rgb(177,145,130)','rgb(149,180,201)','rgb(221,200,179)','rgb(200,220,229)'],\n   46: ['rgb(1,37,255)','rgb(1,168,36)','rgb(45,186,255)','rgb(1,252,1)','rgb(35,254,255)','rgb(178,252,153)'],\n   47: ['rgb(0,119,87)','rgb(136,114,100)','rgb(1,180,151)','rgb(211,180,159)','rgb(114,246,207)','rgb(236,219,199)'],\n   48: ['rgb(141,114,1)','rgb(71,40,19)','rgb(222,180,0)','rgb(136,114,100)','rgb(255,253,0)','rgb(211,180,159)'],\n   49: ['rgb(91,3,41)','rgb(28,94,7)','rgb(198,17,52)','rgb(1,168,36)','rgb(255,23,23)','rgb(0,251,0)'],\n   50: ['rgb(0,6,92)','rgb(57,101,130)','rgb(1,37,255)','rgb(96,161,181)','rgb(45,186,255)','rgb(149,180,200)'],\n   51: ['rgb(122,13,102)','rgb(1,19,163)','rgb(202,47,203)','rgb(0,125,254)','rgb(255,97,194)','rgb(0,220,255)'],\n   52: ['rgb(41,20,0)','rgb(142,61,60)','rgb(101,59,43)','rgb(202,91,12)','rgb(176,144,129)','rgb(255,139,0)'],\n   53: ['rgb(40,74,0)','rgb(84,37,203)','rgb(11,114,33)','rgb(130,89,255)','rgb(0,208,54)','rgb(157,172,255)'],\n   54: ['rgb(82,25,102)','rgb(152,11,63)','rgb(142,44,163)','rgb(223,20,42)','rgb(181,73,255)','rgb(254,65,61)'],\n   55: ['rgb(0,59,39)','rgb(181,140,0)','rgb(0,119,89)','rgb(254,218,0)','rgb(0,179,149)','rgb(255,248,87)'],\n   56: ['rgb(28,61,92)','rgb(111,37,132)','rgb(77,130,162)','rgb(172,50,193)','rgb(118,170,191)','rgb(191,107,255)'],\n   57: ['rgb(101,47,81)','rgb(0,89,57)','rgb(183,76,40)','rgb(0,149,119)','rgb(229,115,0)','rgb(44,229,198)'],\n   58: ['rgb(44,18,153)','rgb(163,31,153)','rgb(108,58,254)','rgb(254,68,255)','rgb(148,125,255)','rgb(255,122,141)'],\n   59: ['rgb(198,17,52)','rgb(223,20,42)','rgb(255,96,192)','rgb(255,122,141)','rgb(255,170,69)','rgb(255,199,148)'],\n   60: ['rgb(202,47,203)','rgb(254,68,255)','rgb(181,73,255)','rgb(191,107,255)','rgb(255,244,155)','rgb(254,254,218)'],\n   61: ['rgb(221,179,0)','rgb(254,218,0)','rgb(0,207,54)','rgb(1,252,1)','rgb(35,254,255)','rgb(219,255,255)'],\n   62: ['rgb(108,58,254)','rgb(128,90,255)','rgb(118,170,191)','rgb(149,180,201)','rgb(82,253,121)','rgb(178,252,153)'],\n   63: ['rgb(101,59,43)','rgb(137,115,101)','rgb(229,115,0)','rgb(255,139,0)','rgb(169,202,211)','rgb(200,220,231)'],\n   64: ['rgb(0,119,89)','rgb(0,149,119)','rgb(150,125,255)','rgb(157,172,255)','rgb(114,244,208)','rgb(178,254,224)'],\n   65: ['rgb(182,75,39)','rgb(202,91,12)','rgb(255,253,0)','rgb(255,248,87)','rgb(200,153,255)','rgb(210,201,254)'],\n   66: ['rgb(77,130,162)','rgb(98,160,181)','rgb(255,24,24)','rgb(254,65,61)','rgb(255,166,166)','rgb(255,216,235)'],\n   67: ['rgb(142,44,163)','rgb(172,50,193)','rgb(45,186,255)','rgb(0,220,255)','rgb(221,200,179)','rgb(236,219,199)'],\n   68: ['rgb(11,114,33)','rgb(1,168,36)','rgb(0,179,149)','rgb(44,229,198)','rgb(180,206,255)','rgb(193,236,255)'],\n   69: ['rgb(1,37,255)','rgb(0,125,254)','rgb(177,145,130)','rgb(211,180,159)','rgb(254,122,120)','rgb(255,191,191)'],\n   70: ['rgb(122,13,102)','rgb(163,31,153)','rgb(1,37,255)','rgb(0,125,254)','rgb(0,207,54)','rgb(1,252,1)','rgb(255,170,69)','rgb(255,200,149)'],\n   71: ['rgb(142,44,163)','rgb(172,50,193)','rgb(0,179,149)','rgb(44,229,198)','rgb(255,244,155)','rgb(254,254,218)','rgb(91,3,41)','rgb(152,11,63)'],\n   72: ['rgb(45,186,255)','rgb(0,220,255)','rgb(82,253,121)','rgb(178,252,153)','rgb(101,47,81)','rgb(142,61,60)','rgb(101,59,43)','rgb(136,114,100)'],\n   73: ['rgb(114,244,208)','rgb(178,254,224)','rgb(141,114,1)','rgb(181,140,0)','rgb(255,23,23)','rgb(254,65,61)','rgb(170,200,210)','rgb(200,220,231)'],\n   74: ['rgb(40,74,0)','rgb(28,94,7)','rgb(183,76,40)','rgb(202,91,12)','rgb(177,145,130)','rgb(211,180,159)','rgb(180,206,255)','rgb(194,235,255)'],\n   75: ['rgb(202,47,203)','rgb(254,68,255)','rgb(222,180,0)','rgb(254,218,0)','rgb(255,122,121)','rgb(255,191,191)','rgb(28,61,92)','rgb(59,100,132)'],\n   76: ['rgb(181,73,255)','rgb(191,107,255)','rgb(227,116,0)','rgb(255,139,0)','rgb(221,200,179)','rgb(236,219,199)','rgb(44,18,153)','rgb(84,37,203)'],\n   77: ['rgb(200,153,255)','rgb(210,201,255)','rgb(0,59,39)','rgb(0,89,59)','rgb(41,20,1)','rgb(71,40,19)','rgb(108,58,254)','rgb(130,89,255)'],\n   78: ['rgb(255,96,194)','rgb(255,122,141)','rgb(35,254,255)','rgb(219,255,255)','rgb(11,114,33)','rgb(1,168,36)','rgb(198,17,52)','rgb(222,19,41)'],\n   79: ['rgb(82,25,102)','rgb(111,37,132)','rgb(0,119,89)','rgb(0,149,117)','rgb(255,253,0)','rgb(77,130,162)','rgb(77,130,162)','rgb(98,160,181)'],\n   80: ['rgb(255,166,165)','rgb(255,216,235)','rgb(0,6,92)','rgb(1,19,163)','rgb(118,170,191)','rgb(148,180,201)','rgb(150,125,255)','rgb(157,172,255)'],\n   81: ['rgb(41,20,1)','rgb(71,40,19)','rgb(108,58,254)','rgb(130,89,255)','rgb(255,96,194)','rgb(255,122,141)'],\n   82: ['rgb(82,25,102)','rgb(111,37,132)','rgb(0,119,89)','rgb(43,121,107)','rgb(255,253,0)','rgb(255,248,87)'],\n   83: ['rgb(76,129,160)','rgb(98,160,181)','rgb(255,166,166)','rgb(255,216,235)','rgb(0,6,92)','rgb(1,19,163)'],\n   84: ['rgb(181,73,255)','rgb(191,107,255)','rgb(227,116,0)','rgb(255,140,1)','rgb(221,200,179)','rgb(235,220,199)'],\n   85: ['rgb(114,244,208)','rgb(179,254,224)','rgb(141,114,1)','rgb(181,140,0)','rgb(255,24,24)','rgb(254,65,61)'],\n   86: ['rgb(177,145,130)','rgb(211,180,159)','rgb(180,206,255)','rgb(193,236,255)','rgb(202,47,203)','rgb(254,68,255)'],\n   87: ['rgb(255,244,155)','rgb(254,254,218)','rgb(91,3,41)','rgb(152,11,63)','rgb(45,186,255)','rgb(0,220,255)'],\n   88: ['rgb(170,200,210)','rgb(200,220,231)','rgb(38,74,0)','rgb(28,94,7)','rgb(183,76,40)','rgb(202,91,12)'],\n   89: ['rgb(121,12,101)','rgb(163,31,153)','rgb(1,37,255)','rgb(0,125,254)','rgb(0,207,54)','rgb(1,252,0)'],\n   90: ['rgb(255,170,67)','rgb(255,200,149)','rgb(142,44,163)','rgb(172,50,193)','rgb(0,179,147)','rgb(44,229,198)'],\n   91: ['rgb(35,255,255)','rgb(219,255,255)','rgb(11,114,33)','rgb(1,168,36)','rgb(198,16,54)','rgb(223,20,42)'],\n   92: ['rgb(222,180,0)','rgb(254,218,0)','rgb(255,121,118)','rgb(255,191,191)','rgb(28,61,92)','rgb(57,101,130)'],\n   93: ['rgb(44,18,153)','rgb(84,37,203)','rgb(200,153,255)','rgb(210,201,255)','rgb(0,59,39)','rgb(0,89,59)'],\n   94: ['rgb(82,253,121)','rgb(178,252,153)','rgb(101,47,81)','rgb(93,93,93)','rgb(101,59,43)','rgb(137,115,101)'],\n   95: ['rgb(118,170,191)','rgb(93,93,93)','rgb(150,125,255)','rgb(157,172,255)','rgb(122,13,102)','rgb(163,31,153)'],\n   96: ['rgb(40,74,0)','rgb(27,95,10)','rgb(142,44,163)','rgb(172,50,193)','rgb(255,96,194)','rgb(255,122,141)'],\n   97: ['rgb(0,6,92)','rgb(0,21,163)','rgb(222,180,0)','rgb(254,218,0)','rgb(0,207,54)','rgb(1,252,1)'],\n   98: ['rgb(93,69,82)','rgb(152,11,63)','rgb(1,37,255)','rgb(0,125,254)','rgb(181,73,255)','rgb(191,107,255)'],\n   99: ['rgb(141,114,1)','rgb(181,140,0)','rgb(77,130,162)','rgb(98,160,181)','rgb(148,125,255)','rgb(157,172,255)'],\n  100: ['rgb(44,18,153)','rgb(84,37,203)','rgb(0,119,89)','rgb(0,149,119)','rgb(174,145,129)','rgb(212,180,159)'],\n  101: ['rgb(28,61,92)','rgb(59,100,132)','rgb(202,47,203)','rgb(254,68,255)','rgb(227,116,0)','rgb(255,139,0)'],\n  102: ['rgb(122,13,102)','rgb(163,31,153)','rgb(101,59,43)','rgb(137,115,101)','rgb(255,24,24)','rgb(254,65,61)'],\n  103: ['rgb(101,47,81)','rgb(142,61,60)','rgb(198,17,52)','rgb(223,20,42)','rgb(45,186,255)','rgb(0,220,255)'],\n  104: ['rgb(0,59,39)','rgb(0,89,59)','rgb(183,76,40)','rgb(202,90,14)','rgb(255,253,0)','rgb(255,248,87)'],\n  105: ['rgb(82,25,102)','rgb(111,37,132)','rgb(108,58,254)','rgb(130,89,255)','rgb(118,170,191)','rgb(149,180,201)'],\n  106: ['rgb(41,20,1)','rgb(71,40,19)','rgb(11,114,33)','rgb(11,114,33)','rgb(1,168,36)','rgb(44,229,198)']\n}\n\nexport default swatches\n\nexport const random = (prng = Math.random) => {\n  const index = randomOf(Object.keys(swatches), prng)\n  const swatch = swatches[index]\n  return { index, swatch }\n}\n"],"names":["serializer","replacer","cycleReplacer","stack","keys","key","value","slice","indexOf","join","length","thisPos","this","splice","push","Infinity","call","module","obj","spaces","JSON","stringify","uheprng","seed","i","j","o","c","p","s","Array","k","mash","n","data","toString","h","charCodeAt","Math","random","rawprng","t","range","floor","string","count","String","fromCharCode","cleanString","inStr","replace","hashString","initState","addEntropy","args","arguments","prototype","hash","Date","getTime","done","Number","MAX_VALUE","floatBetween","min","max","intBetween","create","[object Object]","Uint8Array","rng","rand","r","temp","fn","dims","apply","bind","octaves","val","w","gen","map","x","Vec1","g1","grad1","falloff","reduce","sum","lerp","a","b","fade","cut1","cut","require$$0","require$$1","Noise","gx","dx","dot","Vec2","y","g2","grad2","S2_TO_C","sqrt","C_TO_S2","skew","trunc","unskew","dx0","dy0","di","dj","dx1","dy1","dx2","dy2","n0","n1","gy","dy","n00","n10","n01","n11","Vec3","z","g3","grad3","gz","dz","n000","n100","n010","n110","n001","n101","n011","n111","Vec4","g4","grad4","gt","dt","n0000","n1000","n0100","n1100","n0010","n1010","n0110","n1110","n0001","n1001","n0101","n1101","n0011","n1011","n0111","n1111","hashN","gs","VecN","R","gN","lerpN","ns","ds","ns1","ns2","ceil","getNs","dim","vec","fill","generateGN","gsPerm","dsPerm","Simplex1","Simplex2","Perlin1","Perlin2","Perlin3","Perlin4","global","noise","Grad","dot2","dot3","perm","gradP","v","F2","G2","G3","simplex2","xin","yin","i1","j1","x0","y0","x1","y1","x2","y2","gi1","gi2","t0","t1","t2","simplex3","zin","k1","i2","j2","k2","z0","z1","z2","x3","y3","z3","gi3","t3","perlin2","X","Y","u","perlin3","Z","exports","clamp","normalize","in_min","in_max","out_min","out_max","undefined","perlin","constrain","degrees","rad","PI","radians","deg","norm","rnd","Gradient","f","width","height","compute","ref","ctx","color","fillStyle","fillRect","symbol","unit","isSVG","beginSVGGroup","background","backgroundColor","foregroundColor","scale","endSVGGroup","methods","Object","getOwnPropertyNames","filter","prop","simplex","frequency","pow","tumult","power","linear","alpha","theta","sin","cos","fix","lineclip","points","bbox","result","codeB","lastCode","len","codeA","bitCode","part","intersect","edge","code","path","beginPath","forEach","point","index","nearest","steps","step","polyline","polygon","prev","prevInside","inside","const","symbols","empty","debug","strokeStyle","lineWidth","strokeRect","square","thickness","roundTo","square_offset","vertical_line","vertical_line_offset","horizontal_line","horizontal_line_offset","diagonal","moveTo","lineTo","diamond","drawPath","circle","diameter","closePath","ffp","gradient","split","char","font","fillText","Ground","line","makePattern","pattern","grid","cells","_populate","setCell","cell","hasCell","isInFrontOf","setBehind","grounds","column","shouldRender","some","ground","isEmpty","find","render","createSprite","Error","sprite","canvas","document","createElement","createCanvasFromContext","getContext","STYLES","CanvasGradient","CanvasPattern","namedEntities","format","str","RegExp","randomString","holder","chars","randomstring","items","radix","entity","base10","lookup","parseInt","createNamedToNumberedLookup","svgAttr","svg","lineCap","lineJoin","miterLimit","globalAlpha","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","textAlign","textBaseline","gradientNode","__root","__ctx","addColorStop","offset","matches","stop","__createElement","setAttribute","exec","g","appendChild","options","defaultOptions","enableMirroring","__document","__canvas","__setDefaultStyles","__stack","__getStyleState","__groupStack","createElementNS","setAttributeNS","__ids","__defs","__currentElement","elementName","properties","resetFill","element","__applyStyleState","styleState","__applyStyleToCurrentElement","type","style","id","childNodes","getAttribute","__closestGroupOrSvg","node","nodeName","parentNode","getSerializedSvg","fixNamedEntities","regexp","serialized","XMLSerializer","serializeToString","test","getSvg","save","group","parent","restore","pop","state","__addTransform","transform","rotate","angle","cx","cy","translate","d","e","__currentDefaultPath","__currentPosition","__applyCurrentDefaultPath","__addPathCommand","command","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","quadraticCurveTo","cpx","cpy","vector","arcTo","radius","unit_vec_p1_p0","unit_vec_p1_p2","acos","abs","unit_vec_p1_origin","len_p1_origin","unit_vec_origin_start_tangent","unit_vec_origin_end_tangent","getAngle","startAngle","endAngle","arc","stroke","rect","clearRect","createLinearGradient","grad","gradientUnits","createRadialGradient","r0","r1","fx","fy","__parseFont","fontPart","size","family","weight","decoration","href","__fontUnderline","__fontHref","__wrapTextLink","__applyText","text","action","mapping","textElement","font-family","font-size","font-style","font-weight","text-decoration","text-anchor","left","right","center","start","end","dominant-baseline","alphabetic","hanging","top","bottom","middle","getDominantBaseline","createTextNode","strokeText","measureText","counterClockwise","endX","endY","startX","startY","sweepFlag","largeArcFlag","diff","rx","ry","xAxisRotation","clip","clipPath","newGroup","removeChild","drawImage","dw","dh","sw","sh","defs","currentElement","svgImage","image","sx","sy","toDataURL","createPattern","repetition","img","drawFocusRing","createImageData","getImageData","putImageData","globalCompositeOperation","setTransform","window","C2S","XMLHttpRequest","open","responseType","onload","response","onerror","console","error","send","status","dispatchEvent","MouseEvent","createEvent","initMouseEvent","self","saveAs","HTMLAnchorElement","URL","webkitURL","download","name","rel","origin","location","target","createObjectURL","setTimeout","revokeObjectURL","navigator","msSaveOrOpenBlob","autoBom","warn","Blob","title","body","innerText","HTMLElement","safari","userAgent","FileReader","onloadend","readAsDataURL","l","SVGCanvas","Canvas","context","serializedSvg","toBlob","isSupportedMimeType","Promise","resolve","didMount","mount","sibling","mounted","el","insertBefore","copy","clear","querySelector","innerHTML","SUPPORTED_MIME_TYPES","includes","filename","now","then","FileSaver","$await_1","Landscape","super","prototypeAccessors","_grounds","foregrounds","Boolean","ensureSVGContext","Line","equation","_equation","arr","force","resolution","amplitude","lacunarity","gain","time","_seed","_nextInt","nextInt","nextFloat","randomizer","fastRandom","newSeed","reset","randomOf","arrayRandom","randomFloat","randomInt","root","_observers","_afterObservers","_beforeObservers","_rafHandler","_lastDate","_once","_complex","_frame","timestamp","requestAnimationFrame","_swapRunner","_addObserver","prepend","unshift","_removeObserver","instant","cancelAnimationFrame","add","addAfter","addBefore","remove","removeAfter","removeBefore","requestOnce","dispose","defaultInstanceSettings","update","begin","loopBegin","changeBegin","change","changeComplete","loopComplete","complete","loop","direction","autoplay","timelineOffset","defaultTweenSettings","duration","delay","endDelay","easing","round","validTransforms","cache","CSS","springs","minMax","stringContains","applyArguments","func","is","isArray","pth","hasOwnProperty","SVGElement","inp","HTMLInputElement","dom","nodeType","fnc","und","hex","rgb","hsl","col","parseEasingParameters","match","parseFloat","spring","params","mass","stiffness","damping","velocity","w0","zeta","wd","solver","progress","exp","cached","elapsed","rest","elastic","period","asin","bezier","kSplineTableSize","kSampleStepSize","A","aA1","aA2","B","C","calcBezier","aT","getSlope","mX1","mY1","mX2","mY2","sampleValues","Float32Array","getTForX","aX","intervalStart","currentSample","lastSample","guessForT","initialSlope","aGuessT","currentSlope","newtonRaphsonIterate","aA","aB","currentX","currentT","binarySubdivide","penner","names","curves","In","Out","InOut","eases","coords","ease","parseEasings","selectString","querySelectorAll","filterArray","callback","thisArg","flattenArray","concat","toArray","NodeList","HTMLCollection","arrayContains","cloneObject","clone","replaceObjectProps","o1","o2","mergeObjects","colorToRgb","rgbValue","hexValue","m","hexToRgba","hslValue","hue2rgb","q","hslToRgba","getUnit","getFunctionValue","animatable","total","convertPxToUnit","tempEl","tagName","parentEl","position","factor","offsetWidth","convertedUnit","getCSSValue","uppercasePropName","toLowerCase","getComputedStyle","getPropertyValue","getAnimationType","getElementTransforms","reg","transforms","Map","set","getTransformValue","propName","defaultVal","getTransformUnit","get","list","getOriginalTargetValue","getRelativeValue","to","from","operator","validateValue","originalUnit","unitLess","substr","getDistance","p1","p2","getPolylineLength","previousPos","totalLength","numberOfItems","currentPos","getItem","getTotalLength","getCircleLength","getRectLength","getLineLength","getPolygonLength","getParentSvg","pathEl","svgData","parentSvgEl","getParentSvgEl","getBoundingClientRect","viewBoxAttr","viewBox","getPathProgress","getPointAtLength","p0","property","atan2","decomposeValue","rgx","original","numbers","strings","parseTargets","targets","item","pos","getAnimatables","parsed","normalizePropertyTweens","tweenSettings","settings","propArray","getProperties","keyframes","propertyNames","newKey","flattenKeyframes","tweens","normalizeTweens","previousTween","tween","normalizeTweenValues","tweenValue","toUnit","originalValue","previousValue","fromUnit","isPath","isColor","setProgressValue","css","attribute","object","manual","last","setTargetsValue","valueUnit","animType","getAnimations","animatables","lastTween","createAnimation","getInstanceTimings","animations","animLength","getTlOffset","anim","timings","instanceID","raf","activeInstances","pausedInstances","engine","play","activeInstancesLength","activeInstance","paused","instanceIndex","tick","anime","children","startTime","lastTime","childrenLength","makePromise","instance","promise","_resolve","finished","instanceSettings","createNewInstance","toggleInstanceDirection","reversed","child","adjustTime","resetTime","currentTime","speed","seekCild","seek","setAnimationsProgress","insTime","animationsLength","tweenLength","eased","isNaN","toNumbersLength","toNumber","fromNumber","stringsLength","n$1","currentValue","setCallback","cb","passThrough","setInstanceProgress","engineTime","insDuration","insDelay","insEndDelay","reversePlayback","i$1","syncInstanceChildren","began","changeBegan","changeCompleted","remaining","completed","pause","reverse","restart","removeTargetsFromAnimations","targetsArray","addEventListener","hidden","ins","version","running","childAnimations","convertPx","percent","setDashoffset","pathLength","stagger","axis","fromIndex","fromFirst","fromCenter","fromLast","isRange","val1","val2","values","maxValue","fromX","fromY","distanceX","distanceY","timeline","tl","instanceParams","tlIndex","insParams","tlDuration","prng","patterns","symbolName","SYMBOLS","groundsLength","_","units","swatch","percentOfGradients","percentOfSimplexGradients","offy","percentOfStraightLines","landscape","let","shouldUpdate","buffer","frameCount","snapToGrid","container","classList","containerClass","nextSibling","display","Image","src","api","off","sign","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106"],"mappings":"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"}